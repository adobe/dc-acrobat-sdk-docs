<!DOCTYPE HTML>
<html>
<head>

 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
 <title>Creating annotations</title>

 <meta name="generator" content="Adobe FrameMaker 2015" />
 <meta name="Originator" content="ImportMif" />
 <meta name="OriginalFile" content="C:\Users\Perforce\Work\Groups\SDK\main\Documents\Common\docs_fm\PluginAppsDeveloperGuide\Plugins_3D_samples.fm" />
 <link rel="stylesheet" href="Plugins_3D_samples.css" type="text/css" />


<script type="text/javascript" language="JavaScript">
//<![CDATA[
function reDo() {
  if (innerWidth != origWidth || innerHeight != origHeight)
     location.reload();
}
if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
	origWidth = innerWidth;
	origHeight = innerHeight;
	onresize = reDo;
}
onerror = null; 
//]]>
</script>
<style type="text/css">
<!--
div.WebHelpPopupMenu { position:absolute;
left:0px;
top:0px;
z-index:4;
visibility:hidden; }
p.WebHelpNavBar { text-align:right; }
-->
</style>

<script type="text/javascript" src="../../template/scripts/rh.min.js"></script>
<script type="text/javascript" src="../../template/scripts/common.min.js"></script>
<script type="text/javascript" src="../../template/scripts/topic.min.js"></script>
<script type="text/javascript" src="../../template/scripts/constants.js"></script>
<script type="text/javascript" src="../../template/scripts/utils.js"></script>
<script type="text/javascript" src="../../template/scripts/mhutils.js"></script>
<script type="text/javascript" src="../../template/scripts/mhlang.js"></script>
<script type="text/javascript" src="../../template/scripts/mhver.js"></script>
<script type="text/javascript" src="../../template/scripts/settings.js"></script>
<script type="text/javascript" src="../../template/scripts/XmlJsReader.js"></script>
<script type="text/javascript" src="../../template/scripts/loadparentdata.js"></script>
<script type="text/javascript" src="../../template/scripts/loadscreen.js"></script>
<script type="text/javascript" src="../../template/scripts/loadprojdata.js"></script>
<script type="text/javascript" src="../../template/scripts/mhtopic.js"></script>
 <link rel="stylesheet" type="text/css" href="../../template/styles/topic.min.css">
<script type="text/javascript" >
gRootRelPath = "../..";
gCommonRootRelPath = "../..";
gTopicId = "2.1.18.0_1";
</script>
 <meta name="brsprev" value="Acro12_MasterBook/Plugins_3D_samples/Creating_3D_Annotations.htm">
 <meta name="brsnext" value="Acro12_MasterBook/Plugins_3D_samples/Adding_3D_data_to_an_annotation.htm">
 <meta name="topic-breadcrumbs" content="Plug-ins and Applications > Overview > Creating 3D Annotations" />
</head>

<body dir="ltr">
<script type="text/javascript" src="../../ehlpdhtm.js"></script>
<div dir="ltr">
  <h2><a name="XREF_82159_Creating_the"></a>Creating annotations </h2>
  <p class="BodyLevel1">Before you can add three-dimensional data to an annotation, you must create it. Annotations are represented by an annotation dictionary. A <span class="FM_Italic">dictionary</span>&#160;is a data structure with one or more entries, which are <span class="FM_Italic">key-value pairs:</span></p>
  <ul type="disc" style="Direction:Direction:ltr;
;
">
   <li>
   <p class="FM_Bullet1">The key is a <span class="FM_Italic">name object</span>.</p>
</li>
   <li>
   <p class="FM_Bullet1">The value is some type of PDF object. The <uservariable x-value="PDF Reference" x-showvalue="TRUE" name="Ref_DocPDF" x-format="Ref_DocPDF"><span class="FM_Italic">PDF Reference</span></uservariable><span class="FM_Italic"></span>&#160;describes all the PDF object types. If the value is a dictionary, that dictionary has its own key-value pairs. Therefore, dictionaries can be nested within other dictionaries (as you will see with the 3D structures). The <uservariable x-value="PDF Reference" x-showvalue="TRUE" name="Ref_DocPDF" x-format="Ref_DocPDF"><span class="FM_Italic">PDF Reference</span></uservariable><span class="FM_Italic"></span>&#160;is available within the portfolio called <span class="FM_HyperText"><a href="www.adobe.com/go/acrobatsdk_pdf_reference">PDF Reference and Related Documentation</a></span>, which is located at the <span class="FM_HyperText"><a href="http://www.adobe.com/go/pdf_developer">Adobe PDF Technology Center</a></span>.</p>
</li>
  </ul>
  <p class="BodyLevel1">General annotation dictionary entries are described in Table 8.15 in the <uservariable x-value="PDF Reference" x-showvalue="TRUE" name="Ref_DocPDF" x-format="Ref_DocPDF"><span class="FM_Italic">PDF Reference</span></uservariable><span class="FM_Italic"></span>. Those specific to 3D annotations are described in Table 9.33. </p>
  <p class="BodyLevel1"><a name="IX_PDPageAddNewAnnot_method"></a>The following code example creates a 3D annotation with corners (1, 9.5) and (7,4) using the <span class="FM_Courier">PDPageAddNewAnnot</span> method:</p>
  <p class="FM_CodeReference"><span style="font-family:'Times New Roman'; font-size:7.0pt">&nbsp;&nbsp;&nbsp;</span>ASFixedRect annotRect;</p>
  <p class="FM_CodeReference"><span style="font-family:'Times New Roman'; font-size:7.0pt">&nbsp;&nbsp;&nbsp;</span>annotRect.left &#160;&#160;= Int16ToFixed(1*72); </p>
  <p class="FM_CodeReference"><span style="font-family:'Times New Roman'; font-size:7.0pt">&nbsp;&nbsp;&nbsp;</span>annotRect.top &#160;&#160;&#160;= Int16ToFixed(9.5*72); &#160;&#160;&#160;&#160;</p>
  <p class="FM_CodeReference"><span style="font-family:'Times New Roman'; font-size:7.0pt">&nbsp;&nbsp;&nbsp;</span>annotRect.right &#160;= Int16ToFixed(7.0*72);</p>
  <p class="FM_CodeReference"><span style="font-family:'Times New Roman'; font-size:7.0pt">&nbsp;&nbsp;&nbsp;</span>annotRect.bottom = Int16ToFixed(4*72); </p>
  <p class="FM_CodeReference"><span style="font-family:'Times New Roman'; font-size:7.0pt">&nbsp;&nbsp;&nbsp;</span></p>
  <p class="FM_CodeReference"><span style="font-family:'Times New Roman'; font-size:7.0pt">&nbsp;&nbsp;&nbsp;</span>PDAnnot newAnnot = PDPageAddNewAnnot(pdPage, -2, ASAtomFromString(&quot;3D&quot;),</p>
  <p class="FM_CodeReference"><span style="font-family:'Times New Roman'; font-size:7.0pt">&nbsp;&nbsp;&nbsp;</span>&amp;annotRect);</p>
  <p class="BodyLevel1">This method contains the following parameters:</p>
  <ul type="disc" style="Direction:Direction:ltr;
;
">
   <li>
   <p class="FM_Bullet1">The <span class="FM_Courier">PDPage</span> on which to place the annotation.</p>
</li>
   <li>
   <p class="FM_Bullet1">An <span class="FM_Courier">ASInt32</span>&#160;indicating where to add the annotation in the page’s annotation array. The value -2 is normally used and means the annotation is added to the end of the page’s annotation array. For information about this value, see the <span class="FM_HyperText"><a href="http://help.adobe.com/en_US/acrobat/acrobat_dc_sdk/2015/HTMLHelp/Acro12_MasterBook/API_References_SectionPage/API_References/Acrobat_API_Reference/index.html">Acrobat and PDF Library API Reference</a></span>. </p>
</li>
   <li>
   <p class="FM_Bullet1">The type of the annotation, which in this case is <span class="FM_Courier">3D</span>. This sets the value of the annotation dictionary’s <span class="FM_Courier">Subtype</span>&#160;entry. It is important to note that in PDF this is a <span class="FM_Italic">name object</span>, not a string. In the API, the <span class="FM_Courier">ASAtom</span>&#160;type is frequently used to represent names; the <span class="FM_Courier">ASAtomFromString</span>&#160;method converts a string to a name. </p>
</li>
   <li>
   <p class="FM_Bullet1">The rectangle in which the annotation appears on the page. This sets the value of the annotation dictionary’s <span class="FM_Courier">Rect</span> entry.</p>
</li>
  </ul>
  <p class="BodyLevel1">After the annotation has been created, you must complete the other entries in the annotation dictionary. The <span class="FM_Courier">F</span> (flags) entry is set here:</p>
  <p class="FM_CodeReference"><span style="font-family:'Times New Roman'; font-size:7.0pt">&nbsp;&nbsp;&nbsp;</span>PDAnnotSetFlags(newAnnot, pdAnnotPrint | pdAnnotReadOnly);</p>
  <p class="BodyLevel1">The annotation’s initial appearance (the <span class="FM_Courier">AP</span>&#160;entry) can be set. (See <a href="Setting_the_annotation_appearance.htm#XREF_59797_Setting_the">Setting the annotation appearance</a>.)</p>
  <p class="BodyLevel1">Other entries are set using the <span class="FM_Courier">EmbedDataIn3Dannot</span>&#160;function (See <a href="Adding_3D_data_to_an_annotation.htm#XREF_21047_Adding_3D_data_to"><span class="FM_HyperText">Adding 3D data to an annotation</span></a>.)</p>

  <p class="BodyLevel1">If you add PRC data to a 3D annotation, you must also ensure that the document’s <span class="FM_Courier">Catalog</span>&#160;dictionary contains an Adobe <span class="FM_Courier">Extension</span> dictionary that specifies the PDF base version (<span class="FM_Courier">1.7</span>) and extension level (<span class="FM_Courier">1 </span>or greater) that added PRC data to 3D annotations. (See <a href="../Plugins_Documents/PDF_version_extensions.htm#XREF_53916_PDF_version_and"><span class="FM_HyperText">PDF version extensions</span></a>.) </p>

  </div>
</body>
</html>