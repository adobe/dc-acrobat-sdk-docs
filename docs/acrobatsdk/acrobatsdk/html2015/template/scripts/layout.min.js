/*
  Copyright Â© 2016 Adobe Systems Incorporated.  All rights reserved.
  Generated by Adobe RoboHelp 2015
*/
(function(){var a,b,c,d,rh;rh=window.rh,b=rh._,a=rh.$,c=rh.consts,d=rh.model,b.getRootUrl=function(){var a;return a=null,function(){return null!=a?a:a=""+b.getHostFolder()+c("START_FILEPATH")}}(),b.runTopicLoadingAnimation=function(){var a,e;return a=null,e=!1,function(f){return e=f,f?(null==a&&(a=b.debounce(function(){return d.publish(c("EVT_TOPIC_LOADING"),e)},700)),a()):(a=null,d.publish(c("EVT_TOPIC_LOADING"),!1))}}(),b.getTopicFrame=function(){var b;return b=window.gTopicFrameName||"rh_default_topic_frame_name",a("[name="+b+"]",0)}}).call(this),function(){var a,b,c,d,e,f,rh;rh=window.rh,b=rh._,a=rh.$,c=rh.consts,e=rh.model,e.publish(c("KEY_SHOW_TAGS"),"true"===rh._params.showtags),e.publish(c("KEY_IFRAME_EVENTS"),{click:!0}),f={},d=function(){var a;return a=b.hashParams(),e.publish(c("EVT_HASH_CHANGE"),{oldMap:f,newMap:a},{sync:!0}),f=a},b.addEventListener(window,"hashchange",d),b.addEventListener(window,"orientationchange",function(a){var d,f;if(e.publish(c("EVT_ORIENTATION_CHANGE"),null),e.get(c("KEY_SCREEN_IPAD"))&&(f=b.getTopicFrame()))return d=f.style.display,f.style.display="none",f.offsetHeight,b.defer(function(){return f.style.display=d,b.delay(function(){return f.offsetHeight,b.delay(function(){return f.offsetHeight},500)},200)})}),e.subscribe(c("EVT_WIDGET_LOADED"),function(){var a,f,g,h;return e.subscribe(c("KEY_MERGED_FILTER_KEY"),function(){return new rh.widgets.ExpressionBuilder}),new rh.widgets.BrowseSequenceBuilder,d(),rh.layoutPrint=window.print,window.print=function(){return e.publish(c("EVT_PRINT_TOPIC"),null)},(h=b.getTopicFrame())?h.onload=function(){return e.publish(c("EVT_TOPIC_LOADED"),null)}:(g=b.extractParamString(document.location.href),f=b.urlParams(g),a=c("RHMAPNO"),a in f?document.location=c("TOPIC_FILE")+"?"+g:void 0)}),e.subscribe(c("EVT_BOOKMARK")+"#content_top_placeholder",function(){return e.publish(c("EVT_SCROLL_TO_TOP"),null)}),e.subscribe(c("KEY_PROJECT_LIST"),function(){return rh.filterObject=new rh.MergeProj}),e.subscribe(c("EVT_PROJECT_LOADED"),function(){var a;return a="deviceready",document.addEventListener(a,function(){if(null!=window.cordova)return e.publish(c("KEY_MOBILE_APP_MODE"),!0)})})}.call(this),function(){var a,b,c,d,rh;rh=window.rh,d=rh.model,b=rh._,c=rh.consts,a=function(){function a(){this.tagCombs=[],this.idmap={},this.filter=[],this.grpType="group",this.dataLoaded=!1,this.loadTagData(d.get(c("KEY_PROJECT_LIST"))),this.caption=this.type=this.defFilter=void 0}var e,f;return a.prototype.updateTagCombs=function(a){var e,f;if(f=d.get(c("KEY_PROJECT_TAG_COMBINATIONS")),null!=f)return a=b.parseProjectName(a),null!=(e=this.idmap)[a]?e[a]:e[a]=f},a.prototype.lookup=function(a,b,c){var d,e,f,g,h;if(null==c&&(c=!0),null!=a&&null!=b)for(g=0,h=a.length;g<h&&(d=a[g],null==d||(e=d.name||d.display,c===(null!=d.children)&&e===b?f=d:null==d.children||c||(f=this.lookup(d.children,b,c)),null==f));g++);return f},e=function(a){var b;return b={type:this.grpType,display:a,children:[]}},a.prototype.addTag=function(a,b){var c;if(null==this.lookup(this.filter,b.name,!1))return c={display:b.display,name:b.name},a.push(c)},a.prototype.addGroup=function(a){var b,c,d,f,g;for(c=this.lookup(this.filter,a.display),null==c&&(c=e(a.display),this.filter.push(c)),g=a.children,d=0,f=g.length;d<f;d++)b=g[d],null!=b&&null==b.children&&this.addTag(c.children,b);if(0===c.children.length&&this.filter.indexOf(c)>-1)return this.filter.splice(this.filter.indexOf(c),1)},a.prototype.updateFilter=function(){var a,b,e,f,g;for(a=d.get(c("KEY_TEMP_DATA"))||[],this.caption||(this.caption=a.caption),this.type||(this.type=a.type),"undefined"==typeof this.defFilter&&(this.defFilter=a["default"]),a=a.tags||[],d.publish(c("KEY_TEMP_DATA")),g=[],e=0,f=a.length;e<f;e++)b=a[e],null!=b&&(null!=b.children?g.push(this.addGroup(b)):g.push(this.addTag(this.filter,b)));return g},f=function(a,b){if(this.updateTagCombs(a),this.updateFilter(),!b)return d.publish(c("KEY_MERGED_FILTER_KEY"),this.filter),d.publish(c("KEY_MERGED_PROJECT_MAP"),this.idmap),d.publish(c("KEY_PROJECT_FILTER_CAPTION"),this.caption),d.publish(c("KEY_PROJECT_FILTER_TYPE"),this.type),d.publish(c("KEY_DEFAULT_FILTER"),this.defFilter),this.dataLoaded=!0},a.prototype.loadTagData=function(a){var d,e,g,h,i;if(!this.dataLoaded){for(d=a.length,i=[],e=0,g=a.length;e<g;e++)h=a[e],null!=h?(h&&(h+="/"),i.push(b.loadScript(""+h+c("PATH_PROJECT_TAGDATA_FILE"),!1,f.bind(this,h,--d)))):i.push(void 0);return i}},a}(),rh.MergeProj=a}.call(this),function(){var a,b,c,d,rh,e,f,g=function(a,b){return function(){return a.apply(b,arguments)}};rh=window.rh,c=rh._,a=rh.$,d=rh.consts,e=rh.storage,f=rh._params.filter,b=function(){function a(a){this.handleTagStates=g(this.handleTagStates,this),this.getUnchecked=g(this.getUnchecked,this),e.init(d("HELP_ID")),this.allTagNames=this.computeNames(rh.model.get(d("KEY_MERGED_FILTER_KEY"))),this.prepareTagStates(),this.handleTagStates(rh.model.get(d("KEY_PROJECT_TAG_STATES"))),rh.model.subscribe(d("KEY_PROJECT_TAG_STATES"),c.debounce(this.handleTagStates,300),{initDone:!0})}var b,h,i;return h=":",i=";",b=",",a.prototype.computeNames=function(a){return c.reduce(a,function(a,b){return a.push(b.children?this.computeNames(b.children):b.name),a},[],this)},a.prototype.getUnchecked=function(a,b){return c.filter(this.allTagNames[a],function(a){return-1===b.indexOf(a)})},a.prototype.computeExpression=function(a){var b;return a&&this.allTagNames?(b=c.reduce(a,function(a,b,d){var e;return c.isString(b)?a.push({c:[b],u:[]}):null!=b&&(e=c.compact(b))&&e.length>0&&a.push({c:e,u:this.getUnchecked(d,e)}),a},[],this),rh.model.publish(d("KEY_TAG_EXPRESSION"),b)):rh.model.publish(d("KEY_TAG_EXPRESSION"),[])},a.prototype.handleTagStates=function(a){return null==a&&(a={}),this.computeExpression(a),e.persist("tag_states",a)},a.prototype.prepareTagStates=function(){return rh.model.subscribe(d("KEY_PROJECT_FILTER_TYPE"),function(a){return function(){var g,h;if(f&&(g=rh.model.get(d("KEY_MERGED_FILTER_KEY")),h=a.parseUrlFilter(g,f.split(b))),h||(h=e.fetch("tag_states")),h||(h=c.clone(rh.model.get(d("KEY_DEFAULT_FILTER")))),h)return rh.model.publish(d("KEY_PROJECT_TAG_STATES"),h)}}(this))},a.prototype.parseFilterElemnt=function(a,b){var d,e,f,g;return g=b.split(h),f=g[0],d=g[1]&&g[1].split(i),e=c.findIndex(a,function(a){return null!=d==(null!=a.children)&&a.display===f}),{index:e,elements:d}},a.prototype.parseUrlFilter=function(a,b){var e,f;if(b||b.length)return f="radio"===rh.model.get(d("KEY_PROJECT_FILTER_TYPE")),e=!0,c.reduce(b,function(b,c,d){var g,h,i;return i=this.parseFilterElemnt(a,c),d=i.index,g=i.elements,d!==-1&&(h=a[d],h.children?b[d]=this.parseUrlFilter(h.children,g):f&&!e||(e=!1,b[d]=h.name)),b},{},this)},a}(),rh.widgets.ExpressionBuilder=b}.call(this),function(){var a,b,c,rh;rh=window.rh,c=rh._,a=rh.$,b=function(){function a(){var a,b;a=function(a){var b,d,e,f;if(b=rh.model.get("t.brsmap"),null!=b)return e=b.n&&b.n[0]||"",f=b.p&&b.p[0]||"",d=window.decodeURI(document.location.href),c.isEmptyString(e)||(e=window._getRelativeFileName(d,e)),c.isEmptyString||(f=window._getRelativeFileName(d,f)),rh.model.publish("l.brsBack",f),rh.model.publish("l.brsNext",e)},b=function(){var a,b,c,d;return d=rh.model.get(rh.consts("KEY_UI_MODE")),b=rh.model.get("l.brsBack"),a=rh.model.get("l.brsNext"),c=!(d||!b&&!a),rh.model.publish("l.show_brs",c)},rh.model.subscribe("t.topicurl",c.debounce(a,200)),rh.model.subscribe("t.brsmap",c.debounce(a,200)),rh.model.subscribe("l.brsBack",b),rh.model.subscribe("l.brsNext",b),rh.model.subscribe(rh.consts("KEY_UI_MODE"),b)}return a}(),rh.widgets.BrowseSequenceBuilder=b}.call(this),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,rh,r,s,t;rh=window.rh,h=rh._,a=rh.$,i=rh.consts,o=rh.model,d=i("HASH_KEY_RH_SEARCH"),f=i("HASH_KEY_TOPIC"),g=i("HASH_KEY_UIMODE"),e=i("HASH_KEY_RH_TOCID"),c=i("HASH_KEY_RH_HIGHLIGHT"),b=i("HASH_KEY_RANDOM"),n=[c,i("HASH_KEY_RH_SYNS"),e],k=function(a){var b,c;return c=h.urlParams(h.extractParamString(a)),b=h.hashParams(h.extractHashString(a)),h.extend(c,b)},l=function(a,c){var d,e,f,g,j,k,l;for(c=c,e=h.filePath(c),d=h.extractHashString(c),d.length>0&&(d="#"+d),l=h.urlParams(h.extractParamString(c)),f=0,j=n.length;f<j;f++)g=n[f],null!=a[g]&&(l[g]=a[g]);return o.get(i("KEY_SCREEN_IOS"))&&(l[b]=h.uniqueId()),k=h.mapToEncodedString(l),k.length>0&&(k="?"+k),""+e+k+d},q=function(a,b){return h.defer(function(){return h.updateHashMap(a,b)})},j=function(a){return null==a&&(a={}),a[g]=null,a[b]=null,a[e]||(a[e]=null),a[c]||(a[c]=null),a},s=function(a,b){var c;return a=h.fixRelativeUrl(a),c=h.urlParams(h.extractParamString(a)),c[f]=h.stripParam(a),c=j(c),q(c,b)},r=function(a,b){var c;return c={},c[f]=a,c=j(c),q(c,b)},m=function(a){var b,j,k,m,n,p,q,r,s,t;return j=a.newMap,k=a.oldMap,n=k[g],t=j[g],d in j&&(q=j[d],r=q!==o.get(i("KEY_SEARCHED_TERM")),o.publish(i("KEY_SEARCH_TERM"),q,{sync:!0})),"search"===t&&r&&window.gHost&&o.publish(i("EVT_QUERY_SEARCH_RESULTS"),!0),t&&!j[f]||(m=o.get(i("KEY_TOPIC_IN_IFRAME")),f in j&&(s=j[f]),null==s&&(s=m),s||(s=null!=(p=window.gDefaultTopic)?p.substring(1):void 0),b=s&&(s!==m||n!==t||k[c]!==j[c]||k[e]!==j[e]),b&&(h.stripBookmark(s)!==h.stripBookmark(m)&&h.runTopicLoadingAnimation(!0),o.publish(i("KEY_TOPIC_IN_IFRAME"),s),window.loadTopic(l(j,s)))),o.publish(i("KEY_UI_MODE"),j[g])},t=function(a){var b,c,d,e;if(c=h.hashParams(),a&&!c[g]&&(b=decodeURI(document.location.href),e=window._getRelativeFileName(b,a),d=c[f],!d||h.filePath(e)!==h.filePath(d)))return o.publish(i("KEY_TOPIC_IN_IFRAME"),e),s(e,!1)},p=function(a){var b,c,d,e,f;return f=a.absUrl,h.isRootUrl()?h.isUrlAllowdInIframe(f)?(f=h.makeRelativeUrl(h.fixRelativeUrl(f)),b=f&&h.filePath(f),b===i("START_FILEPATH")?f=f.substring(b.length):f||(f="#ux"),"#"===f[0]||"?"===f[0]?(c=h.hashParams(h.extractHashString(f)),g in c||(c[g]=null),q(c,!0)):f?s(f,!0):void 0):r(f,!0):(h.isRootUrl(f)||(e=h.getRootUrl(),d=h.isExternalUrl(f)?f:h.fixRelativeUrl(h.makeRelativePath(f,e)),f=e+"#t="+encodeURIComponent(d)),document.location.href=f)},o.subscribe(i("EVT_WIDGET_LOADED"),function(){return h.addEventListener(document,"click",h.hookClick),o.subscribe(i("EVT_HASH_CHANGE"),m),o.subscribe(i("KEY_TOPIC_URL"),t),o.subscribe(i("EVT_NAVIGATE_TO_URL"),p),o.subscribe(i("KEY_TOPIC_IN_IFRAME"),function(a){if(""+window.gHost+window.gHostPath!="/"&&(window.setTopic&&window.setTopic(),window.changeTopicLink))return window.changeTopicLink(document.location.toString())}),o.subscribe(i("EVT_TOPIC_LOADED"),function(){return h.runTopicLoadingAnimation(!1)}),o.subscribe(i("EVT_INSIDE_IFRAME_DOM_CONTENTLOADED"),function(){return h.runTopicLoadingAnimation(!1)})})}.call(this),function(){var a,b,c,d,rh,e,f;rh=window.rh,b=rh._,a=rh.$,c=rh.consts,d=rh.model,e=rh.rhs,f=null,f=d.subscribe(c("KEY_TAG_EXPRESSION"),function(){var a;return a=!1,function(){if(f&&f(),!a)return a=!0,d.subscribe(c("KEY_SEARCHED_TERM"),function(){return d.publish(c("KEY_ONSEARCH_TAG_EXPR"),JSON.stringify(d.get(c("KEY_TAG_EXPRESSION"))))})}}()),d.subscribe(c("EVT_SEARCH_TERM"),function(){var a,e,f;return a=d.get(c("KEY_CAN_HANDLE_SEARCH")),f=d.get(c("KEY_SEARCH_TERM"))||null,e={},e[c("HASH_KEY_RH_SEARCH")]=f,e[c("HASH_KEY_UIMODE")]="search",a!==!0?document.location=window.gRootRelPath+"/"+(window.gSearchPageFilePath||c("START_FILEPATH"))+("?#"+b.mapToEncodedString(e)):(d.publish(c("EVT_QUERY_SEARCH_RESULTS"),!0),b.defer(function(){return b.updateHashMap(e,!0)}))}),d.subscribe(c("EVT_PROJECT_LOADED"),function(){return window.readSetting&&window.readSetting(RHANDSEARCH,function(a){return d.publish(c("KEY_AND_SEARCH"),a)}),d.subscribe(c("KEY_AND_SEARCH"),function(a){return saveSetting(RHANDSEARCH,"1"===a?"1":"0",!0)})}),d.subscribe(c("EVT_QUERY_SEARCH_RESULTS"),function(){if(!e.doSearch())return window.doSearch()})}.call(this),function(){var a,b,c,rh;rh=window.rh,b=rh._,a=rh.$,c=rh.consts,rh.model.subscribe(c("EVT_WIDGET_BEFORELOAD"),function(){var b;if(null!==a("a.wShow",0))return b=a(".contenttopic",0),a.setAttribute(b,"data-rhwidget","Basic"),a.setAttribute(b,"data-class","govt_csh:@.l.csh_mode;govt_nocsh:!@.l.csh_mode")})}.call(this),function(){var a,b,c,d,rh,e=function(a,b){return function(){return a.apply(b,arguments)}};rh=window.rh,c=rh._,a=rh.$,d=rh.consts,b=function(){function b(a){this.widget=a,this.click=e(this.click,this)}var f,g,h;return f="group",g="item",h=d("KEY_PROJECT_FILTER_TYPE"),b.prototype.click=function(a){var b,e,f,g,h;return h=a.currentTarget,b=a.target,e=this.getItemNode(b,h),g=""+d("KEY_PROJECT_TAG_STATES")+this.getItemKey(e),f=this.widget.get(g),"radio"!==this.filterType()?this.handleCheckboxClick(e,g,f):this.handleRadioClick(e,g,f),c.preventDefault(a)},b.prototype.handleRadioClick=function(a,b,d){var e,f,g,h;if(!this.isGroupNode(a)&&!d)return h=c.splitKey(b),g=h.parentKey,e=h.key,f={},f[e]=this.getItemValue(a),this.widget.publish(g,f)},b.prototype.handleCheckboxClick=function(a,b,d){var e,f;return this.isGroupNode(a)?(e=c.any(d,function(a){return a}),f=e?void 0:this.getGroupItemExprs(a),this.widget.publish(b,f)):(f=d?void 0:this.getItemValue(a),this.widget.publish(b,f))},b.prototype.getItemNode=function(b,d){return c.findParentNode(b,d,function(b){return"LI"===a.nodeName(b)})},b.prototype.getItemValue=function(b){return a.dataset(b,"itemvalue")},b.prototype.getGroupItemExprs=function(b){var d,e;return e=a.dataset(b,"itemkey"),d=this.widget.get(""+this.widget.key+e),c.map(d.children,function(a){return a.name})},b.prototype.getItemKey=function(b){return a.dataset(b,"itemkey")},b.prototype.isGroupNode=function(b){return a.hasClass(b,f)},b.prototype.isItemNode=function(b){return a.hasClass(b,g)},b.prototype["class"]=function(a){return a.children?f:g},b.prototype.value=function(a){return a.children?null:a.name},b.prototype.filterType=function(){return this.widget.get(h)||"checkbox"},b.prototype.inputType=function(a){var b;return b=this.filterType(),a.children&&"radio"===b&&(b=void 0),b},b}(),rh.controller("FilterController",b)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}};a=function(){function a(a){this.widget=a,this.triggerDelayLoadWidgets=b(this.triggerDelayLoadWidgets,this),this.init(),this.subscribeActiveTab(),this.subscribeToLocations(),this.subscribeScreens(),this.widget.subscribe(p("EVT_PROJECT_LOADED"),function(a){return function(){return a.subscribeUIMode(),a.subscribeMergedFilter(),a.subscribeTopicClick(),a.subscribeTopicScroll(),a.subscribForSearchResult(),a.subscribeTopicNavigate(),a.subscribeToDelayLoadEvents(),a.widget.publish(p("KEY_IFRAME_EVENTS"),{click:!0,scroll:!1})}}(this))}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,rh,r,s;return rh=window.rh,o=rh._,c=rh.$,p=rh.consts,f=p("KEY_FEATURE"),g=p("KEY_FILTER_LOCATION"),i=p("KEY_SEARCH_LOCATION"),e=p("KEY_ACTIVE_TAB"),k=p("KEY_UI_MODE"),h=p("KEY_MOBILE_TOC_DRILL_DOWN"),j=p("KEY_TOC_DRILL_DOWN"),d="desktop",n="tablet",l="phone",m="filter"!==rh._params.hideUI,s={desktop:["toc","idx","glo","filter","fts"],tablet:["toc","idx","glo","filter","fts"],phone:["toc","idx","glo","filter","fts"]},r={desktop:["toc","idx","glo","filter","fts"],tablet:["toc","idx","glo","filter","fts"],phone:["toc","idx","glo"]},q={idx:{evt:"EVT_LOAD_IDX",f_key:"delay_load_idx"},glo:{evt:"EVT_LOAD_GLO",f_key:"delay_load_glo"}},a.prototype.init=function(){return this.screens=this.widget.get(p("KEY_SCREEN_NAMES")),rh.storage.init(p("HELP_ID")),this.activeScreen=o.find(this.screens,function(a){return this.widget.get(p("KEY_SCREEN")+"."+a+".attached")},this),null==this.activeScreen&&(this.activeScreen=this.widget.get(p("KEY_DEFAULT_SCREEN"))),this.assureLocations(this.activeScreen),this.initDefauls(),this.initActiveTab()},a.prototype.initDefauls=function(){var a;return a=this.widget.get(p("KEY_DEFAULT_TAB")),this.hasFeature(a)||(a=null),this.defaultTabs={},o.each(this.screens,function(b){return s[b]=o.filter(s[b],function(a){return this.hasFeature(a)},this),r[b]=o.filter(r[b],function(a){return this.hasFeature(a)},this),this.defaultTabs[b]=a&&-1!==s[b].indexOf(a)?a:s[b][0]},this)},a.prototype.initActiveTab=function(){var a;if(a=rh.storage.fetch("activetab"),void 0!==a&&a&&this.hasFeature(a))return this.widget.publish(e,a)},a.prototype.isValidTab=function(a,b){return null==b&&(b=this.activeScreen),!(!a||!this.hasFeature(a))&&((b!==d||!("filter"===a&&"content"===this.widget.get(g)||"fts"===a&&"content"===this.widget.get(i)))&&-1!==s[b].indexOf(a))},a.prototype.defaultTab=function(a){var b;return null==a&&(a=this.activeScreen),b=this.defaultTabs[a],this.isValidTab(b)||(b=o.find(s[a],function(a){return this.isValidTab(a)},this)),b},a.prototype.assureValidActiveTab=function(a){var b;if(null==a&&(a=this.activeScreen),b=this.widget.get(e),a===d||b)return this.isValidTab(b)||(b=this.defaultTab()),this.widget.publish(e,b)},a.prototype.toggleSideBar=function(){return this.widget.get(e)?this.widget.publish(e,null):this.widget.publish(e,this.lastMobileTab||this.defaultTab())},a.prototype.toggleActiveTab=function(a){return this.widget.publish(e,this.isDesktopScreen()||a!==this.widget.get(e)?a:null)},a.prototype.triggerDelayLoadWidgets=function(a){var b;if(b=q[a],b&&this.hasFeature(b.f_key))return this.widget.publish(p(b.evt),!0)},a.prototype.subscribeToDelayLoadEvents=function(){return this.widget.subscribe(e,this.triggerDelayLoadWidgets)},a.prototype.filterDone=function(){return this.widget.publish(e,this.searchMode?"fts":null)},a.prototype.hasFeature=function(a){return void 0===a||!1!==this.widget.get(f+"."+a)},a.prototype.subscribeUIMode=function(){var a;if(a=function(a){return function(){if(a.isValidTab("fts"))return a.isDesktopScreen()&&"tabbar"!==a.widget.get(i)?void 0:a.widget.publish(e,"fts")}}(this),this.widget.subscribe(k,function(a){return function(b){return a.widget.publish("active_content",b)}}(this)),this.widget.subscribe("active_content",function(b){return function(c){return b.isMobileScreen()&&!c?b.widget.publish(e,null):"search"===c?a():void 0}}(this),{initDone:!0}),"search"===this.widget.get("active_content"))return a()},a.prototype.subscribeMergedFilter=function(){var a;if(this.widget.get(a=f+".filter"))return this.widget.subscribe(p("KEY_MERGED_FILTER_KEY"),function(b){return function(c){return b.widget.publish(a,!!(c&&c.length&&m)),b.assureValidActiveTab()}}(this))},a.prototype.subscribeTopicClick=function(){return this.widget.subscribe(p("EVT_CLICK_INSIDE_IFRAME"),function(a){return function(){if(a.activeScreen===l&&a.widget.get(e))return a.toggleSideBar()}}(this))},a.prototype.subscribeTopicNavigate=function(){return this.widget.subscribe(p("EVT_NAVIGATE_TO_URL"),function(a){return function(b){if(b.absUrl&&o.isUrlAllowdInIframe(b.absUrl))return a.widget.publish("active_content",null)}}(this))},a.prototype.subscribeTopicScroll=function(){return this.widget.subscribe(p("EVT_SCROLL_INSIDE_IFRAME"),function(a){return function(b){var c,d;return c="down"===b.dir||b.scrollTop>10,a.widget.publish("hide_header",c),d="down"===b.dir&&b.scrollTop>10,a.widget.publish("hide_mobile_functions",d)}}(this))},a.prototype.subscribeActiveTab=function(){return this.widget.subscribe(e,function(a){return function(b){return rh.storage.persist("activetab",b),a.isMobileScreen()?(a.isSidebarTab(b)&&(a.lastMobileTab=b),a.searchMode="fts"===b||a.searchMode&&"filter"===b):a.searchMode=!1}}(this))},a.prototype.subscribeScreens=function(){return o.each(this.screens,function(a){var b;return b=p("KEY_SCREEN")+"."+a+".attached",this.widget.get(b)&&this.handleScreen(!0,a),this.widget.subscribe(b,function(b){return function(c){return b.handleScreen(c,a)}}(this),{initDone:!0})},this)},a.prototype.subscribeToLocations=function(){return this.widget.subscribe(i,function(a){return function(){return a.assureValidActiveTab(a.activeScreen)}}(this)),this.widget.subscribe(g,function(a){return function(){return a.assureValidActiveTab(a.activeScreen)}}(this))},a.prototype.subscribForSearchResult=function(){var a;return a=function(a){return function(){var b,c;if(c=a.widget.get(p("KEY_TAG_EXPRESSION")),b=a.widget.get(p("KEY_ONSEARCH_TAG_EXPR")),b&&b!==JSON.stringify(c))return a.widget.publish(p("EVT_SEARCH_TERM"),!0)}}(this),this.widget.subscribe(p("KEY_TAG_EXPRESSION"),o.debounce(function(b){return function(){if(!b.isValidTab("fts")||"fts"===b.widget.get(e))return a()}}(this),300)),this.widget.subscribe(e,function(b){if("fts"===b)return a()})},a.prototype.isMobileScreen=function(){return this.activeScreen===l},a.prototype.isDesktopScreen=function(){return this.activeScreen===d},a.prototype.isTabletScreen=function(){return this.activeScreen===n},a.prototype.isSidebarTab=function(a){return a&&-1!==r[this.activeScreen].indexOf(a)},a.prototype.isSearchMode=function(a){var b;return b=this.widget.get("active_content"),"fts"===a||"search"===b&&this.isDesktopScreen()&&"content"===this.widget.get(i)},a.prototype.handleScreen=function(a,b){return a?(this.activeScreen=b,this.handleAttached(b)):this.handleDetached(b)},a.prototype.handleDetached=function(a){return o.defer(function(b){return function(){if(a===d)return b.widget.publish(e,"search"===b.widget.get("active_content")&&b.isValidTab("fts")?"fts":null)}}(this))},a.prototype.handleAttached=function(a){return this.assureLocations(a),this.assureValidActiveTab(a),this.assureTOCMode(a)},a.prototype.assureLocations=function(a){return null==a&&(a=this.activeScreen),this.widget.publish(i,a===d?this.widget.get(p("KEY_DEFAULT_SEARCH_LOCATION")):a===n?"tabbar":"content"),this.widget.publish(g,a===d||a===n?"tabbar":"content")},a.prototype.assureTOCMode=function(a){return null==a&&(a=this.activeScreen),this.widget.publish(j,a!==d&&this.widget.get(h))},a.prototype.newSearch=function(a,b,c){var d;if(13===b&&(d=this.widget.get(p("KEY_SEARCH_TERM")),d!==a&&this.widget.publish(p("KEY_SEARCH_TERM"),a),this.widget.publish(p("EVT_SEARCH_TERM"),!0),null!=c?c.target:void 0))return c.target.blur()},a.prototype.isTagStatesChanged=function(){var a,b;return a=o.compactObject(this.widget.get(p("KEY_PROJECT_TAG_STATES"))),b=o.compactObject(this.widget.get(p("KEY_DEFAULT_FILTER"))),!o.isEqual(a,b)},a.prototype.setDefaultTagStates=function(){var a;return a=this.widget.get(p("KEY_DEFAULT_FILTER")),this.widget.publish(p("KEY_PROJECT_TAG_STATES"),o.clone(a))},a}(),window.rh.controller("ModernLayoutController",a)}.call(this),function(){var a;a=function(){function a(a,d){var e;e=(null!=d?d.removeClasses:void 0)||["hide-children","loading"],c.each(e,function(c){return b.removeClass(a.node,c)}),c.each(null!=d?d.addClasses:void 0,function(c){return b.addClass(a.node,c)})}var b,c,rh;return rh=window.rh,b=rh.$,c=rh._,a}(),window.rh.controller("JsLoadingController",a)}.call(this),function(){var a,b,c,d,e,f,rh,g,h,i=function(a,b){return function(){return a.apply(b,arguments)}},j=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},k={}.hasOwnProperty;rh=window.rh,f=rh.model,c=rh._,d=rh.consts,e=rh.http,g=rh.rhs,h="topics",b=function(){function a(){this.updateData=i(this.updateData,this)}return a.prototype.lookup=function(a,b){var d,e,f,g;if(null!=a&&null!=b)for(f=0,g=a.length;f<g&&(d=a[f],null==d||(b.type===d.type&&b.name===d.name&&c.isEqual(b.url,d.url)&&c.isEqual(b[h],d[h])&&(e=d),null==e));f++);return e},a.prototype.sort=function(a){return a.sort(function(a,b){return window.compare(a.name,b.name)})},a.prototype.updateData=function(a,b){var c;if(c=f.get(d("KEY_TEMP_DATA"))||[],f.publish(d("KEY_TEMP_DATA")),this.addElement(c,this.data,b,this.keys),0===--this.chunkCount&&0===this.count)return this.sort(this.data),f.publish(d(a),this.data)},a.prototype.getChunkData=function(a,b){var e,g;return this.count--,e=(null!=(g=f.get(d("KEY_TEMP_DATA")))?g.chunkinfos:void 0)||[],this.chunkCount+=e.length,c.each(e,function(d){return a&&(a=c.ensureSlash(a)),c.loadScript(a+"whxdata/"+d.node+".new.js",!1,function(c){return function(){return c.updateData(b,a)}}(this))},this)},a.prototype.loadNavData=function(a){return f.subscribe(d("KEY_PROJECT_LIST"),function(b){return function(d){return b.alhpabet="",b.count+=d.length,c.each(d,function(b){return b&&(b=c.ensureSlash(b)),c.loadScript(b+"whxdata/"+("ndx"===a?"idx":"glo")+".new.js",!1,function(c){return function(){return c.getChunkData(b,"ndx"===a?"PROJECT_INDEX_DATA":"PROJECT_GLOSSARY_DATA")}}(this))},b)}}(this))},a}(),rh.NavController=b,a=function(a){function b(){this.data=[],this.chunkCount=0,this.count=0,this.alhpabet="",this.filter="",this.keys="keys",f.subscribeOnce(d("EVT_PROJECT_LOADED"),function(a){return function(){return a.loadNavData("ndx"),a.getIndexData(),f.subscribe(d("KEY_INDEX_FILTER"),function(){return a.alhpabet="",f.publish(d("PROJECT_INDEX_DATA"),f.get(d("PROJECT_INDEX_DATA")))})}}(this))}var i;return j(b,a),i="",b.prototype.addElement=function(a,b,d,e){var f,g,j,k,l,m,n,o;if(null!=a[e]){for(m=a[e],o=[],j=0,k=m.length;j<k;j++)f=m[j],null!=f&&((g=this.lookup(b,f))||(l={type:f.type,name:f.name},f["data-rhtags"]&&(l["data-rhtags"]=f["data-rhtags"]+"+"+d),f.url||(l[h]=[]),n=c.makeRelativeUrl(""+d,i),null!=f.url&&(l.url=""+encodeURI(n)+f.url),null==f.url&&(l[this.keys]=[]),b.push(l),g=b[b.length-1]),this.addElement(f,g[this.keys],d,this.keys),o.push(this.addElement(f,g[h],d,h)));return o}},b.prototype.showItem=function(a){var b;return b=f.get(d("KEY_INDEX_FILTER")),!b||a.toLocaleLowerCase().indexOf(b.toLocaleLowerCase())!==-1},b.prototype.showCategory=function(a,b){var c;return!(b>0)&&(c=this.alphaText(a),!(this.alhpabet.indexOf(c)>-1)&&(this.alhpabet+=c,!0))},b.prototype.alphaText=function(a){return a.toUpperCase().charAt(0)},b.prototype.getIndexData=function(){return f.subscribeOnce(d("KEY_PUBLISH_BASE_URL"),function(){var a,b,h,i,j,k;try{if(b=f.get(d("KEY_PUBLISH_BASE_URL")),j=document.location.origin,a=b.substr(j.length),k=c.parentPath(c.filePath(c.getRootUrl())),a&&!c.isEmptyString(a))return i=c.mapToEncodedString(c.extend({area:g.area(),prj:g.project(),type:g.type(),agt:"ndx",mgr:"agm"})),e.get(a+"?"+i).success(function(a,b){var e,g,h,i,j;a=JSON.parse(a),e=[],j=[],i=a.allProjects,h=a.masterProjects,i.length&&(i[0]=c.ensureSlash(i[0])),g=function(a,b){return c.each(a,function(a){return b.push(c.makeRelativeUrl(a,i[0]))})},g(i,e),g(h,j);var k=function(a,b,d){c.isEmptyString(a)&&(d[b]=".")};return c.each(e,k),c.each(j,k),f.publish(d("KEY_PROJECT_LIST"),e),f.publish(d("KEY_MASTER_PROJECT_LIST"),j)})}catch(l){if(h=l,rh._debug)return rh._d("warn",h.message)}})},b}(rh.NavController),rh.controller("IndexController",a)}.call(this),function(){var a,b,c,d,e,rh,f=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g={}.hasOwnProperty;rh=window.rh,e=rh.model,b=rh._,c=rh.consts,d=rh.http,a=function(a){function b(){this.data=[],this.chunkCount=0,this.count=0,this.keys="",this.alhpabet="",this.loadNavData("glo"),this.filter=""}var d;return f(b,a),d="entrys",b.prototype.addElement=function(a,b){var c,e,f,g,h;for(g=a[d],h=[],e=0,f=g.length;e<f;e++)c=g[e],null!=c&&(this.lookup(b,c)?h.push(void 0):h.push(b.push(c)));return h},b.prototype.exists=function(a){var b;return b=this.alphaText(a),this.alhpabet.indexOf(b)>-1||(this.alhpabet+=b,!1)},b.prototype.isFiltered=function(a){return this.filter&&a.toLocaleLowerCase().indexOf(this.filter)===-1},b.prototype.alphaText=function(a){return a.toUpperCase().charAt(0)},b.prototype.filterGlo=function(a){return this.filter=a.toLocaleLowerCase(),this.alhpabet="",e.publish(c("PROJECT_GLOSSARY_DATA"),e.get(c("PROJECT_GLOSSARY_DATA")))},b}(rh.NavController),rh.controller("GlossaryController",a)}.call(this),function(){var a,b,c,d,e,rh,f;rh=window.rh,e=rh.model,b=rh._,c=rh.consts,d=rh.http,f=rh.rhs,new(a=function(){function a(){var a;a=3e3,e.subscribeOnce(c("EVT_PROJECT_LOADED"),function(){return e.subscribeOnce(c("KEY_PUBLISH_MODE"),function(f){var h,i,j;if(f)return j=j||g(),h=[],i=b.debounce(function(){return d.post(j,JSON.stringify(h)).error(function(a,b){if(rh._debug)return rh._d("error","Filter report status ",b)})},a,!1),e.subscribe(c("KEY_TAG_EXPRESSION"),function(a){var b,d,e,f,g,j,k,l,m;for(h=[],b=rh.model.get(c("KEY_MERGED_FILTER_KEY")),d=0,f=a.length;d<f;d++)for(m=a[d],j=m.c,e=0,g=j.length;e<g;e++)k=j[e],(l=rh.filterObject.lookup(b,k,!1))&&h.push(l.display);if(h.length>0)return i()})})})}var g;return g=function(){var a,d,g;if(g=document.location.origin,a=e.get(c("KEY_PUBLISH_BASE_URL")).substr(g.length),a&&!b.isEmptyString(a))return d=b.mapToEncodedString(b.extend({area:f.area(),prj:f.project(),type:f.type(),agt:"fltRpt",mgr:"agm"})),a+"?"+d},a}())}.call(this),function(){var a,b,c,d,rh;rh=window.rh,b=rh._,d=rh.model,c=rh.consts,a=function(){function a(){l.push("."),m.push("."),h()}var e,f,g,h,i,j,k,l,m;return l=[],m=[],k="projectdata.js",f="remote",e="project",g="url",j=0,i=function(a){var i;return i=a+"/"+k,window.xmlJsReader.loadFile(i,function(a,i){var k,n,o;if(k=0,j++,null!=a&&(n=a.getElementsByTagName(e)[0],o=n.getElementsByTagName(f),k=o.length),b.each(o,function(a){var b;return b=i+"/"+a.getAttribute(g),l.push(b),m.push(b)}),h(),0===m.length&&j===l.length)return d.publish(c("KEY_PROJECT_LIST"),l),d.publish(c("KEY_MASTER_PROJECT_LIST"),["."])},a)},h=function(){var a,b;for(b=[];m.length>0;)a=m.splice(0,1),b.push(i(a));return b},a}(),d.subscribe(c("EVT_PROJECT_LOADED"),function(){return b.defer(function(){if(!d.get(c("KEY_PUBLISH_MODE"))&&!window.gbPreviewMode)return new a})})}.call(this),function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function f(a,b,c){function d(g,h){if(!b[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(e)return e(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=b[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return d(c?c:b)},k,k.exports,f,a,b,c)}return b[g].exports}for(var e="function"==typeof require&&require,g=0;g<c.length;g++)d(c[g]);return d}({1:[function(a,b,c){var rh=a("../../src/lib/rh"),e=(rh._,function f(a){d(this,f),this.widget=a});rh.controller("TocBreadcrumbsController",e)},{"../../src/lib/rh":4}],2:[function(a,b,c){var f=function(a,b){return function(){return a.apply(b,arguments)}},rh=a("../../src/lib/rh"),g=rh._,h=rh.$,i=rh.model,j=rh.consts,k=j("KEY_TOC_DRILL_DOWN"),l=700,m=void 0,n=void 0;m=function(){var a=function(){function a(){d(this,a)}return e(a,[{key:"sync",value:function(a,b){var c=void 0;return a.updateActiveBookInfo(0,"_"),c=a.widget.node,this.reset(b),this.syncToProjectToc(a,c.children,function(b){return function(c){return b.syncToTocItem(a,c)}}(this))}},{key:"reset",value:function(a){var b=void 0;return this.parseTocInfo(a),b=this.order.lastIndexOf("@"),this.parentOrder=b!==-1?this.order.substring(0,b):""}},{key:"parseTocInfo",value:function(a){var b=void 0;return this.order=a.childOrder||"",b=g.splitAndTrim(a.childPrefix,"."),this.tocPath=g.reduce(b,function(a,b){var c=void 0,d=void 0;return c=g.splitAndTrim(b,"@"),(d=c.shift())&&a.push({bookNo:g.parseInt(d,0),order:c.length>0?"@"+c.join("@"):""}),a},[]),b=g.splitAndTrim(a.topicID||"0","_"),this.bookNos=g.map(b.shift().split("."),function(a){return g.parseInt(a,0)}),this.pageNo=g.parseInt(b.shift(),0)}},{key:"syncToProjectToc",value:function(a,b,c){var d=void 0,e=void 0,f=void 0;if(this.tocPath.length>0){if(d=0,f=this.tocPath.shift(),e=g.findIndex(b,function(b){var c=void 0;return c=h.dataset(b,"childorder")||"",!(c!==f.order||!a.isBookNode(b)||(d++,d!==f.bookNo))}),e!==-1)return a.openBook(b[e],!0,function(d){return function(){return g.defer(function(){var f=void 0,g=void 0;if(f=b[e+1],g=f.children&&f.children[0])return d.syncToProjectToc(a,g.children,c)})}}(this))}else if(c)return c(b)}},{key:"syncToTocItem",
value:function(a,b,c){var d=void 0,e=void 0,f=void 0;return null==c&&(c=1),e=0,d=0,f=null,g.any(b,function(b){return function(i){var j=void 0,k=void 0,m=void 0,n=void 0,o=void 0;if(k=h.dataset(i,"childorder")||"",k===b.order&&(a.isBookNode(i)&&(j=i,f=j),j&&d++,b.bookNos[0]===d)){if(a.isPageNode(i)&&(n=i),n&&e++,1===b.bookNos.length)0===b.pageNo?(o=i,f&&a.openBook(f,!0,function(){return a.updateBookInfo()})):n&&e===b.pageNo&&(o=i),a.updateBookInfo(),o&&a.selectLink(o,!0,c);else if(f&&(m=h.hasClass(i,"child")))return b.bookNos.shift(),a.openBook(f,!0,function(){return g.defer(function(){var c=void 0;if(c=i.children&&i.children[0])return b.syncToTocItem(a,c.children,l)})}),!0;return null!=o}}}(this))}}]),a}();return a}(),n=function(){var a=void 0,b=void 0,c=void 0,n=void 0,o=void 0,p=void 0,q=void 0,r=void 0,s=void 0,t=void 0,u=void 0,v=void 0;c="expanded",a="active",b="collapsing",n="expanding",u="loading-book",v="selected",s="show_child",q="bookid",o="active_bookid",r="level",p="active_level",t=".p.toc";var w=function(){function w(a){d(this,w),this.widget=a,this.subscribeTopicID=f(this.subscribeTopicID,this),this.onClick=f(this.onClick,this),this.updateBookInfo=f(this.updateBookInfo,this),this._data={},this.projectAbsRef=[],null==this.syncToc&&(this.syncToc=new m),this.widget.publish(r,0),this.widget.publish(q,"_"),i.subscribeOnce(j("EVT_PROJECT_LOADED"),function(a){return function(){return i.get(j("KEY_PUBLISH_MODE"))?a.getTOCData():a.loadToc(t,"",function(){return a.widget.publish(j("EVT_TOC_LOADED"),!0),a.widget.subscribe(rh.consts("KEY_TOPIC_ID"),a.subscribeTopicID)})}}(this))}return e(w,[{key:"updateBookInfo",value:function(){var a=void 0,b=void 0;if(a=this.widget.get(o),null!=a&&a!==this.widget.get(q)&&this.widget.publish(q,a),b=this.widget.get(p),null!=b&&b!==this.widget.get(r))return this.widget.publish(r,b)}},{key:"updateActiveBookInfo",value:function(a,b){return this.widget.publish(o,b),this.widget.publish(p,a)}},{key:"nextLevel",value:function(a){var b=void 0;return b=g.parseInt(h.dataset(a,"itemlevel"),0),h.hasClass(a,c)?b:b+1}},{key:"onClick",value:function(a){var b=void 0,c=void 0,d=void 0,e=void 0;if(e=a.currentTarget,b=a.target,c=this.hasLink(b),d=this.getItemNode(b,e),this.isBookNode(d)&&(c&&this.selectedNode!==d&&this.isOpenBook(d)||this.toggleBook(d,!1)),!(!c||this.isUrlNode(d)&&this.hasExternalLink(b)))return this.selectLink(d,!1)}},{key:"selectLink",value:function(a,b,c){if(null==c&&(c=l),this.selectedNode&&h.removeClass(this.selectedNode,v),b&&this.selectedNode!==a&&g.delay(function(){return a.scrollIntoView(!1)},c),this.selectedNode=a,a)return h.addClass(a,v)}},{key:"getItemNode",value:function(a,b){return g.findParentNode(a,b,function(a){return"LI"===h.nodeName(a)})}},{key:"hasLink",value:function(a){var b=void 0;return b=h.getAttribute(a,"href"),b&&"#"!==b}},{key:"isBookNode",value:function(a){return h.hasClass(a,"book")}},{key:"isTopicNode",value:function(a){return h.hasClass(a,"item")}},{key:"isUrlNode",value:function(a){return h.hasClass(a,"url")}},{key:"isPageNode",value:function(a){return this.isTopicNode(a)||this.isUrlNode(a)}},{key:"isOpenBook",value:function(b){return this.widget.get(k)?h.hasClass(b,a):h.hasClass(b,c)}},{key:"hasExternalLink",value:function(a){var b=void 0;return b=h.getAttribute(a,"href"),!(!b||g.isRelativeUrl(b))&&!g.isUrlAllowdInIframe(b)}},{key:"getBookNode",value:function(a,b){var c=void 0;return c=this.getItemNode(a,b),this.isBookNode(c)?c:null}},{key:"animateCollapse",value:function(a){return g.each([a,a.nextElementSibling],function(a){return h.addClass(a,b),g.delay(function(){return h.removeClass(a,b)},l)})}},{key:"animateExpand",value:function(a){return g.each([a,a.nextElementSibling],function(a){return h.addClass(a,n),g.delay(function(){return h.removeClass(a,n)},l)})}},{key:"toggleBook",value:function(a,b){return null==b&&(b=!0),this.isOpenBook(a)?this.closeBook(a):this.openBook(a,b)}},{key:"closeBook",value:function(a){var b=void 0,d=void 0;if(b=h.dataset(a,"itemid"),d=""+s+b,!1!==this.widget.get(d)&&this.widget.publish(d,!1),this.updateActiveBookInfo(this.nextLevel(a),this.pid(b)),this.updateBookInfo(),h.hasClass(a,c))return h.removeClass(a,c),this.animateCollapse(a)}},{key:"openBook",value:function(a,b,d){var e=void 0,f=void 0,g=void 0,i=void 0;return null==d&&(d=this.updateBookInfo),g=h.dataset(a,"itemkey"),f=h.dataset(a,"itemid"),e=h.dataset(a,"childorder"),i=""+s+f,!0!==this.widget.get(i)&&this.widget.publish(i,!0),this.updateActiveBookInfo(this.nextLevel(a),f),this.widget.get(g)?(h.hasClass(a,c)||(h.addClass(a,c),this.animateExpand(a)),d()):(h.addClass(a,u),b&&a.scrollIntoView(!1),this.loadToc(g,e,function(b){return function(){return h.removeClass(a,u),h.addClass(a,c),b.animateExpand(a),d()}}(this)))}},{key:"extractTempData",value:function(){var a=void 0;return a=this.widget.get(rh.consts("KEY_TEMP_DATA")),this.widget.publish(rh.consts("KEY_TEMP_DATA")),a}},{key:"loadToc",value:function(a,b,c){var d=void 0,e=void 0,f=void 0,h=void 0;return h=this.parseKey(a),d=h.absRef,e=h.key,f=d?d+"/":"",g.loadScript(f+"whxdata/"+e+".new.js",!0,function(e){return function(){var f=void 0;return f=e.extractTempData()||[],g.each(f,function(a){if(a.absRef=d,b)return a.childOrder=b}),e.loadRefToc(f,e.childOrder(b),function(b){if(e.widget.publish(a,b),c)return c()})}}(this))}},{key:"loadRefToc",value:function(a,b,c){var d=void 0,e=void 0,f=void 0;return null==a&&(a=[]),e=g.findIndex(a,function(a){if(a.ref)return!0}),e!==-1?(f=a[e],d=f.absRef||"",d&&(d+="/"),d+=f.ref,g.loadScript(d+"/whxdata/toc.new.js",!0,function(f){return function(){var h=void 0;return h=f.extractTempData()||[],g.each(h,function(a){if(a.absRef=d,b)return a.childOrder=b}),Array.prototype.splice.apply(a,[e,1].concat(h)),f.loadRefToc(a,f.nextChildOrder(b),c)}}(this))):c?c(a):void 0}},{key:"getTOCData",value:function(){return i.subscribeOnce(j("KEY_PUBLISH_BASE_URL"),function(a){return function(){var b;try{return i.subscribe(j("KEY_PROJECT_LIST"),function(b){return i.subscribe(j("KEY_MASTER_PROJECT_LIST"),function(c){var d,e;return e=c.length,d=[],g.each(c,function(a){return a=g.makeRelativeUrl(a,b[0]),a&&(a+="/"),g.loadScript(a+"whxdata/toc.new.js",!0,function(b){return function(){var c;return c=b.extractTempData()||[],g.each(c,function(b){b.absRef=a}),b.loadRefToc(c,b.childOrder(""),function(a){if(e--,d=d.concat(a),0===e)return b.widget.publish(t,d),b.widget.publish(j("EVT_TOC_LOADED"),!0),b.widget.subscribe(rh.consts("KEY_TOPIC_ID"),b.subscribeTopicID)})}}(this))},a)})})}catch(c){if(b=c,rh._debug)return rh._d("warn",b.message)}}}(this))}},{key:"nextChildOrder",value:function(a){var b=void 0;return b=a.split("@"),b[b.length-1]=1+g.parseInt(b[b.length-1],0),b.join("@")}},{key:"childOrder",value:function(a){return a?a+"@1":"@1"}},{key:"pid",value:function(a){var b=void 0;return b=a.split("_"),b.pop(),b.join("_")||"_"}},{key:"key",value:function(a,b){var c=void 0;return null==a&&(a=""),c=g.findIndex(this.projectAbsRef,function(b){return b===a}),c===-1&&(c=this.projectAbsRef.length,this.projectAbsRef.push(a)),".p.child_toc."+c+"."+b}},{key:"parseKey",value:function(a){var b=void 0,c=void 0,d=void 0;return a=a.substring(3),c=a.split("."),d=c.pop(),b=this.projectAbsRef[c.pop()]||"",{key:d,absRef:b}}},{key:"url",value:function x(a,b){var c=void 0,d=void 0,e=void 0,f=void 0,x=void 0;return a.url?(f=a.absRef?g.ensureSlash(a.absRef):"",x=""+f+a.url,c=g.extractHashString(x),c.length>0&&(c="#"+c,d=g.filePath(x),e=g.extractParamString(x),e.length>0&&(e+="&"),e="?"+e+"rhtocid="+b,x=""+d+e+c),encodeURI(x)):"#"}},{key:"tags",value:function(a){var b=void 0;return b=a.absRef?"+"+a.absRef:"",a["data-rhtags"]?a["data-rhtags"]+b:""}},{key:"subscribeTopicID",value:function(a){var b=void 0,c=void 0;return null==a&&(a={}),(c=g.hashParams().rhtocid)?(b=this.getPathfromId(c),void this.selectTocById(b,this.widget.node)):this.syncToc.sync(this,a)}},{key:"subscribeBookId",value:function(a){var b=void 0,c=void 0;if(a)return c=this.getPathfromId(a),this.selectTocById(c,this.widget.node,null,b)}},{key:"getPathfromId",value:function(a){var b=void 0;return b=a.split("_"),b.shift(),b=g.map(b,function(a){return g.parseInt(a,0)})}},{key:"selectTocById",value:function(a,b,c,d){var e=void 0,f=void 0;if(null==c&&(c=1),b&&b.children&&(f=a.shift(),e=g.find(b.children,function(a){if(this.isBookNode(a)||this.isPageNode(a)){if(0===f)return!0;f--}return!1},this)))return 0===a.length&&this.selectLink(e,!0,c),this.isBookNode(e)?this.openBook(e,!0,function(b){return function(){return g.defer(function(){var c=void 0,d=void 0;return 0===a.length?b.updateBookInfo():(c=e.nextElementSibling,d=c.children&&c.children[0],b.selectTocById(a,d,l))})}}(this)):this.updateBookInfo()}}]),w}();return w.prototype["class"]=function(a){return"remoteitem"===a.type?"url":a.type},w}(),rh.controller("TocController",n)},{"../../src/lib/rh":4}],3:[function(a,b,c){var rh=a("./rh"),d=rh.consts;d("HOME_FILEPATH","index.htm"),d("RHMAPID","rhmapid"),d("EVT_TOPIC_WIDGET_LOADED",".e.topic_widget_loaded"),d("MAP_ADDR","whxdata/searchAuto_Map_"),d("MODEL_ADDR","whxdata/searchAuto_Model_"),d("SEARCH_MAX_TOPICS",20),d("PREV_SEARCH_KEY","prevSearchList"),d("SEARCH_RESULTS_KEY","search_results")},{"./rh":4}],4:[function(b,c,d){(function(a){c.exports=a.rh}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof a?a:{})},{}],5:[function(a,b,c){a("../lib/rh"),a("../lib/consts"),a("./layout/home_controller"),a("../../lenient_src/layout/toc_breadcrumbs_controller"),a("../../lenient_src/layout/toc_controller")},{"../../lenient_src/layout/toc_breadcrumbs_controller":1,"../../lenient_src/layout/toc_controller":2,"../lib/consts":3,"../lib/rh":4,"./layout/home_controller":6}],6:[function(a,b,c){var rh=a("../../lib/rh"),f=rh._,g=function(){function a(b){d(this,a),this.widget=b}return e(a,[{key:"goToHome",value:function(){f.goToHome()}}]),a}();rh.controller("HomeController",g)},{"../../lib/rh":4}]},{},[5])}(window,document,window.location);