<!DOCTYPE HTML>
<html>
<head><meta http-equiv="refresh" content="2;url=https://opensource.adobe.com/dc-acrobat-sdk-docs/acrobatsdk/" /><meta name="robots" content="noindex, nofollow">

 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
 <title>Handshake between Plug-in and Plug-in Broker</title>

 <meta name="generator" content="Adobe FrameMaker 2015" />
 <meta name="Originator" content="ImportMif" />
 <meta name="OriginalFile" content="C:\Users\Perforce\Work\Groups\SDK\main\Documents\Acrobat_SDK\Acrobat_12.0 - Nov 2015\docs_fm\Getting_Started\DevelopingForReader\Reader_SandboxBrokerExt.fm" />
 <link rel="stylesheet" href="Reader_SandboxBrokerExt.css" type="text/css" />


<script type="text/javascript" language="JavaScript">
//<![CDATA[
function reDo() {
  if (innerWidth != origWidth || innerHeight != origHeight)
     location.reload();
}
if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
	origWidth = innerWidth;
	origHeight = innerHeight;
	onresize = reDo;
}
onerror = null; 
//]]>
</script>
<style type="text/css">
<!--
div.WebHelpPopupMenu { position:absolute;
left:0px;
top:0px;
z-index:4;
visibility:hidden; }
p.WebHelpNavBar { text-align:right; }
-->
</style>

<script type="text/javascript" src="../../template/scripts/rh.min.js"></script>
<script type="text/javascript" src="../../template/scripts/common.min.js"></script>
<script type="text/javascript" src="../../template/scripts/topic.min.js"></script>
<script type="text/javascript" src="../../template/scripts/constants.js"></script>
<script type="text/javascript" src="../../template/scripts/utils.js"></script>
<script type="text/javascript" src="../../template/scripts/mhutils.js"></script>
<script type="text/javascript" src="../../template/scripts/mhlang.js"></script>
<script type="text/javascript" src="../../template/scripts/mhver.js"></script>
<script type="text/javascript" src="../../template/scripts/settings.js"></script>
<script type="text/javascript" src="../../template/scripts/XmlJsReader.js"></script>
<script type="text/javascript" src="../../template/scripts/loadparentdata.js"></script>
<script type="text/javascript" src="../../template/scripts/loadscreen.js"></script>
<script type="text/javascript" src="../../template/scripts/loadprojdata.js"></script>
<script type="text/javascript" src="../../template/scripts/mhtopic.js"></script>
 <link rel="stylesheet" type="text/css" href="../../template/styles/topic.min.css">
<script type="text/javascript" >
gRootRelPath = "../..";
gCommonRootRelPath = "../..";
gTopicId = "1.5.5.1_1";
</script>
 <meta name="brsprev" value="Acro12_MasterBook/Reader_SandboxBrokerExt/Components.htm">
 <meta name="brsnext" value="Acro12_MasterBook/Reader_SandboxBrokerExt/Implement_CrossCalls_make_calls_from_plug-in_to_plug-inâ€™s.htm">
 <meta name="topic-breadcrumbs" content="Introduction to SDK > Developing for Acrobat Reader > Sandbox Broker Extensibility" />
</head>

<body dir="ltr">
<script type="text/javascript" src="../../ehlpdhtm.js"></script>
<div dir="ltr">
  <h3>Handshake between Plug-in and Plug-in Broker</h3>
  <p class="BodyLevel1">These steps create the initial setup for the IPC channel between the Plugin and its Broker required to make the cross calls. The following sequence of steps takes place during the initial setup:</p>
  <p class="FM_StepReset"><span style="padding-left: 66pt;" class="FMAutoNumber_1"></span>1.<span style="padding-left: 2pt;" class="FMAutoNumber_2"></span>The plug-in provides a plug-in broker process placed at <span class="FM_Courier">Reader\plug_ins\pi_brokers</span>.</p>
  <p class="FM_Step"><span style="padding-left: 66pt;" class="FMAutoNumber_1"></span>2.<span style="padding-left: 2pt;" class="FMAutoNumber_2"></span>The plug-in sends a request via the <span class="FM_Courier">InitSandboxPIBrokerIPCChannel</span>&#160;call which in turn uses SandboxHFT call <span class="FM_Courier">SbxLaunchPIBrokerExe</span> to launch its piBroker process.</p>
  <p class="FM_Step"><span style="padding-left: 66pt;" class="FMAutoNumber_1"></span>3.<span style="padding-left: 2pt;" class="FMAutoNumber_2"></span>The broker process then validates the <span class="FM_Courier">piBroker</span> process name against a white list.</p>
  <p class="FM_Step"><span style="padding-left: 66pt;" class="FMAutoNumber_1"></span>4.<span style="padding-left: 2pt;" class="FMAutoNumber_2"></span>If the above validation succeeds, then the broker process launches the <span class="FM_Courier">piBroker</span>&#160;process. It then establishes the IPC channel using the <span class="FM_Courier">simple-ipc-lib</span>&#160;between <span class="FM_Courier">piBroker</span> process and plug-in.</p>
  <p class="FM_Step"><span style="padding-left: 66pt;" class="FMAutoNumber_1"></span>5.<span style="padding-left: 2pt;" class="FMAutoNumber_2"></span>If <span class="FM_Courier">InitSandboxPIBrokerIPCChannel</span>&#160;returns true then plug-in is now ready to make cross calls to the <span class="FM_Courier">piBroker</span> directly over the IPC channel to execute extended broker functionality.</p>
  <p class="BodyLevel1">Refer to the sample project to get started and for example code.</p>
  </div>
</body>
</html>