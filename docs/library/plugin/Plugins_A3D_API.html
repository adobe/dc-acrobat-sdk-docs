
<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Learn how to integrate PDF products and features in your apps with the Acrobat and PDFL APIs. Create apps that integrate with Adobe's enterprise-class product lineup."/>
  <meta name=viewport content="width=device-width, initial-scale=1">
  
  <title>Parsing and Creating PRC Files &mdash; Acrobat-PDFL SDK:  Plugin Development</title>
  

  
   <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link href="../../_static/jquery-ui.css" rel="stylesheet" />  
  <link href="../../_static/copybutton.css" rel="stylesheet" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />

    
  
  
  <link rel="canonical" href="https://www.adobe.com/go/acrobatsdk_homePlugins_A3D_API.html" />
  

  
  
  
  <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
  <script type="text/javascript" src="../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../_static/underscore.js"></script>
  <script type="text/javascript" src="../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../_static/language_data.js"></script>
  <script type="text/javascript" src="../../_static/searchtools.js"></script>
  <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
  <script type="text/javascript" src="../../_static/copybutton.js"></script>
  <script type="text/javascript" src="../../_static/js/theme.js"></script>
   
  
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Handling Exceptions" href="Plugins_Exceptions.html" />
    <link rel="prev" title="Working with 3D Annotations" href="Plugins_3D_samples.html" /> 
  
<script type='text/javascript'> window.marketingtech = { adobe: { launch: { property: "global", environment: "production" } }, };</script>
<script src="https://www.adobe.com/marketingtech/main.min.js"></script>

	<script>
    $(document).ready(function () {
      $(window).scroll(function () {
        if ($(this).scrollTop() >= 50) {
          $('.fixedbar, .wy-nav-side').addClass('scroll');
          $('.wy-top-menu-wrapper').fadeOut();
        } else {
          $('.fixedbar, .wy-nav-side').removeClass('scroll');
          $('.wy-top-menu-wrapper').fadeIn();
        }
      });
      $(window).scroll(function () {
        if ($(this).scrollTop() > 100) {
          $('#scroll').fadeIn();
        } else {
          $('#scroll').fadeOut();
        }
      });
      $('#scroll').click(function () {
        $("html, body").animate({ scrollTop: 0 }, 600);
        return false;
      });
    });
  </script>

<style>
  .wy-nav-content {max-width:90%}
  </style>
</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
	  
	  	  
<!-- @@@@@@@@@@@@@@@@ Custom @@@@@@@@@@@@@@@@ -->
        <div class="wy-logo-wrapper"> 
          <a href="https://www.adobe.com/go/dc_developer">
            <img src="../../_static/acrobaticon.png" class="logo"/> 
          Acrobat and PDFL Developer Guides
          </a>
        </div> 
 <!-- @@@@@@@@@@@@@@@@ Custom @@@@@@@@@@@@@@@@ -->
 
        <div class="wy-side-nav-search" >
          

          
            <a href="toc.html" class="icon icon-home"> Acrobat-PDFL SDK:  Plugin Development
          

          
          </a>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Acrobat-PDFL SDK: Developing Plugins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#about-plugins">About plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#about-the-acrobat-core-api">About the Acrobat core API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#acrobat-viewer-layer">Acrobat Viewer layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#portable-document-layer">Portable Document layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#acrobat-support-layer">Acrobat Support layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#cos-layer">Cos layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#platform-specific-methods">Platform-specific methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#acrobat-core-api-objects">Acrobat core API objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#file-object-interrelationships">File object interrelationships</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#document-object-interrelationships">Document object interrelationships</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#acrobat-core-api-methods">Acrobat core API methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#data-types">Data types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#scalar-types">Scalar types</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#simple-types">Simple types</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#complex-types">Complex types</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#opaque-types">Opaque types</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#cos-types">Cos types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#about-pdf-library-and-plugin-applications">About PDF Library and plugin applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#manipulating-acrobat-and-adobe-reader">Manipulating Acrobat and Adobe Reader</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#displaying-a-pdf-document-in-an-external-window">Displaying a PDF document in an external window</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#indexed-searching">Indexed searching</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#modifying-file-access">Modifying file access</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#creating-new-annotation-types">Creating new annotation types</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#dynamically-adding-text-to-pdf-documents">Dynamically adding text to PDF documents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#understanding-your-target-application">Understanding your target application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#rights-enabled-pdf-documents">Rights-enabled PDF documents</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#adobe-reader-plugins">Adobe Reader plugins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#registering-plugins-for-use-by-the-plugin-finder">Registering plugins for use by the plugin finder</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#pdf-dictionary-extensions">PDF dictionary extensions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Plugins_Pimech.html">Understanding Plugins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Pimech.html#about-plugin-initialization">Plugin loading and initialization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Pimech.html#handshaking">Handshaking</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Pimech.html#exporting-hfts">Exporting HFTs</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Pimech.html#importing-hfts-and-registering-for-notifications">Importing HFTs and registering for notifications</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Pimech.html#initialization">Initialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Pimech.html#unloading">Unloading</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Pimech.html#summarizing-a-plugin-s-life-cycle">Summarizing a plugin’s life cycle</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Pimech.html#using-callback-functions">Using callback functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Pimech.html#notifications">Notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Pimech.html#handling-events">Handling events</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Pimech.html#mouse-clicks">Mouse clicks</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Pimech.html#adjust-cursor">Adjust cursor</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Pimech.html#key-presses">Key presses</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Pimech.html#using-plugin-prefixes">Using plugin prefixes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Pimech.html#obtaining-a-developer-pdf-name-prefix">Obtaining a developer PDF name prefix</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Pimech.html#using-a-developer-prefix">Using a developer prefix</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Pimech.html#plugin-name">Plugin name</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Pimech.html#menu-prefixes">Menu prefixes</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Pimech.html#menu-items-prefixes">Menu items prefixes</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Pimech.html#tool-prefixes">Tool prefixes</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Pimech.html#toolbar-button-prefixes">Toolbar button prefixes</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Pimech.html#private-data-id-d-via-second-class-names">Private data ID’d via second-class names</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Pimech.html#action-prefixes">Action prefixes</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Pimech.html#annotation-prefixes">Annotation prefixes</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Pimech.html#hft-prefixes">HFT prefixes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Pimech.html#modifying-the-acrobat-or-adobe-reader-user-interface">Modifying the Acrobat or Adobe Reader user interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Pimech.html#adding-or-removing-menus-and-menu-items">Adding or removing menus and menu items</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Pimech.html#modifying-toolbars">Modifying toolbars</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Pimech.html#controlling-the-about-box-and-splash-screen">Controlling the About box and splash screen</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Pimech.html#creating-help-files">Creating help files</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Pimech.html#user-interface-guidelines">User interface guidelines</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Pimech.html#acquiring-and-releasing-objects">Acquiring and releasing objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Pimech.html#debugging-plugins">Debugging plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Pimech.html#page-view-layers">Page view layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Pimech.html#minimizing-screen-redrawing">Minimizing screen redrawing</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Pimech.html#storing-private-data-in-pdf-files">Storing private data in PDF files</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Pimech.html#exporting-data-from-pdf-document-objects">Exporting data from PDF document objects</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Plugins_CreatingSimplePlug.html">Creating Plugin and PDF Library Applications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#working-with-platform-specific-techniques">Working with platform-specific techniques</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#about-platform-dependent-data">About platform-dependent data</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#portability-techniques">Portability techniques</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#windows-techniques">Windows techniques</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#developing-windows-plugins">Developing Windows plugins</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#locating-and-loading-plugins">Locating and loading plugins</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#why-a-plugin-might-not-load">Why a plugin might not load</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#macros-and-project-settings">Macros and project settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#interapplication-communication">Interapplication communication</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#debugging">Debugging</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#handling-the-thread-local-storage-tls-limit">Handling the thread local storage (TLS) limit</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#using-modal-dialog-boxes">Using modal dialog boxes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#mac-os-techniques">Mac OS techniques</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#developing-a-mac-os-plugin">Developing a Mac OS plugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#using-the-samples">Using the samples</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#establishing-carbon-or-cocoa-compliance">Establishing Carbon or Cocoa compliance</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#xcode-configuration-files">Xcode configuration files</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#using-setgworld-rather-than-setport">Using SetGWorld rather than SetPort</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#locating-and-loading-a-plugin">Locating and loading a plugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#using-memory">Using memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#resource-file-considerations">Resource file considerations</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#using-saferesources">Using SafeResources</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#manipulating-the-resource-chain-directly">Manipulating the resource chain directly</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#macros">Macros</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#mac-os-only-methods">Mac OS-only methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#inter-application-communication">Inter application communication</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#creating-a-sample-plugin">Creating a sample plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#including-acrobat-sdk-library-files">Including Acrobat SDK library files</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#adding-the-pimain-source-file">Adding the PIMain source file</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#adding-application-logic">Adding application logic</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#compiling-and-building-your-plugin">Compiling and building your plugin</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#creating-a-sample-pdf-library-application">Creating a sample PDF Library application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#contents-of-the-pdf-library-sdk">Contents of the PDF Library SDK</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#including-library-files">Including library files</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#sample-code">Sample code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#developing-applications-with-the-adobe-pdf-library">Developing applications with the Adobe PDF Library</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#windows">Windows</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#mac-os">Mac OS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#initialization-and-termination">Initialization and termination</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#multithreading">Multithreading</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#upgrading-existing-plugins">Upgrading existing plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#detecting-supported-apis">Detecting supported APIs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_CreatingSimplePlug.html#migrating-pdfl-apps-to-xcode">Migrating PDFL apps to Xcode</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Plugins_Insertext.html">Inserting Text into PDF Documents</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Insertext.html#creating-a-new-pdf-document">Creating a new PDF document</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Insertext.html#creating-a-new-page">Creating a new page</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Insertext.html#creating-a-container">Creating a container</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Insertext.html#acquiring-fonts">Acquiring fonts</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Insertext.html#creating-a-pdegraphicstate-object">Creating a PDEGraphicState object</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Insertext.html#creating-an-asfixedmatrix-object">Creating an ASFixedMatrix object</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Insertext.html#inserting-text">Inserting text</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Insertext.html#saving-the-pdf-document">Saving the PDF document</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Insertext.html#examining-a-pdfl-app-source-file">Examining a PDFL app source file</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Plugins_Documents.html">Working with Documents and Files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Documents.html#opening-pdf-documents">Opening PDF documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Documents.html#opening-a-pdf-in-an-external-window">Opening a PDF in an external window</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Documents.html#creating-a-window">Creating a Window</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Documents.html#defining-the-parameters-for-an-external-window">Defining the parameters for an external window</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Documents.html#creating-a-handler-for-an-external-window">Creating a handler for an external window</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Documents.html#displaying-an-open-dialog-box">Displaying an open dialog box</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Documents.html#displaying-a-pdf-in-a-window">Displaying a PDF in a window</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Documents.html#determining-the-pdf-version">Determining the PDF version</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Documents.html#pdf-version">PDF version</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Documents.html#pdf-version-extensions">PDF version extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Documents.html#setting-the-extension-level-of-a-document">Setting the extension level of a document</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Documents.html#getting-the-extension-level-of-a-document">Getting the extension level of a document</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Documents.html#bridging-core-api-layers">Bridging core API layers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Documents.html#creating-a-pddoc-object">Creating a PDDoc object</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Documents.html#creating-a-pddoc-object-for-an-open-pdf">Creating a PDDoc object for an open PDF</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Documents.html#accessing-non-pdf-files">Accessing non-PDF files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Documents.html#printing-documents">Printing documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Documents.html#working-with-the-pdf-x-format">Working with the PDF/X format</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Plugins_Menu.html">Creating Menus and Menu Commands</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Menu.html#about-menus">About menus</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Menu.html#about-avmenubar-typedefs">About AVmenubar typedefs</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Menu.html#about-avmenu-typedefs">About AVMenu typedefs</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Menu.html#about-avmenuitem-typedefs">About AVMenuItem typedefs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Menu.html#adding-menu-commands-to-menus">Adding menu commands to menus</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Menu.html#adding-a-menu-command-to-an-existing-menu">Adding a menu command to an existing menu</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Menu.html#adding-a-menu-command-to-a-new-menu">Adding a menu command to a new menu</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Menu.html#creating-menu-callback-functions">Creating menu callback functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Menu.html#determining-if-a-menu-item-can-be-executed">Determining if a menu item can be executed</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Plugins_Toolbutton.html">Creating Toolbars and Buttons</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Toolbutton.html#about-toolbars">About toolbars</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Toolbutton.html#about-avtoolbar-typedefs">About AVToolBar typedefs</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Toolbutton.html#about-avtoolbutton-typedefs">About AVToolButton typedefs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Toolbutton.html#retrieving-toolbars">Retrieving toolbars</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Toolbutton.html#creating-toolbar-buttons">Creating toolbar buttons</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Toolbutton.html#setting-help-text-for-a-button">Setting help text for a button</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Toolbutton.html#setting-label-text">Setting label text</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Toolbutton.html#creating-a-sub-menu-for-a-button">Creating a sub-menu for a button</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Toolbutton.html#retrieving-existing-toolbar-buttons">Retrieving existing toolbar buttons</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Toolbutton.html#attaching-a-button-to-a-toolbar">Attaching a button to a toolbar</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Toolbutton.html#exposing-a-button-in-a-web-browser">Exposing a button in a web browser</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Toolbutton.html#removing-a-button-from-a-toolbar">Removing a button from a toolbar</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Toolbutton.html#creating-toolbar-button-callback-functions">Creating toolbar button callback functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Plugins_Annotations.html">Creating Annotations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Annotations.html#working-with-text-annotations">Working with text annotations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Annotations.html#creating-text-annotations">Creating text annotations</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Annotations.html#retrieving-existing-annotations">Retrieving existing annotations</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Annotations.html#modifying-text-annotations">Modifying text annotations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Annotations.html#working-with-redaction-annotations">Working with redaction annotations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Annotations.html#creating-a-redaction-annotation">Creating a redaction annotation</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Annotations.html#modifying-an-existing-redaction-annotation">Modifying an existing redaction annotation</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Annotations.html#applying-redaction-annotations-removing-redacted-content">Applying redaction annotations (removing redacted content)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Plugins_Bookmark.html">Working with Bookmarks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Bookmark.html#about-bookmarks">About bookmarks</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Bookmark.html#creating-bookmarks">Creating bookmarks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Bookmark.html#defining-bookmark-actions">Defining bookmark actions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Bookmark.html#creating-a-pdviewdestination-object">Creating a PDViewDestination object</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Bookmark.html#creating-a-avpageview-object">Creating a AVPageView object</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Bookmark.html#assigning-an-action-to-a-bookmark">Assigning an action to a bookmark</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Bookmark.html#removing-bookmark-actions">Removing bookmark actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Bookmark.html#opening-and-closing-bookmarks">Opening and closing bookmarks</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Bookmark.html#retrieving-bookmarks">Retrieving bookmarks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Bookmark.html#retrieving-the-root-bookmark">Retrieving the root bookmark</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Bookmark.html#retrieving-a-specific-bookmark">Retrieving a specific bookmark</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Bookmark.html#retrieving-all-bookmarks">Retrieving all bookmarks</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Bookmark.html#deleting-bookmarks">Deleting bookmarks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Plugins_Pages.html">Working with Page Views and Contents</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Pages.html#about-page-coordinates">About page coordinates</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Pages.html#about-page-views">About page views</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Pages.html#displaying-page-views">Displaying page views</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Pages.html#modifying-page-contents">Modifying page contents</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Pages.html#creating-a-pdecontent-object">Creating a PDEContent object</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Pages.html#accessing-page-contents">Accessing page contents</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Pages.html#determining-page-element-types">Determining page element types</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Pages.html#modifying-text-elements">Modifying text elements</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Plugins_Words.html">Working with Words</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Words.html#about-searching-for-words">About searching for words</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Words.html#about-pdword-typedefs">About PDWord typedefs</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Words.html#about-pdwordfinder-typedefs">About PDWordFinder typedefs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Words.html#creating-a-pdwordfinder-object">Creating a PDWordFinder object</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Words.html#extracting-and-displaying-words">Extracting and displaying words</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Words.html#highlighting-words">Highlighting words</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Plugins_Handlers.html">Creating Handlers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Handlers.html#about-handlers">About handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Handlers.html#action-handlers">Action handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Handlers.html#annotation-handlers">Annotation handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Handlers.html#avcommand-handlers">AVCommand handlers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Handlers.html#creating-an-avcommand-handler">Creating an AVCommand handler</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Handlers.html#invoking-avcommands">Invoking AVCommands</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Handlers.html#configuring-avcommands">Configuring AVCommands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Handlers.html#setting-input-parameters">Setting input parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Handlers.html#setting-configuration-parameters">Setting configuration parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Handlers.html#setting-avcommand-parameters">Setting AVCommand parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Handlers.html#running-commands">Running commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Handlers.html#exposing-avcommands-to-the-batch-framework">Exposing AVCommands to the batch framework</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Handlers.html#adding-a-handler-to-the-global-command-list">Adding a handler to the global command list</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Handlers.html#supporting-properties">Supporting properties</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Handlers.html#file-format-conversion-handlers">File format conversion handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Handlers.html#file-specification-handlers">File specification handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Handlers.html#selection-servers">Selection servers</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Handlers.html#tool-callbacks">Tool callbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Handlers.html#window-handlers">Window handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Handlers.html#file-systems">File systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Handlers.html#progress-monitors">Progress monitors</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Handlers.html#transition-handlers">Transition handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Handlers.html#adding-message-handling">Adding message handling</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Plugins_Notification.html">Registering for Event Notifications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Notification.html#registering-event-notifications">Registering event notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Notification.html#unregistering-event-notifications">Unregistering event notifications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Plugins_Security.html">Working with Document Security</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Security.html#about-document-security">About document security</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Security.html#about-security-handlers">About security handlers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Security.html#adding-a-security-handler">Adding a security handler</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Security.html#security-handlers-data">Security handlers data</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Security.html#security-handler-callbacks">Security handler callbacks</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Security.html#acrobat-s-authorization-procedure">Acrobat’s authorization procedure</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Security.html#opening-a-secured-file">Opening a secured file</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Security.html#saving-a-secured-file">Saving a secured file</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Security.html#setting-security-for-a-document">Setting security for a document</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Security.html#saving-a-file-with-an-encryption-dictionary">Saving a file with an encryption dictionary</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Security.html#opening-an-encrypted-file">Opening an encrypted file</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Plugins_Unicode.html">Working with Unicode Paths</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Unicode.html#about-unicode-paths">About Unicode paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Unicode.html#creating-unicode-file-path-application-logic">Creating Unicode file path application logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Unicode.html#retrieving-unicode-path-values">Retrieving Unicode path values</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Unicode.html#creating-an-asfilesys-object">Creating an ASFileSys object</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Unicode.html#creating-an-asfilesys-object-that-supports-unicode-paths">Creating an ASFileSys object that supports Unicode paths</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Plugins_Hft.html">Working with Host Function Tables</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Hft.html#about-host-function-tables">About host function tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Hft.html#exporting-host-function-tables">Exporting host function tables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Hft.html#creating-hft-methods">Creating HFT methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Hft.html#creating-hft-method-definitions">Creating HFT method definitions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Hft.html#defining-function-prototypes">Defining function prototypes</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Hft.html#defining-an-hft-method-name">Defining an HFT method name</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Hft.html#creating-hft-callback-functions">Creating HFT callback functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Hft.html#creating-new-host-function-tables">Creating new Host Function Tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Hft.html#examining-hft-header-and-source-files">Examining HFT header and source files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Hft.html#examining-an-hft-header-file">Examining an HFT header file</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Hft.html#examining-an-hft-source-file">Examining an HFT source file</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Hft.html#importing-an-existing-hft">Importing an existing HFT</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Hft.html#invoking-hft-methods">Invoking HFT methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Hft.html#replacing-hft-methods">Replacing HFT methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Hft.html#migrating-non-hft-pdf-library-applications-to-hft-applications">Migrating non-HFT PDF Library applications to HFT applications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Plugins_Cos.html">Working with Cos Objects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Cos.html#about-cos-objects">About Cos objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Cos.html#about-direct-and-indirect-objects">About direct and indirect objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Cos.html#about-cos-object-types">About Cos object types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Cos.html#cos-strings">Cos strings</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Cos.html#hexadecimal-strings">Hexadecimal strings</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Cos.html#cos-arrays">Cos arrays</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Cos.html#cos-names">Cos names</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Cos.html#cos-dictionaries">Cos dictionaries</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Cos.html#cos-streams">Cos streams</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Cos.html#working-with-cos-strings">Working with Cos strings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Cos.html#creating-cos-strings">Creating Cos strings</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Cos.html#retrieving-the-string-value">Retrieving the string value</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Cos.html#working-with-cos-arrays">Working with Cos arrays</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Cos.html#creating-cos-arrays">Creating Cos arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Cos.html#retrieving-cos-array-values">Retrieving Cos array values</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Cos.html#working-with-cos-dictionaries">Working with Cos dictionaries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Cos.html#creating-cos-dictionaries">Creating Cos dictionaries</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Cos.html#retrieving-values-from-a-cos-dictionary">Retrieving values from a Cos dictionary</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Cos.html#querying-a-cos-dictionary-for-a-key">Querying a Cos dictionary for a key</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Cos.html#working-with-cos-names">Working with Cos names</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Cos.html#creating-cos-names">Creating Cos names</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Cos.html#retrieving-the-value-of-a-name-object">Retrieving the value of a name object</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Cos.html#working-with-cos-streams">Working with Cos streams</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Cos.html#creating-cos-streams">Creating Cos streams</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Cos.html#creating-a-stream-dictionary">Creating a stream dictionary</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_Cos.html#inserting-a-cos-stream-into-a-pdf-document">Inserting a Cos stream into a PDF document</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Cos.html#populating-a-pdf-with-a-content-stream">Populating a PDF with a content stream</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Plugins_3D_samples.html">Working with 3D Annotations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Plugins_3D_samples.html#creating-3d-annotations">Creating 3D annotations</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_3D_samples.html#adding-3d-data-to-an-annotation">Adding 3D data to an annotation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_3D_samples.html#creating-the-3d-annotation-dictionary-entries">Creating the 3D annotation dictionary entries</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_3D_samples.html#specifying-the-3d-stream">Specifying the 3D stream</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Plugins_3D_samples.html#creating-the-stream-object">Creating the stream object</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_3D_samples.html#adding-the-cos-stream-to-the-annotation-dictionary">Adding the Cos stream to the annotation dictionary</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_3D_samples.html#creating-the-attributes-dictionary">Creating the attributes dictionary</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_3D_samples.html#specifying-javascript-code">Specifying JavaScript code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_3D_samples.html#setting-the-default-view">Setting the default view</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_3D_samples.html#setting-the-annotation-appearance">Setting the annotation appearance</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_3D_samples.html#setting-the-activation-dictionary">Setting the activation dictionary</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Parsing and Creating PRC Files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#working-with-the-acrobat-3d-api">Working with the Acrobat 3D API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#versions">Versions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compatibility-with-different-prc-format-versions">Compatibility with different PRC format versions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compatibility-between-the-acrobat-3d-library-and-the-acrobat-3d-api">Compatibility between the Acrobat 3D Library and the Acrobat 3D API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-types-naming-conventions-and-character-encoding">Data types, naming conventions, and character encoding</a></li>
<li class="toctree-l3"><a class="reference internal" href="#structured-and-recursive-nature-of-prc-parsing">Structured and recursive nature of PRC parsing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#implementing-external-linking-in-your-plugin">Implementing external linking in your plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#implementing-external-linking">Implementing external linking</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#parsing-a-prc-file">Parsing a PRC file</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#handling-errors">Handling errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#copying-the-embedded-prc-file-to-a-separate-file">Copying the embedded PRC file to a separate file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#initializing-the-acrobat-3d-api">Initializing the Acrobat 3D API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parsing-structure-prc-entities">Parsing structure PRC entities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#parse-the-model-file-data">Parse the model file data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parse-a-product-occurrence">Parse a product occurrence</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parse-a-part-definition">Parse a part definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parsing-representation-items">Parsing representation items</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parse-a-representation-item-set-prc-entity-a3driset">Parse a representation item set (PRC entity A3DRiSet)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parse-a-brep-model-representation-item-prc-entity-a3dribrepmodel">Parse a Brep model representation item (PRC entity A3DRiBrepModel)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parse-coordinate-system-data">Parse coordinate system data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#parsing-tessellation-prc-entities">Parsing tessellation PRC entities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#parse-tessellation-base-data">Parse tessellation base data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parse-3d-tessellation-data">Parse 3D tessellation data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#parsing-topology-prc-entities">Parsing topology PRC entities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#parse-topology-body-data">Parse topology body data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parse-topology-context-data">Parse topology context data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parse-the-brep-model-s-data">Parse the Brep model’s data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parse-connex-data">Parse Connex data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parse-a-shell-entity">Parse a shell entity</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parse-the-face-s-surface-data">Parse the face’s surface data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#convert-surface-data-to-nurbs-for-other-than-uv-mapped-surfaces">Convert surface data to Nurbs (for other than UV-mapped surfaces)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parse-generic-surface-data">Parse generic surface data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parse-nurbs-surface-data">Parse Nurbs surface data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#parsing-prc-entities-that-specify-graphics">Parsing PRC entities that specify graphics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parsing-attributes-that-appear-in-an-entity-base">Parsing attributes that appear in an entity base</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#parsing-root-base-entity-data">Parsing root-base entity data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parse-the-miscellaneous-attribute-entity">Parse the miscellaneous attribute entity</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parsing-graphic-attributes-using-miscellaneous-cascaded-attributes">Parsing graphic attributes using miscellaneous cascaded attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#to-create-and-push-a-miscellaneous-cascaded-attributes-structure">To create and push a miscellaneous cascaded attributes structure</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#terminating-the-interface-with-the-acrobat-3d-api">Terminating the interface with the Acrobat 3D API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#terminate-your-interface-with-the-acrobat-3d-api">Terminate your interface with the Acrobat 3D API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-prc-file-that-uses-boundary-representation">Creating a PRC file that uses boundary representation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#error-handling">Error handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-model-file-entity-and-exporting-it-to-a-physical-file">Creating a model file entity and exporting it to a physical file</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#create-a-file-that-contains-the-prc-data">Create a file that contains the PRC data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#creating-structure-prc-entities">Creating structure PRC entities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#create-a-model-file-entity">Create a model file entity</a></li>
<li class="toctree-l4"><a class="reference internal" href="#create-a-product-occurrence">Create a product occurrence</a></li>
<li class="toctree-l4"><a class="reference internal" href="#create-a-part-definition">Create a part definition</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#creating-representation-item-prc-entities">Creating representation item PRC entities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#create-a-brep-model-representation-item">Create a Brep model representation item</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#creating-topology-prc-entities">Creating topology PRC entities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#create-a-topology-brep-data-entity">Create a topology Brep data entity</a></li>
<li class="toctree-l4"><a class="reference internal" href="#create-a-topology-connex-entity">Create a topology connex entity</a></li>
<li class="toctree-l4"><a class="reference internal" href="#create-a-topology-shell-entity">Create a topology shell entity</a></li>
<li class="toctree-l4"><a class="reference internal" href="#create-a-topology-face-entity">Create a topology face entity</a></li>
<li class="toctree-l4"><a class="reference internal" href="#create-a-topology-loop-entity">Create a topology loop entity</a></li>
<li class="toctree-l4"><a class="reference internal" href="#create-a-topology-co-edge-entity">Create a topology co-edge entity</a></li>
<li class="toctree-l4"><a class="reference internal" href="#create-a-topology-edge-entity">Create a topology edge entity</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#creating-geometry-prc-entities">Creating geometry PRC entities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#create-a-surface-cylinder-entity">Create a surface cylinder entity</a></li>
<li class="toctree-l4"><a class="reference internal" href="#create-a-circular-curve-entity">Create a circular curve entity</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#defining-root-level-attributes-for-a-prc-entity">Defining root-level attributes for a PRC entity</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#define-miscellaneous-attributes-that-omit-modeler-data">Define miscellaneous attributes that omit modeler data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#define-miscellaneous-attributes-that-include-modeler-data">Define miscellaneous attributes that include modeler data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-3d-annotation-that-references-the-prc-file">Creating a 3D annotation that references the PRC file</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-tessellation-entity-for-representing-faceted-objects">Creating a tessellation entity for representing faceted objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create-the-tessellation-base-data">Create the tessellation base data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-the-tessellation-facet-data">Create the tessellation facet data</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Plugins_Exceptions.html">Handling Exceptions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Exceptions.html#creating-exception-handlers">Creating exception handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Exceptions.html#returning-a-value-from-an-exception-handler">Returning a value from an exception handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Exceptions.html#raising-exceptions">Raising exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_Exceptions.html#exception-handling-scenarios">Exception handling scenarios</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Exceptions.html#using-goto-statements">Using goto statements</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Exceptions.html#using-nested-exception-handlers">Using nested exception handlers</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_Exceptions.html#using-register-variables">Using register variables</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Plugins_ExtendedAPI.html">Working with Acrobat Extended APIs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Plugins_ExtendedAPI.html#search-extended-api">Search extended API</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_ExtendedAPI.html#catalog-extended-api">Catalog extended API</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_ExtendedAPI.html#pdf-consultant-and-accessibility-checker-extended-api">PDF Consultant and Accessibility Checker extended API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_ExtendedAPI.html#acrobat-agents">Acrobat agents</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_ExtendedAPI.html#reclassifying-and-revisiting">Reclassifying and revisiting</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_ExtendedAPI.html#agent-architecture">Agent architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_ExtendedAPI.html#how-the-consultant-works">How the consultant works</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Plugins_ExtendedAPI.html#removing-or-modifying-objects">Removing or modifying objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_ExtendedAPI.html#reclassifying-objects">Reclassifying objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_ExtendedAPI.html#consultant-process">Consultant process</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_ExtendedAPI.html#important-issues-for-consultant-development">Important issues for consultant development</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Plugins_ExtendedAPI.html#maintaining-the-traversal-stack">Maintaining the traversal stack</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_ExtendedAPI.html#deciding-consultant-or-the-agent-does-the-work">Deciding consultant or the agent does the work</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_ExtendedAPI.html#avoiding-agent-collisions">Avoiding agent collisions</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_ExtendedAPI.html#avoiding-visitation-collisions">Avoiding visitation collisions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_ExtendedAPI.html#importing-the-consultant-hfts-into-a-plugin">Importing the consultant HFTs into a plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_ExtendedAPI.html#creating-and-destroying-consultants">Creating and destroying consultants</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_ExtendedAPI.html#registering-agents-with-consultants">Registering agents with consultants</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_ExtendedAPI.html#starting-the-consultant">Starting the consultant</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_ExtendedAPI.html#consultant-object-type-identification">Consultant object type identification</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_ExtendedAPI.html#creating-an-agent-class">Creating an agent class</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_ExtendedAPI.html#creating-agent-constructors">Creating agent constructors</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_ExtendedAPI.html#recognizing-objects-of-interest">Recognizing objects of interest</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_ExtendedAPI.html#post-processing-stage">Post processing stage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_ExtendedAPI.html#digital-signature-extended-api">Digital signature extended API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_ExtendedAPI.html#the-pubsec-layer">The PubSec layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_ExtendedAPI.html#digital-signature-components">Digital signature components</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_ExtendedAPI.html#digital-signature-scenarios">Digital signature scenarios</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_ExtendedAPI.html#initializing-the-digital-signature-plugin">Initializing the digital signature plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_ExtendedAPI.html#understanding-the-process">Understanding the process</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Plugins_ExtendedAPI.html#dialogs-and-signature-gathering">Dialogs and signature gathering</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_ExtendedAPI.html#saving-a-document">Saving a document</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_ExtendedAPI.html#finishing-the-process">Finishing the process</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_ExtendedAPI.html#revalidating-signatures">Revalidating signatures</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_ExtendedAPI.html#additional-available-callbacks">Additional available callbacks</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_ExtendedAPI.html#additional-plugin-support">Additional plugin support</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_ExtendedAPI.html#rollback-support">Rollback support</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_ExtendedAPI.html#forms-extended-api">Forms extended API</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_ExtendedAPI.html#weblink-extended-api">Weblink extended API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_ExtendedAPI.html#weblink-services">Weblink services</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_ExtendedAPI.html#writing-a-custom-driver">Writing a custom driver</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_ExtendedAPI.html#spelling-extended-api">Spelling extended API</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_ExtendedAPI.html#acrocolor-extended-api">AcroColor extended API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_ExtendedAPI.html#color-conversion-operations">Color conversion operations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Plugins_ExtendedAPI.html#object-attributes">Object attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_ExtendedAPI.html#color-space-attributes">Color space attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_ExtendedAPI.html#conversion-actions">Conversion actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_ExtendedAPI.html#action-modifiers">Action modifiers</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_ExtendedAPI.html#ink-aliasing">Ink aliasing</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_ExtendedAPI.html#data-structures">Data structures</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_ExtendedAPI.html#data-enum-values">Data enum values</a></li>
<li class="toctree-l4"><a class="reference internal" href="Plugins_ExtendedAPI.html#converting-a-document-to-rgb">Converting a document to RGB</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_ExtendedAPI.html#pdf-optimizer-api">PDF Optimizer API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Plugins_ReaderPlug.html">Creating an Adobe Reader Plugin</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Plugins_ReaderPlug.html#configuring-preprocessor-definitions">Configuring preprocessor definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_ReaderPlug.html#creating-the-public-and-private-key-pairs">Creating the public and private key pairs</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_ReaderPlug.html#enabling-the-plugin-for-adobe-reader">Enabling the plugin for Adobe Reader</a></li>
<li class="toctree-l2"><a class="reference internal" href="Plugins_ReaderPlug.html#troubleshooting-an-adobe-reader-plugin">Troubleshooting an Adobe Reader plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Plugins_ReaderPlug.html#plugin-appears-to-be-ignored-by-adobe-reader">Plugin appears to be ignored by Adobe Reader</a></li>
<li class="toctree-l3"><a class="reference internal" href="Plugins_ReaderPlug.html#adobe-reader-error-messages">Adobe Reader error messages</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Reader_Plugins.html">Reader Plugins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Reader_Plugins.html#reader-enablement">Reader enablement</a></li>
<li class="toctree-l2"><a class="reference internal" href="Reader_Plugins.html#apis-available-for-adobe-reader">APIs available for Adobe Reader</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="../index.html#://">Master Doc Search and TOC</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

        <!--- @@@@@@@@@@@@@@@@ Custom @@@@@@@@@@@@@@@@ -->
        <div class="fixedbar">  
          <div class="wy-menu-items">
            <a href="https://www.adobe.com/go/dc_developer" class="topbarlink">Acrobat Developer Home</a>
            <a href="https://www.adobe.io/apis/documentcloud/dcsdk/" class="topbarlink">Document Services SDK</a>
            <a href="https://www.adobe.com/go/acrobatsigndevguide" class="topbarlink">Acrobat Sign SDK</a>
            <a href="https://www.adobe.com/go/acrobatsdk_home" class="topbarlink">Acrobat SDK</a>
            <a href="https://www.adobe.com/go/pdflibrary" class="topbarlink">PDF Library SDK</a>
          </div>  
          <div class="sign-in">
            <a href="https://adminconsole.adobe.com//" class="btn btn-console">Console</a>
           <!-- <a href="https://auth.services.adobe.com/en_US/index.html">Sign in</a>-->
          </div>
        </div>
        <!--- @@@@@@@@@@@@@@@@ Custom @@@@@@@@@@@@@@@@ -->




   
      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="toc.html">Acrobat-PDFL SDK:  Plugin Development</a>
        
      </nav>


      <div class="wy-nav-content">
      <a href="#" id="scroll" style="display:inline;"><span></span></a>
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="toc.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Parsing and Creating PRC Files</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="Plugins_Exceptions.html" class="btn btn-neutral float-right" title="Handling Exceptions" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
      
      
        <a href="Plugins_3D_samples.html" class="btn btn-neutral float-left" title="Working with 3D Annotations" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="parsing-and-creating-prc-files">
<span id="id1"></span><h1>Parsing and Creating PRC Files<a class="headerlink" href="#parsing-and-creating-prc-files" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Starting Acrobat X, the ability to convert various 3D formats for use with PDF is no longer supported. The associated APIs are, therefore, not available from Acrobat X SDK onwards.</p>
</div>
<p>The Adobe Acrobat 3D API lets you develop Acrobat plugins and PDF Library applications that create and access data in a PRC stream. Such a stream can be embedded within a PDF document as a 3D annotation. This chapter explains how to export the contents of a PRC stream, and how to create a PRC stream.</p>
<p>PRC data can appear in PDF documents as streams referenced by 3D annotations. PRC data is a highly-compressed 3D representation supported in Acrobat 8.1 and later. It can represent faceted and exact geometry data. The PRC format is specified in the <a class="reference external" href="https://www.iso.org/standard/54948.html">PRC Format Specification</a>.</p>
<p>Before you read this chapter, it is strongly recommended that you become familiar with 3D concepts and OpenGL, and with 3D annotations. (See <a class="reference internal" href="Plugins_3D_samples.html#creating-3d-annotations"><span class="std std-ref">Creating 3D annotations</span></a>.) OpenGL is an open-source API for setting and accessing 3D data.</p>
<p>For a description of the PRC file format, see the <a class="reference external" href="https://www.iso.org/standard/54948.html">PRC Format Specification</a>.</p>
<div class="section" id="working-with-the-acrobat-3d-api">
<span id="id2"></span><h2>Working with the Acrobat 3D API<a class="headerlink" href="#working-with-the-acrobat-3d-api" title="Permalink to this headline">¶</a></h2>
<p>The Acrobat 3D API provides a programmatic interface to the Acrobat 3D Library. It is the only mechanism that lets you create, access, and change PRC data that appears in a PDF document. It does not enable reading or writing PDF documents. (U3D is another 3D format that can be referenced by 3D annotations.)</p>
<p>You can use the Acrobat 3D API to develop the following settings:</p>
<ul class="simple">
<li><p>Plugins that work with Acrobat Pro Extended</p></li>
<li><p>Applications that use the PDF Library. (Acrobat Pro Extended must also be installed.) When the Acrobat 3D Library initializes itself, it verifies the presence of Acrobat Pro Extended on the same computer.</p></li>
</ul>
<div class="section" id="versions">
<span id="id3"></span><h3>Versions<a class="headerlink" href="#versions" title="Permalink to this headline">¶</a></h3>
<p>The following table shows the correlation between the Acrobat 3D Library versions and the Acrobat products that supports them. The table also shows the PRC format supported by the Acrobat 3D Library version.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 34%" />
<col style="width: 30%" />
<col style="width: 35%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Acrobat 3D Library version</p></th>
<th class="head"><p>Product</p></th>
<th class="head"><p>Supports PRC format version</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>2.0</p></td>
<td><div class="line-block">
<div class="line">Acrobat Pro Extended</div>
<div class="line">version 9.0</div>
</div>
<p>PDF Library version 9.0</p>
</td>
<td><p>7094 and earlier</p></td>
</tr>
<tr class="row-odd"><td><p>2.1</p></td>
<td><div class="line-block">
<div class="line">Acrobat Pro Extended</div>
<div class="line">version 9.1</div>
</div>
<p>PDF Library version 9.1</p>
</td>
<td><p>7094 and earlier</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="compatibility-with-different-prc-format-versions">
<span id="id4"></span><h3>Compatibility with different PRC format versions<a class="headerlink" href="#compatibility-with-different-prc-format-versions" title="Permalink to this headline">¶</a></h3>
<p>In addition to supporting the PRC format specified in the previous table, Acrobat 3D Library provides forward and backward compatibility with other PRC format versions:</p>
<p><strong>Forward compatibility:</strong> The Acrobat 3D Library is designed to avoid failing if it reads PRC documents that conform to future releases of the PRC format. It does so by ignoring any information it does not understand.</p>
<p><strong>Backward compatibility:</strong> In a major release, Acrobat 3D Library support for PRC is backward compatible. Each new version of the software can read PRC files that conform to an earlier PRC format version.</p>
</div>
<div class="section" id="compatibility-between-the-acrobat-3d-library-and-the-acrobat-3d-api">
<span id="id5"></span><h3>Compatibility between the Acrobat 3D Library and the Acrobat 3D API<a class="headerlink" href="#compatibility-between-the-acrobat-3d-library-and-the-acrobat-3d-api" title="Permalink to this headline">¶</a></h3>
<p>The Acrobat 3D API provides the public declarations for a particular version of the Acrobat 3D Library. Plugins developed with one version of the Acrobat 3D API are installed with the same version of Acrobat 3D Library, where that library is contained in Acrobat Pro Extended.</p>
<p>Acrobat 3D Library is designed to support backward compatibility within minor releases of the library.</p>
</div>
<div class="section" id="requirements">
<span id="id6"></span><h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<p>To develop an Acrobat 3D Extended plugin or PDFL application that uses the Acrobat 3D Library, you must download the samples, documentation, and header files from this SDK.</p>
<p>A licensed copy of Acrobat Pro Extended must be installed on the computer on which the plugin or PDF Library application is running. The Acrobat 3D Library verifies the presence of Acrobat Pro Extended before initializing its relationship with the application or plugin.</p>
<p>The file that contains the Acrobat 3D Library is A3DLIB.dll, which is located in the following directory:</p>
<p>C:Program FilesAdobeAcrobatAcrobat</p>
</div>
<div class="section" id="data-types-naming-conventions-and-character-encoding">
<span id="id7"></span><h3>Data types, naming conventions, and character encoding<a class="headerlink" href="#data-types-naming-conventions-and-character-encoding" title="Permalink to this headline">¶</a></h3>
<p>The Acrobat 3D API adopts the Acrobat library definitions for basic types. Here are the basic types from the Acrobat library: ASInt8, ASInt16, ASInt32, ASUns8, ASUns16, ASUns32, and ASBool.</p>
<p>The Acrobat 3D API declares all non-basic types, which fall into these general categories:</p>
<p><strong>PRC entities.</strong> Correspond to the non-terminal structures in the PRC format, such as product occurrences, tessellation base data, and texture transformations. Your software uses NULL pointers to reference PRC entities.</p>
<p><strong>Data structures.</strong> Contain the data used to create a PRC entity. Data structures can also receive the data obtained from parsing a PRC entity. There is one data structure for each type of PRC entity.</p>
<p>Acrobat 3D API uses a naming convention that is self-documenting. The name for each function, structure, enumeration, and enumerator provides clues as to its type, its relationship to a PRC entity described in the PRC format, and its role relative to that PRC entity.</p>
<p>Character encoding is UTF-8, which uses the character encoding scheme described by the Internet Engineering Task Force (IETF) document <em>UTF-8, a transformation format of ISO 10646</em>. That document is available at <a class="reference external" href="http://tools.ietf.org/html/rfc3629">http://tools.ietf.org/html/rfc3629</a>.</p>
</div>
<div class="section" id="structured-and-recursive-nature-of-prc-parsing">
<span id="id8"></span><h3>Structured and recursive nature of PRC parsing<a class="headerlink" href="#structured-and-recursive-nature-of-prc-parsing" title="Permalink to this headline">¶</a></h3>
<p>Plugins and applications that process PRC data should be structured to reflect the hierarchy of the PRC format. Ideally, they implement one function to process or create each of the PRC entities. Additionally, they implement other functions to perform repeated tasks, such as processing or creating attribute data that can apply to a broad category of PRC entities.</p>
<p>Additionally, plugins and applications that process PRC data should support recursive function calls.</p>
<p>The PRC format is a highly-compressed hierarchical structure. The structural entities in a PRC document enable the definition of subassemblies that represent some part of the overall image, such as a gear or a nut. Subassemblies are then grouped to create more complex assemblies, or they can be referenced from other subassemblies similar to a macro.</p>
<p>The following diagram illustrates the hierarchical relationships that can exist between the structural elements:</p>
<ul class="simple">
<li><p>Model files can have multiple child product occurrences.</p></li>
<li><p>Product occurrences can have multiple child product occurrences and a part definition. They can also reference product occurrences that act as prototypes or external data.</p></li>
<li><p>Part definitions have multiple child representation items.</p></li>
</ul>
<img alt="_images/partdefinitions.png" src="_images/partdefinitions.png" />
<p>Because some PRC entities can contain child entities of the same type, plugins that parse or create PRC data use recursion.</p>
</div>
</div>
<div class="section" id="implementing-external-linking-in-your-plugin">
<span id="id9"></span><h2>Implementing external linking in your plugin<a class="headerlink" href="#implementing-external-linking-in-your-plugin" title="Permalink to this headline">¶</a></h2>
<p>The Acrobat 3D Library’s import library (the.lib file) is not provided in the Acrobat SDK or through any other means. As a result, you must use explicit linking to resolve the external links in your plugin.</p>
<p>With explicit linking, the executable using the DLL must make function calls to explicitly load and unload the DLL, and to access the DLL’s exported functions. Your plugin must call the exported functions through a function pointer. More specifically, your plugin must perform the following tasks:</p>
<ul class="simple">
<li><p>Call the <code class="docutils literal notranslate"><span class="pre">LoadLibrary</span></code> function (or a similar function) to load the DLL and obtain a module handle.</p></li>
<li><p>Call the <code class="docutils literal notranslate"><span class="pre">GetProcAddress</span></code> function to obtain a function pointer to each exported function that your plugin calls. Because applications are calling the DLL’s functions through a pointer, the compiler does not generate external references, so there is no need to link with an import library.</p></li>
<li><p>Call the <code class="docutils literal notranslate"><span class="pre">FreeLibrary</span></code> function when done with the DLL.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Acrobat 3D API functions in this chapter are described as though implicit linking were possible. Wherever you see a direct call to one of these functions, you should instead use the pointer to the function. See <a class="reference internal" href="#implementing-external-linking"><span class="std std-ref">Implementing external linking</span></a>.</p>
</div>
<div class="section" id="implementing-external-linking">
<span id="id10"></span><h3>Implementing external linking<a class="headerlink" href="#implementing-external-linking" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>Call the <code class="docutils literal notranslate"><span class="pre">LoadLibrary</span></code> function (or a similar function) to load the DLL and obtain a module handle.</p></li>
<li><p>Call the <code class="docutils literal notranslate"><span class="pre">GetProcAddress</span></code> function to obtain a function pointer to each exported function that your plugin calls. Because applications are calling the DLL’s functions through a pointer, the compiler does not generate external references, so there is no need to link with an import library.</p></li>
<li><p>Main code segment that loads the Acrobat 3D library and defines function pointers</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>HMODULE hModuleA3DPRCSDK = A3DPRCLoadLibrary();

if (!hModuleA3DPRCSDK) {
  AVAlertNote(&quot;Failed to load A3DLIB.dll!&quot;);
  _unlink(prcName);
  _unlink(jsName);
  return;
}

A3DPRCFunctionPointersInitialize(hModuleA3DPRCSDK);

/*------------------------------------
/* Your plugin initializes its relationship with the Acrobat 3D Library
/* and then it parses or creates PRC content.
/*------------------------------------

A3DPRCUnloadLibrary(hModuleA3DPRCSDK);
} else {
  char strMsg[128];
  sprintf(strMsg, &quot;A3DDllInitialize returned %dn&quot;, iRet);
  AVAlertNote(strMsg);
  _unlink(prcName);
  _unlink(jsName);
  A3DPRCUnloadLibrary(hModuleA3DPRCSDK);
}
</pre></div>
</div>
<p>Loading the DLL and obtaining a module handle</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HMODULE</span> <span class="n">A3DPRCLoadLibrary</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">HMODULE</span> <span class="n">hModuleA3DPRCSDK</span><span class="p">;</span>

  <span class="n">wchar_t</span> <span class="n">acFilePath</span><span class="p">[</span><span class="n">MAX_PATH</span><span class="p">];</span>
  <span class="n">GetModuleFileNameW</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="n">acFilePath</span><span class="p">,</span> <span class="n">MAX_PATH</span><span class="p">);</span>
  <span class="n">wchar_t</span><span class="o">*</span> <span class="n">backslash</span> <span class="o">=</span> <span class="n">wcsrchr</span><span class="p">(</span><span class="n">acFilePath</span><span class="p">,</span> <span class="n">L</span><span class="s1">&#39;&#39;</span><span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">backslash</span><span class="p">)</span>
      <span class="n">acFilePath</span><span class="p">[</span><span class="n">backslash</span> <span class="o">-</span> <span class="n">acFilePath</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="n">wcscat</span><span class="p">(</span><span class="n">acFilePath</span><span class="p">,</span> <span class="n">L</span><span class="s2">&quot;A3DLIB.dll&quot;</span><span class="p">);</span>

<span class="c1">#ifdef UNICODE</span>
  <span class="n">hModuleA3DPRCSDK</span> <span class="o">=</span> <span class="n">LoadLibraryExW</span><span class="p">(</span><span class="n">acFilePath</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="n">LOAD_WITH_ALTERED_SEARCH_PATH</span><span class="p">);</span>
<span class="c1">#else</span>
  <span class="n">hModuleA3DPRCSDK</span> <span class="o">=</span> <span class="n">LoadLibraryExA</span><span class="p">(</span><span class="n">acFilePath</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="n">LOAD_WITH_ALTERED_SEARCH_PATH</span><span class="p">);</span>
<span class="c1">#endif</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">hModuleA3DPRCSDK</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">hModuleA3DPRCSDK</span><span class="p">;</span>

  <span class="k">return</span> <span class="n">NULL</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Setting up the function pointers</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">A3DPRCFunctionPointersInitialize</span><span class="p">(</span><span class="n">HMODULE</span> <span class="n">hModule</span><span class="p">)</span>
<span class="p">{</span>
<span class="c1">#define A3D_API(returntype,name,params) st_PF##name = (PF##name)GetProcAddress(hModule,#name);</span>
<span class="c1">#include &lt;A3DSDK.h&gt;</span>
<span class="c1">#include &lt;A3DSDKTypes.h&gt;</span>
<span class="c1">#include &lt;A3DSDKBase.h&gt;</span>
<span class="c1">#include &lt;A3DSDKErrorCodes.h&gt;</span>
<span class="c1">#include &lt;A3DSDKGeometry.h&gt;</span>
<span class="c1">#include &lt;A3DSDKTessellation.h&gt;</span>
<span class="c1">#include &lt;A3DSDKGraphics.h&gt;</span>
<span class="c1">#include &lt;A3DSDKStructure.h&gt;</span>
<span class="c1">#include &lt;A3DSDKRootEntities.h&gt;</span>
<span class="c1">#include &lt;A3DSDKRepItems.h&gt;</span>
<span class="c1">#include &lt;A3DSDKTessellation.h&gt;</span>
<span class="c1">#include &lt;A3DSDKMarkup.h&gt;</span>
<span class="c1">#include &lt;A3DSDKGlobalData.h&gt;</span>
<span class="c1">#include &lt;A3DSDKTexture.h&gt;</span>
<span class="c1">#include &lt;A3DSDKMisc.h&gt;</span>
<span class="c1">#include &lt;A3DSDKGeometryCrv.h&gt;</span>
<span class="c1">#include &lt;A3DSDKGeometrySrf.h&gt;</span>
<span class="c1">#include &lt;A3DSDKTopology.h&gt;</span>
<span class="c1">#undef A3D_API</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Declaring the macro that resolves to the function pointer</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#define A3DCALL(name,params) st_PF##name params</span>
</pre></div>
</div>
<p>Using the macro to invoke an Acrobat 3D API function</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>if(iErr == A3D_SUCCESS) {
      ASInt32 iRet = A3DCALL(A3DDllInitialize,(iMajorVersion, iMinorVersion));
      if(iRet == A3D_SUCCESS) {
      …
  }
}
</pre></div>
</div>
</div>
</div>
<div class="section" id="parsing-a-prc-file">
<span id="id11"></span><h2>Parsing a PRC file<a class="headerlink" href="#parsing-a-prc-file" title="Permalink to this headline">¶</a></h2>
<p>This section describes how to parse the data in a PRC file. You can then export the PRC data to an external file that uses a different CAD format, provided you understand the structure of that format and have an API that supports that format. It is beyond the scope of this chapter to explain how to convert PRC data into a specific CAD format. It is also beyond the scope of this chapter to provide an exhaustive explanation of parsing all aspects of a PRC file.</p>
<p>The following diagram shows the structure of a plugin that parses PRC data.</p>
<img alt="_images/parseprc.png" src="_images/parseprc.png" />
<p>The following diagram shows the sequence of tasks required to parse a Brep model entity.</p>
<img alt="_images/parsebrep.png" src="_images/parsebrep.png" />
<div class="section" id="handling-errors">
<span id="id12"></span><h3>Handling errors<a class="headerlink" href="#handling-errors" title="Permalink to this headline">¶</a></h3>
<p>Most of the Acrobat 3D API functions return an integer that indicates success or failure. A return value of <code class="docutils literal notranslate"><span class="pre">A3D_SUCCESS</span></code> indicates success, and any negative return value indicates failure. The following example shows one approach for evaluating this returned result:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ASInt32 iRet = A3DAsmModelFileLoadFromFile(acFileName, NULL, &amp;p);
if (iRet == A3D_SUCCESS) {
  …
} else
  fprintf(&quot;Error: %1dn&quot;, iRet);
</pre></div>
</div>
<p>Although subsequent explanations in this section omit this description, you must still check for errors when an Acrobat 3D API function returns.</p>
</div>
<div class="section" id="copying-the-embedded-prc-file-to-a-separate-file">
<span id="id13"></span><h3>Copying the embedded PRC file to a separate file<a class="headerlink" href="#copying-the-embedded-prc-file-to-a-separate-file" title="Permalink to this headline">¶</a></h3>
<p>This section explains how to export a PRC stream represented in a PDF document as a 3D annotation.</p>
<p>Copy the embedded PRC file to a separate file</p>
<ol class="arabic simple">
<li><p>Retrieve the 3D annotation from within a PDF document. (See <a class="reference internal" href="Plugins_Annotations.html#retrieving-existing-annotations"><span class="std std-ref">Retrieving existing annotations</span></a>.) Ensure that the annotation dictionary type is <code class="docutils literal notranslate"><span class="pre">3DD</span></code> and that the subtype is <code class="docutils literal notranslate"><span class="pre">PRC</span></code>.</p></li>
<li><p>Write the PRC stream to a separate file. This will simplify accessing the data in the stream.</p></li>
</ol>
</div>
<div class="section" id="initializing-the-acrobat-3d-api">
<span id="id14"></span><h3>Initializing the Acrobat 3D API<a class="headerlink" href="#initializing-the-acrobat-3d-api" title="Permalink to this headline">¶</a></h3>
<p>This section explains how to initialize the Acrobat 3D API.</p>
<p>Initialize your interface with the Acrobat 3D API</p>
<ol class="arabic simple">
<li><p>Verify that your plugin is compatible with the Acrobat 3D Library by comparing the version of the Acrobat 3D API against which you compiled and the version of the Acrobat 3D Library available to your plugin. Obtain the version identifiers for the currently installed Acrobat 3D Library by invoking the <code class="docutils literal notranslate"><span class="pre">A3DDllGetVersion</span></code> function. Evaluate the returned values as follows:</p>
<ul class="simple">
<li><p>Ensure that the value of the <code class="docutils literal notranslate"><span class="pre">piMajorVersion</span></code> argument matches the <code class="docutils literal notranslate"><span class="pre">A3D_DLL_MAJORVERSION</span></code> enumeration.</p></li>
<li><p>Ensure that the value of the <code class="docutils literal notranslate"><span class="pre">piMinorVersion</span></code> argument is equal to or greater than the <code class="docutils literal notranslate"><span class="pre">A3D_DLL_MINORVERSION</span></code> enumeration. The Acrobat 3D Library provides backward compatibility for earlier releases of the API that have the same major version identifier.</p></li>
</ul>
</li>
<li><p>Initialize the Acrobat 3D API by supplying the version identifiers for the Acrobat 3D API.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>if(iErr == A3D_SUCCESS) {
      ASInt32 iRet = A3DCALL(
          A3DDllInitialize,(A3D_DLL_MAJORVERSION, A3D_DLL_MINORVERSION));
      if(iRet == A3D_SUCCESS) { … }
}
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>For simplicity, this example uses a syntax that assumes the import library is available. That library is not publicly available, so your code must use a syntax that supports external linking (see <a class="reference internal" href="#implementing-external-linking-in-your-plugin"><span class="std std-ref">Implementing external linking in your plugin</span></a>). The following example shows the syntax to use:</p>
</div>
</div>
<div class="section" id="parsing-structure-prc-entities">
<span id="id15"></span><h3>Parsing structure PRC entities<a class="headerlink" href="#parsing-structure-prc-entities" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="./API_References/PRCReference/3D_API_Reference/index.html">Acrobat 3D API Reference</a> groups the PRC entities that provide structure to the PRC document into the structure module. The PRC entities in the structure module are described here:</p>
<p><strong>Model file:</strong> Is a root PRC entity. There is only one model file in a PRC file.</p>
<p><strong>Product occurrence:</strong> Can contain multiple child product occurrences and one part definition. It can also reference other product occurrences used as prototypes or external data.</p>
<p><strong>Part definition:</strong> Contains representation items.</p>
<p><strong>Filter:</strong> Specifies inclusion or exclusion of topology, geometry, tessellation, or graphic entities, based on the entity’s layer or entity type.</p>
<div class="section" id="parse-the-model-file-data">
<span id="id16"></span><h4>Parse the model file data<a class="headerlink" href="#parse-the-model-file-data" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Load the PRC file into memory by invoking the A3DAsmModelFileLoadFromFile function. In the following example, the <code class="docutils literal notranslate"><span class="pre">acFileName</span></code> argument points to an <code class="docutils literal notranslate"><span class="pre">A3DUTF8Char</span></code> array that contains the name of the PRC file, the second parameter must be <code class="docutils literal notranslate"><span class="pre">NULL</span></code>, and the <code class="docutils literal notranslate"><span class="pre">p</span></code> pointer references a null A3DAsmModelFile object in which the Acrobat 3D Library stores the PRC model file.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DAsmModelFile</span><span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">NULL</span><span class="p">;</span>
<span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DAsmModelFileLoadFromFile</span><span class="p">(</span><span class="n">acFileName</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">p</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Populate the model file with the model file data by invoking the A3DAsmModelFileGet function to place the data in that structure. The A3D_INITIALIZE_DATA macro clears the memory allocated to the structure and checks the size of the structure to avoid alignment problems. The A3DAsmModelFileGet function creates a data structure from the model file pointer created in the previous step.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DAsmModelFileData</span> <span class="n">sData</span><span class="p">;</span>

<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>

<span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DAsmModelFileGet</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Save the value of the <code class="docutils literal notranslate"><span class="pre">m_dUnit</span></code> member in the structure in which you are saving data obtained from parsing the PRC file (your export structure). This member specifies a multiple of millimeters. The value of this member must be non-zero. A value of 1 indicates the units are in millimeters; and a value of 10 indicates the units are in centimeters.</p></li>
<li><p>If the <code class="docutils literal notranslate"><span class="pre">m_bUnitFromCAD</span></code> is present, save its value in your export structure. If the <code class="docutils literal notranslate"><span class="pre">bUnitFromCAD</span></code> member is true, then the <code class="docutils literal notranslate"><span class="pre">m_bUnit</span></code> is from the native CAD file.</p></li>
<li><p>Parse the entity base. (See <a class="reference external" href="Plugins_A3D_API.html#50618396_60919">Parsing root-base entity data</a>.)</p></li>
<li><p>Declare an A3DMiscCascadedAttributes structure. This will be the root entry in a stack on which you store child product occurrences and other subordinate structures. This stack is used to iterate through the PRC structure.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DMiscCascadedAttributes</span><span class="o">*</span> <span class="n">pAttr</span><span class="p">;</span>
<span class="n">A3DMiscCascadedAttributesCreate</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pAttr</span><span class="p">);</span>
</pre></div>
</div>
<p>As you parse subsequent PRC entities, you push the attributes onto this stack. For more information about using cascaded attribute stacks, see <a class="reference internal" href="#parsing-prc-entities-that-specify-graphics"><span class="std std-ref">Parsing PRC entities that specify graphics</span></a> or click the Related Pages tab on the <a class="reference external" href="./API_References/PRCReference/3D_API_Reference/index.html">Acrobat 3D API Reference</a>.</p>
<ol class="arabic simple" start="7">
<li><p>Parse each product occurrence pointer in the <code class="docutils literal notranslate"><span class="pre">sData.m_ppPOccurrences</span></code> array. The number of pointers is specified in <code class="docutils literal notranslate"><span class="pre">sData.m_uiPOccurrencesSize</span></code>.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="p">(</span><span class="n">ASUns32</span> <span class="n">ui</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">ui</span> <span class="o">&lt;</span> <span class="n">sData</span><span class="o">.</span><span class="n">m_uiPOccurrencesSize</span><span class="p">;</span> <span class="n">ui</span><span class="o">++</span><span class="p">)</span>
  <span class="n">parsePOccurrence</span><span class="p">(</span><span class="n">sData</span><span class="o">.</span><span class="n">m_ppPOccurrences</span><span class="p">[</span><span class="n">ui</span><span class="p">],</span> <span class="n">pAttr</span><span class="p">);</span>
</pre></div>
</div>
<p>For information about parsing product occurrences, see <a class="reference internal" href="#parse-a-product-occurrence"><span class="std std-ref">Parse a product occurrence</span></a>.</p>
</div>
<div class="section" id="parse-a-product-occurrence">
<span id="id17"></span><h4>Parse a product occurrence<a class="headerlink" href="#parse-a-product-occurrence" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Parse the entity base, saving the entity name and other relevant data to your export structure. (See <a class="reference external" href="Plugins_A3D_API.html#50618396_60919">Parsing root-base entity data</a>.)</p></li>
<li><p>Create and push a cascaded attributes structure for a product occurrence object, and push that structure onto the stack. (See <a class="reference internal" href="#parsing-graphic-attributes-using-miscellaneous-cascaded-attributes"><span class="std std-ref">Parsing graphic attributes using miscellaneous cascaded attributes</span></a>.) Save relevant values to your export structure.</p></li>
<li><p>Declare and initialize an <code class="docutils literal notranslate"><span class="pre">A3DAsmProductOccurrenceData</span></code> structure.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DAsmProductOccurrenceData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Get the product occurrence data by invoking the <code class="docutils literal notranslate"><span class="pre">A3DAsmProductOccurrenceGet</span></code> function.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DAsmProductOccurrenceGet</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Parse the product occurrence data to identify subordinate or imported product occurrences and recursively parse the contents of each, as described in <a class="reference internal" href="#parse-a-product-occurrence"><span class="std std-ref">Parse a product occurrence</span></a> (this section). The member names and their significance are described below:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_pPrototype</span></code> : Pointer to a product occurrence prototype, which typically represents a subassembly or part</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_pExternalData</span></code> : Pointer to an external product occurrence</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_uiPOccurrencesSize</span></code> : Number of child product occurrences, where the <code class="docutils literal notranslate"><span class="pre">m_ppPOccurrences</span></code> array references those child product occurrences</p></li>
</ul>
</li>
</ol>
<p>The following example parses prototype or external product occurrences. The <code class="docutils literal notranslate"><span class="pre">sData</span></code> variable is a populated <code class="docutils literal notranslate"><span class="pre">A3DAsmProductOccurrenceData</span></code> structure.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">sData</span><span class="o">.</span><span class="n">m_pPrototype</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">parsePOccurrence</span><span class="p">(</span><span class="n">sData</span><span class="o">.</span><span class="n">m_pPrototype</span><span class="p">,</span> <span class="n">pAttr</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="n">sData</span><span class="o">.</span><span class="n">m_pExternalData</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">parsePOccurrence</span><span class="p">(</span><span class="n">sData</span><span class="o">.</span><span class="n">m_pExternalData</span><span class="p">,</span> <span class="n">pAttr</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The following example parses child product occurrences (<code class="docutils literal notranslate"><span class="pre">sData.ppPOccurrences[ui]</span></code>. As before, the <code class="docutils literal notranslate"><span class="pre">sdata</span></code> variable is a populated <code class="docutils literal notranslate"><span class="pre">A3DAsmProductOccurrenceData</span></code> structure.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="p">(</span><span class="n">ASUns32</span> <span class="n">ui</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">ui</span> <span class="o">&lt;</span> <span class="n">sData</span><span class="o">.</span><span class="n">m_uiPOccurrencesSize</span><span class="p">;</span> <span class="n">ui</span><span class="o">++</span><span class="p">)</span>
  <span class="n">parsePOccurrence</span><span class="p">(</span><span class="n">sData</span><span class="o">.</span><span class="n">m_ppPOccurrences</span><span class="p">[</span><span class="n">ui</span><span class="p">],</span> <span class="n">pAttr</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>If the product occurrence data references a part (<code class="docutils literal notranslate"><span class="pre">sData.m_pPart</span></code> ), parse it. (See <a class="reference internal" href="#parse-a-product-occurrence"><span class="std std-ref">Parse a product occurrence</span></a>.)</p></li>
<li><p>Parse any scene display parameters in the product occurrence.</p></li>
<li><p>Delete the <code class="docutils literal notranslate"><span class="pre">A3DAsmProductOccurrenceData</span></code> structure created in Step <cite>Declare and initialize an ``A3DAsmProductOccurrenceData`</cite> structure. &lt;Plugins_A3D_API.html#50618396_31716&gt;`__ by invoking the <code class="docutils literal notranslate"><span class="pre">A3DAsmProductOccurrenceGet</span></code> function with the first argument set to <code class="docutils literal notranslate"><span class="pre">NULL</span></code> and the second argument pointing to the product occurrence data.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DAsmProductOccurrenceGet</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="parse-a-part-definition">
<span id="id18"></span><h4>Parse a part definition<a class="headerlink" href="#parse-a-part-definition" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Parse the entity base, saving the entity name and other relevant data to your export structure. (See <a class="reference external" href="Plugins_A3D_API.html#50618396_60919">Parsing root-base entity data</a>.)</p></li>
<li><p>Create and push a cascaded attributes structure for a product occurrence object, and push that structure onto the stack. (See <a class="reference internal" href="#parsing-graphic-attributes-using-miscellaneous-cascaded-attributes"><span class="std std-ref">Parsing graphic attributes using miscellaneous cascaded attributes</span></a>.) Record information from the data structure of the miscellaneous cascaded attributes structure that is meaningful to your representation.</p></li>
<li><p>Declare and initialize an <code class="docutils literal notranslate"><span class="pre">A3DAsmPartDefinitionData</span></code> structure, as shown in the following example:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DAsmPartDefinitionData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
<span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DAsmPartDefinitionGet</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Parse each representation item referenced by the part definition (See <a class="reference internal" href="#parsing-representation-items"><span class="std std-ref">Parsing representation items</span></a>.) In the following example, <code class="docutils literal notranslate"><span class="pre">sData.m_uiRepItemsSize</span></code> is the number of representation item entities in the part definition, and entry in the <code class="docutils literal notranslate"><span class="pre">sData.m_ppRepItems[ui]</span></code> array references a separate representation item.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="p">(</span><span class="n">ASUns32</span> <span class="n">ui</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">ui</span> <span class="o">&lt;</span> <span class="n">sData</span><span class="o">.</span><span class="n">m_uiRepItemsSize</span><span class="p">;</span> <span class="n">ui</span><span class="o">++</span><span class="p">)</span>
  <span class="n">parseRI</span><span class="p">(</span><span class="n">sData</span><span class="o">.</span><span class="n">m_ppRepItems</span><span class="p">[</span><span class="n">ui</span><span class="p">],</span> <span class="n">pAttr</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Delete the <code class="docutils literal notranslate"><span class="pre">A3DAsmPartDefinitionData</span></code> structure created in Step <cite>Declare and initialize an ``A3DAsmPartDefinitionData`</cite> structure, as shown in the following example: &lt;Plugins_A3D_API.html#50618396_28760&gt;`__ by invoking the <code class="docutils literal notranslate"><span class="pre">A3DAsmPartDefinitionGet</span></code> function with the first argument set to <code class="docutils literal notranslate"><span class="pre">NULL</span></code> and the second argument pointing to the part definition data.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DAsmPartDefinitionGet</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="parsing-representation-items">
<span id="id19"></span><h4>Parsing representation items<a class="headerlink" href="#parsing-representation-items" title="Permalink to this headline">¶</a></h4>
<p>Representation items describe objects present in the 3D image, such as a wheel or a bolt. The exception is the representation item set (type <code class="docutils literal notranslate"><span class="pre">kA3DTypeRiSet</span></code> ), which is a container for other representation items.</p>
<p id="parsegeneric">Parse a generic representation item</p>
<ol class="arabic simple">
<li><p>Parse the entity base, saving the entity name and other relevant data to your export structure. (See <a class="reference external" href="Plugins_A3D_API.html#50618396_60919">Parsing root-base entity data</a>.)</p></li>
<li><p>Create and push a miscellaneous cascaded attributes structure for the representation item, and then get the data for that structure (See <a class="reference internal" href="#parsing-prc-entities-that-specify-graphics"><span class="std std-ref">Parsing PRC entities that specify graphics</span></a>.) Record information from the miscellaneous cascaded attributes data structure that is meaningful to your representation.</p></li>
<li><p>Invoke the <code class="docutils literal notranslate"><span class="pre">A3DEntityGetType</span></code> function to determine the type of representation item, providing the following arguments:</p>
<ul class="simple">
<li><p>The first argument (<code class="docutils literal notranslate"><span class="pre">p</span></code> in the following example) is a pointer to the representation item.</p></li>
<li><p>The second argument (<code class="docutils literal notranslate"><span class="pre">eType</span></code> in the following example) is a pointer to a variable in which the function stores the type enumerator.</p></li>
</ul>
</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DEEntityType</span> <span class="n">eType</span><span class="p">;</span>
 <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DEntityGetType</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">eType</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Parse the representation item depending on the type of representation item, as shown in the following example. (See Parse a representation item set (PRC entity A3DRiSet)  or Parse a Brep model representation item (PRC entity A3DRiBrepModel).)</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>switch(eType) {
case kA3DTypeRiBrepModel:
  parseRiBrepModel(p, father);
  break;
case kA3DTypeRiSet:
  …
  break;
case kA3DTypeRiPointSet:
  …
  break;
…
default:
  …
}
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Get the representation item attributes by invoking the <code class="docutils literal notranslate"><span class="pre">A3DRiRepresentationItemGet</span></code> function.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DRiRepresentationItemData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
<span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DRiRepresentationItemGet</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>Parse the tessellation base data referenced by the <code class="docutils literal notranslate"><span class="pre">m_pTessBase</span></code> member. (See <a class="reference internal" href="#parsing-tessellation-prc-entities"><span class="std std-ref">Parsing tessellation PRC entities</span></a>.)</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">parseTess</span><span class="p">(</span><span class="n">sData</span><span class="o">.</span><span class="n">m_pTessBase</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">pAttr</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li><p>Parse the coordinate system referenced by the <code class="docutils literal notranslate"><span class="pre">m_pCoordinateSystem</span></code> member. (See <a class="reference internal" href="#parse-coordinate-system-data"><span class="std std-ref">Parse coordinate system data</span></a>.)</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">parseRiCSys</span><span class="p">(</span><span class="n">sData</span><span class="o">.</span><span class="n">m_pCoordinateSystem</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="8">
<li><p>Delete the <code class="docutils literal notranslate"><span class="pre">A3DRiRepresentationItemData</span></code> created in Step <cite>Get the representation item attributes by invoking the ``A3DRiRepresentationItemGet`</cite> function. &lt;Plugins_A3D_API.html#50618396_17261&gt;`__ by invoking the <code class="docutils literal notranslate"><span class="pre">A3DRiRepresentationItemGet</span></code> function with the first argument set to <code class="docutils literal notranslate"><span class="pre">NULL</span></code> and the second argument set to the location of the structure (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example).</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DRiRepresentationItemGet</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="parse-a-representation-item-set-prc-entity-a3driset">
<span id="id20"></span><h4>Parse a representation item set (PRC entity A3DRiSet)<a class="headerlink" href="#parse-a-representation-item-set-prc-entity-a3driset" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Parse the entity base. (See <a class="reference external" href="Plugins_A3D_API.html#50618396_60919">Parsing root-base entity data</a>.) Save the entity name and other relevant data to your export structure.</p></li>
<li><p>Create and push a cascaded attributes structure for a product occurrence object, and push that structure onto the stack. (See <a class="reference internal" href="#parsing-graphic-attributes-using-miscellaneous-cascaded-attributes"><span class="std std-ref">Parsing graphic attributes using miscellaneous cascaded attributes</span></a>.) Save relevant values to your export structure.</p></li>
<li><p>Declare and initialize an <code class="docutils literal notranslate"><span class="pre">A3DRiSetData</span></code> structure, and then get the data from the representation PRC entity.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DRiSetData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
<span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DRiSetGet</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Parse each representation item in the representation item set. (See <span class="xref std std-ref">Parsegeneric</span>.) The <code class="docutils literal notranslate"><span class="pre">m_uiRepItemsSize</span></code> field specifies the number of child representation items, and the m_ppRepItems[] field is an array of pointers to the child representation items.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="p">(</span><span class="n">ASUns32</span> <span class="n">ui</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">ui</span><span class="o">&lt;</span><span class="n">sData</span><span class="o">.</span><span class="n">m_uiRepItemsSize</span><span class="p">;</span> <span class="n">ui</span><span class="o">++</span><span class="p">)</span>
  <span class="n">parseRI</span><span class="p">(</span><span class="n">sData</span><span class="o">.</span><span class="n">m_ppRepItems</span><span class="p">[</span><span class="n">ui</span><span class="p">],</span> <span class="n">pAttr</span><span class="p">,</span> <span class="n">son</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Delete the A3DRiSetGet function created in Step <cite>Declare and initialize an ``A3DAsmPartDefinitionData`</cite> structure, as shown in the following example: &lt;Plugins_A3D_API.html#50618396_28760&gt;`__ by invoking the <code class="docutils literal notranslate"><span class="pre">A3DAsmPartDefinitionGet</span></code> function with the first argument set to <code class="docutils literal notranslate"><span class="pre">NULL</span></code> and the second argument pointing to the part definition data.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DRiSetGet</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="parse-a-brep-model-representation-item-prc-entity-a3dribrepmodel">
<span id="id21"></span><h4>Parse a Brep model representation item (PRC entity A3DRiBrepModel)<a class="headerlink" href="#parse-a-brep-model-representation-item-prc-entity-a3dribrepmodel" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Parse the entity base. (See <a class="reference external" href="Plugins_A3D_API.html#50618396_60919">Parsing root-base entity data</a>.) Save the entity name and other relevant data to your export structure.</p></li>
<li><p>Get the Brep model data by invoking the <code class="docutils literal notranslate"><span class="pre">A3DRiBrepModelGet</span></code> function. The first argument (<code class="docutils literal notranslate"><span class="pre">p</span></code> in the following example) is a pointer to the PRC entity, and the second argument (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example) is the location of the <code class="docutils literal notranslate"><span class="pre">A3DRiBrepModelData</span></code> structure.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DRiBrepModelData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
<span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DRiBrepModelGet</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Parse the Brep model’s topology body data, referenced by the <code class="docutils literal notranslate"><span class="pre">m_pBrepData</span></code> member. (See <a class="reference internal" href="#parse-topology-body-data"><span class="std std-ref">Parse topology body data</span></a>.)</p></li>
<li><p>Parse the Brep model’s data, referenced by the <code class="docutils literal notranslate"><span class="pre">m_pBrepData</span></code> member. (See <a class="reference external" href="Plugins_A3D_API.html#50618396_73034">Parse the Brep model’s data</a>.)</p></li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The same member (<code class="docutils literal notranslate"><span class="pre">m_pBrepData</span></code> ) is used to parse topology body data and topology model data. The Brep model’s topology body data is recast as the <code class="docutils literal notranslate"><span class="pre">A3DTopoBody</span></code> type, which is an abstract root type for any topological body. The <code class="docutils literal notranslate"><span class="pre">A3DTopoBodyGet</span></code> function takes an argument of type <code class="docutils literal notranslate"><span class="pre">A3DTopoBody</span></code>.</p>
</div>
<ol class="arabic simple">
<li><p>Delete the <code class="docutils literal notranslate"><span class="pre">A3DRiBrepModelData</span></code> created in Step <cite>Get the Brep model data by invoking the ``A3DRiBrepModelGet`</cite> function. The first argument (<code class="docutils literal notranslate"><span class="pre">p</span></code> in the following example) is a pointer to the PRC entity, and the second argument (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example) is the location of the <code class="docutils literal notranslate"><span class="pre">A3DRiBrepModelData</span></code> structure. &lt;Plugins_A3D_API.html#50618396_45175&gt;`__ by invoking the <code class="docutils literal notranslate"><span class="pre">A3DRiBrepModelGet</span></code> function with the first argument set to <code class="docutils literal notranslate"><span class="pre">NULL</span></code> and the second argument set to the location of the structure (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example).</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DRiBrepModelGet</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="parse-coordinate-system-data">
<span id="id22"></span><h4>Parse coordinate system data<a class="headerlink" href="#parse-coordinate-system-data" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Parse the entity base. (See <a class="reference external" href="Plugins_A3D_API.html#50618396_60919">Parsing root-base entity data</a>.) Save the entity name and other relevant data to your export structure.</p></li>
<li><p>Declare and initialize an <code class="docutils literal notranslate"><span class="pre">A3DRiCoordinateSystemData</span></code> structure.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DRiCoordinateSystemData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Get the coordinate system data by invoking the <code class="docutils literal notranslate"><span class="pre">A3DRiCoordinateSystemGet</span></code> function. The first argument (<code class="docutils literal notranslate"><span class="pre">p</span></code> in the following example) is a pointer to the <code class="docutils literal notranslate"><span class="pre">A3DRiCoordinateSystem</span></code> entity, and the second argument (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example) is the location of the <code class="docutils literal notranslate"><span class="pre">A3DRiCoordinateSystemData</span></code> structure.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DRiCoordinateSystemGet</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Parse the coordinate system transformation data referenced by the <code class="docutils literal notranslate"><span class="pre">m_pTransformation</span></code> member of the <code class="docutils literal notranslate"><span class="pre">A3DRiCoordinateSystemData</span></code> structure.</p></li>
<li><p>Delete the <code class="docutils literal notranslate"><span class="pre">A3DRiCoordinateSystemData</span></code> structure created in Step <cite>Declare and initialize an ``A3DRiCoordinateSystemData`</cite> structure. &lt;Plugins_A3D_API.html#50618396_58902&gt;`__ by invoking the <code class="docutils literal notranslate"><span class="pre">A3DRiCoordinateSystemGet</span></code> function with the first argument set to <code class="docutils literal notranslate"><span class="pre">NULL</span></code> and the second argument set to the location of the structure (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example).</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DRiCoordinateSystemGet</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="parsing-tessellation-prc-entities">
<span id="id23"></span><h3>Parsing tessellation PRC entities<a class="headerlink" href="#parsing-tessellation-prc-entities" title="Permalink to this headline">¶</a></h3>
<p>Tessellation entities represent polygon facets.</p>
<div class="section" id="parse-tessellation-base-data">
<span id="id24"></span><h4>Parse tessellation base data<a class="headerlink" href="#parse-tessellation-base-data" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Parse the entity base. (See <a class="reference external" href="Plugins_A3D_API.html#50618396_60919">Parsing root-base entity data</a>.) Save the entity name and other relevant data to your export structure.</p></li>
<li><p>Populate an <code class="docutils literal notranslate"><span class="pre">A3DTessBaseData</span></code> structure with the tessellation base data by invoking the <code class="docutils literal notranslate"><span class="pre">A3DTessBaseGet</span></code> function. The first argument (<code class="docutils literal notranslate"><span class="pre">p</span></code> in the following example) is a pointer to the tessellation base data, and the second argument (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example) is the location of the <code class="docutils literal notranslate"><span class="pre">A3DTessBaseData</span></code> structure.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTessBaseData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
<span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DTessBaseGet</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Export the coordinate size (sData.m_uiCoordSize), the coordinates array (sData.m_pdCoords), and the calculate attributes (<code class="docutils literal notranslate"><span class="pre">sData.m_bIsCalculated</span></code> ) to your tessellation base data element.</p></li>
<li><p>Parse the tessellation data based on its type. The PRC format defines these types for tessellation data:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">kA3DTypeTess3D</span></code>, which is used for solids and surfaces (See <a class="reference internal" href="#parse-3d-tessellation-data"><span class="std std-ref">Parse 3D tessellation data</span></a>.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kA3DTypeTess3DWire</span></code>, which is used for 3D wireframes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kA3DTypeTessMarkup</span></code>, which is used for markups</p></li>
</ul>
</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DEEntityType</span> <span class="n">eType</span><span class="p">;</span>
<span class="n">ASInt32</span> <span class="n">iErr</span> <span class="o">=</span> <span class="n">A3DEntityGetType</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">eType</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">iErr</span> <span class="o">==</span> <span class="n">A3D_SUCCESS</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">switch</span><span class="p">(</span><span class="n">eType</span><span class="p">)</span> <span class="p">{</span>
<span class="n">case</span> <span class="n">kA3DTypeTess3D</span><span class="p">:</span>
  <span class="n">parse3DTess</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">pRepItem</span><span class="p">,</span> <span class="n">pFatherAttr</span><span class="p">);</span>
  <span class="k">break</span><span class="p">;</span>
<span class="n">case</span> <span class="n">kA3DTypeTess3DWire</span><span class="p">:</span>
  <span class="n">parse3DWireTess</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
  <span class="k">break</span><span class="p">;</span>
<span class="n">case</span> <span class="n">kA3DTypeTessMarkup</span><span class="p">:</span>
  <span class="n">parse3DTessMarkup</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
  <span class="k">break</span><span class="p">;</span>
<span class="n">default</span><span class="p">:</span>
  <span class="o">//</span> <span class="n">error</span> <span class="n">response</span><span class="o">.</span>
<span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Delete the A3DTessBaseData created in Step <cite>Populate an ``A3DTessBaseData`</cite> structure with the tessellation base data by invoking the <code class="docutils literal notranslate"><span class="pre">A3DTessBaseGet</span></code> function. The first argument (<code class="docutils literal notranslate"><span class="pre">p</span></code> in the following example) is a pointer to the tessellation base data, and the second argument (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example) is the location of the <code class="docutils literal notranslate"><span class="pre">A3DTessBaseData</span></code> structure. &lt;Plugins_A3D_API.html#50618396_69214&gt;`__ by invoking the <code class="docutils literal notranslate"><span class="pre">A3DRiBrepModelGet</span></code> function with the first argument set to <code class="docutils literal notranslate"><span class="pre">NULL</span></code> and the second argument set to the location of the structure (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example).</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTessBaseGet</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="parse-3d-tessellation-data">
<span id="id25"></span><h4>Parse 3D tessellation data<a class="headerlink" href="#parse-3d-tessellation-data" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Parse the entity base. (See <a class="reference external" href="Plugins_A3D_API.html#50618396_60919">Parsing root-base entity data</a>.) Save the entity name and other relevant data to your export structure.</p></li>
<li><p>Populate an <code class="docutils literal notranslate"><span class="pre">A3DTess3DData</span></code> structure with the tessellation data by invoking the <code class="docutils literal notranslate"><span class="pre">A3DTess3DGet</span></code> function.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTess3DData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
<span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DTess3DGet</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Represent relevant data from the 3D tessellation data element in your export structure.</p></li>
<li><p>For each face in the tessellation data, create and push the cascaded attributes face data and then access its data members. (See <a class="reference internal" href="#parsing-graphic-attributes-using-miscellaneous-cascaded-attributes"><span class="std std-ref">Parsing graphic attributes using miscellaneous cascaded attributes</span></a>.) In the following example, the <code class="docutils literal notranslate"><span class="pre">CreateAndPushCascadedAttributesFace</span></code> is a private function that pushes the miscellaneous cascaded attributes for a tessellation face onto the stack.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ASUns32</span> <span class="n">uiNumberOfFaces</span> <span class="o">=</span> <span class="n">sData</span><span class="o">.</span><span class="n">m_uiFaceTessSize</span><span class="p">;</span>

<span class="k">for</span> <span class="p">(</span><span class="n">ASUns32</span> <span class="n">ui</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">ui</span> <span class="o">&lt;</span> <span class="n">uiNumberOfFaces</span><span class="p">;</span> <span class="n">ui</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">A3DTessFaceData</span><span class="o">&amp;</span> <span class="n">sTessFaceData</span> <span class="o">=</span> <span class="n">sData</span><span class="o">.</span><span class="n">m_psFaceTessData</span><span class="p">[</span><span class="n">ui</span><span class="p">];</span>

  <span class="n">A3DMiscCascadedAttributes</span><span class="o">*</span> <span class="n">pAttr</span><span class="p">;</span>
  <span class="n">A3DMiscCascadedAttributesData</span> <span class="n">sAttrData</span><span class="p">;</span>
  <span class="o">//</span> <span class="n">Read</span> <span class="n">CascadedAttributes</span> <span class="k">for</span> <span class="n">one</span> <span class="n">of</span> <span class="n">the</span> <span class="n">facec</span>
  <span class="n">CreateAndPushCascadedAttributesFace</span><span class="p">(</span><span class="n">pRepItem</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sTessFaceData</span><span class="p">,</span>
      <span class="n">ui</span><span class="p">,</span> <span class="n">pFatherAttr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pAttr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sAttrData</span><span class="p">);</span>

  <span class="n">A3DMiscCascadedAttributesDelete</span><span class="p">(</span><span class="n">pAttr</span><span class="p">);</span>
  <span class="n">A3DMiscCascadedAttributesGet</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sAttrData</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Delete the cascaded attributes data structure.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DMiscCascadedAttributesDelete</span><span class="p">(</span><span class="n">pAttr</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>Delete the cascaded attributes structure.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DMiscCascadedAttributesGet</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sAttrData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li><p>Delete the <code class="docutils literal notranslate"><span class="pre">A3DTess3DData</span></code> structure created in Step <cite>Populate an ``A3DTess3DData`</cite> structure with the tessellation data by invoking the <code class="docutils literal notranslate"><span class="pre">A3DTess3DGet</span></code> function. &lt;Plugins_A3D_API.html#50618396_64792&gt;`__.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTess3DGet</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="parsing-topology-prc-entities">
<span id="id26"></span><h3>Parsing topology PRC entities<a class="headerlink" href="#parsing-topology-prc-entities" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="./API_References/PRCReference/3D_API_Reference/index.html">Acrobat 3D API Reference</a> groups the PRC entities that specify topology into the topology module. The PRC entities in this module specify the surfaces of 3D objects. This section describes how to parse the topology data in a Brep model.</p>
<p>Topology data in a Brep model contains data specific to the Brep and data that is generic to topology models.</p>
<p><strong>Data specific to Brep topology models</strong></p>
<p>The following entities contain the geometric data that represents the Brep data:</p>
<ul class="simple">
<li><p>Topology Brep data: A topological boundary representation comprised of a bounding box and references to multiple Connex entities (See <a class="reference internal" href="#create-a-topology-brep-data-entity"><span class="std std-ref">Create a topology Brep data entity</span></a>.)</p></li>
<li><p>Connex: A collection of shell entities, such as a hollow sphere that contains another sphere that is represented by two connexes (See <a class="reference internal" href="#parse-connex-data"><span class="std std-ref">Parse Connex data</span></a>.)</p></li>
<li><p>Shell: A collection of face entities (See <a class="reference internal" href="#parse-a-shell-entity"><span class="std std-ref">Parse a shell entity</span></a>.)</p></li>
<li><p>Face: A surface and a collection of loops (See <a class="reference external" href="Plugins_A3D_API.html#50618396_89218">Parse the face’s surface data</a>.)</p></li>
</ul>
<p><strong>Data general to all topology models</strong></p>
<p>The following entities contain data that applies to any topology model:</p>
<p><strong>Topology body data:</strong> A mask indicating the source of the bounding box (See <a class="reference internal" href="#parse-topology-body-data"><span class="std std-ref">Parse topology body data</span></a>.)</p>
<p><strong>Topology context:</strong> A mask indicating the behavior of the topology context (See <a class="reference internal" href="#parse-topology-context-data"><span class="std std-ref">Parse topology context data</span></a>.)</p>
<div class="section" id="parse-topology-body-data">
<span id="id27"></span><h4>Parse topology body data<a class="headerlink" href="#parse-topology-body-data" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Parse the entity base. (See <a class="reference external" href="Plugins_A3D_API.html#50618396_60919">Parsing root-base entity data</a>.) Save the entity name and other relevant data to your export structure.</p></li>
<li><p>Get the topology body data by invoking the <code class="docutils literal notranslate"><span class="pre">A3DTopoBodyGet</span></code> function. The first argument (<code class="docutils literal notranslate"><span class="pre">p</span></code> in the following example) is a pointer to the Brep model’s topology body data, and the second argument (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example) is the location of the <code class="docutils literal notranslate"><span class="pre">A3DTopoBodyData</span></code> structure.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoBodyData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
<span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DTopoBodyGet</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Parse the context of the topology body context data, referenced by the <code class="docutils literal notranslate"><span class="pre">m_pContext</span></code> member. (See <a class="reference internal" href="#parse-topology-context-data"><span class="std std-ref">Parse topology context data</span></a>.)</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">parseContext</span><span class="p">(</span><span class="n">sData</span><span class="o">.</span><span class="n">m_pContext</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Delete the <code class="docutils literal notranslate"><span class="pre">A3DTopoBodyData</span></code> structure created in Step <cite>Get the topology body data by invoking the ``A3DTopoBodyGet`</cite> function. The first argument (<code class="docutils literal notranslate"><span class="pre">p</span></code> in the following example) is a pointer to the Brep model’s topology body data, and the second argument (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example) is the location of the <code class="docutils literal notranslate"><span class="pre">A3DTopoBodyData</span></code> structure. &lt;Plugins_A3D_API.html#50618396_67857&gt;`__, by invoking the <code class="docutils literal notranslate"><span class="pre">A3DTopoBodyGet</span></code> function with the first argument set to <code class="docutils literal notranslate"><span class="pre">NULL</span></code> and the second argument set to the location of the structure (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example).</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoBodyGet</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="parse-topology-context-data">
<span id="id28"></span><h4>Parse topology context data<a class="headerlink" href="#parse-topology-context-data" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Parse the entity base. (See <a class="reference external" href="Plugins_A3D_API.html#50618396_60919">Parsing root-base entity data</a>.) Save the entity name and other relevant data to your export structure.</p></li>
<li><p>Get the data in the topology context data by invoking the <code class="docutils literal notranslate"><span class="pre">A3DTopoContextGet</span></code> function. The first argument (<code class="docutils literal notranslate"><span class="pre">p</span></code> in the following example) is a pointer to the topology context data, and the second argument (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example) is the location of the <code class="docutils literal notranslate"><span class="pre">A3DTopoContextData</span></code> structure.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoContextData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
<span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DTopoContextGet</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>If you plan to evaluate graphic data relative to the current surface, save the Body Scale for use in scaling the face’s surface data to fit the Nurbs surface. (See <a class="reference external" href="Plugins_A3D_API.html#50618396_89218">Parse the face’s surface data</a>.) Body scale has no particular meaning for Nurb data conversion and can be called only on specific surface types.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">stdContextScale</span> <span class="o">=</span> <span class="n">sData</span><span class="o">.</span><span class="n">m_dScale</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Delete the <code class="docutils literal notranslate"><span class="pre">A3DTopoContextData</span></code> structure, created in Step <cite>Get the data in the topology context data by invoking the ``A3DTopoContextGet`</cite> function. The first argument (<code class="docutils literal notranslate"><span class="pre">p</span></code> in the following example) is a pointer to the topology context data, and the second argument (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example) is the location of the <code class="docutils literal notranslate"><span class="pre">A3DTopoContextData</span></code> structure. &lt;Plugins_A3D_API.html#50618396_30926&gt;`__, by invoking the <code class="docutils literal notranslate"><span class="pre">A3DTopoContextGet</span></code> function with the first argument set to <code class="docutils literal notranslate"><span class="pre">NULL</span></code> and the second argument set to the location of the structure (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example).</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoContextGet</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="parse-the-brep-model-s-data">
<span id="id29"></span><h4>Parse the Brep model’s data<a class="headerlink" href="#parse-the-brep-model-s-data" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Parse the entity base. (See <a class="reference external" href="Plugins_A3D_API.html#50618396_60919">Parsing root-base entity data</a>.) Save the entity name and other relevant data to your export structure.</p></li>
<li><p>Get the data in the Brep model by invoking the A3DTopoBrepDataGet function. The first argument (<code class="docutils literal notranslate"><span class="pre">p</span></code> in the following example) is a pointer to the Brep model’s data, and the second argument (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example) is the location of the <code class="docutils literal notranslate"><span class="pre">A3DBrepDataData</span></code> structure.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoBrepDataData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
<span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DTopoBrepDataGet</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>The Brep data can reference Connex entities. The <code class="docutils literal notranslate"><span class="pre">m_uiConnexSize</span></code> member indicates the number of such references, and the m_ppConnexes[] member provides the references. Parse each Connex entry. (See <a class="reference internal" href="#parse-connex-data"><span class="std std-ref">Parse Connex data</span></a>.)</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="p">(</span><span class="n">ASUns32</span> <span class="n">ui</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">ui</span> <span class="o">&lt;</span> <span class="n">sData</span><span class="o">.</span><span class="n">m_uiConnexSize</span><span class="p">;</span> <span class="n">ui</span><span class="o">++</span><span class="p">)</span>
  <span class="n">parseConnex</span><span class="p">(</span><span class="n">sData</span><span class="o">.</span><span class="n">m_ppConnexes</span><span class="p">[</span><span class="n">ui</span><span class="p">]);</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Save the bounding box referenced by <code class="docutils literal notranslate"><span class="pre">m_sBoundingBox</span></code> as an attribute of the Brep data element in your export structure.</p></li>
<li><p>Delete the <code class="docutils literal notranslate"><span class="pre">A3DTopoBrepDataData</span></code> structure, created in Step <cite>Get the data in the Brep model by invoking the A3DTopoBrepDataGet function. The first argument (``p`</cite> in the following example) is a pointer to the Brep model’s data, and the second argument (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example) is the location of the <code class="docutils literal notranslate"><span class="pre">A3DBrepDataData</span></code> structure. &lt;Plugins_A3D_API.html#50618396_62843&gt;`__, by invoking the <code class="docutils literal notranslate"><span class="pre">A3DTopoBrepDataGet</span></code> function with the first argument set to <code class="docutils literal notranslate"><span class="pre">NULL</span></code> and the second argument set to the location of the structure (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example).</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoBrepDataGet</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="parse-connex-data">
<span id="id30"></span><h4>Parse Connex data<a class="headerlink" href="#parse-connex-data" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Parse the entity base. (See <a class="reference external" href="Plugins_A3D_API.html#50618396_60919">Parsing root-base entity data</a>.) Save the entity name and other relevant data to your export structure.</p></li>
<li><p>Get the data in the Brep model by invoking the A3DTopoConnexGet function. The first argument (<code class="docutils literal notranslate"><span class="pre">p</span></code> in the following example) is a pointer to the Connex entity, and the second argument (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example) is the location of the <code class="docutils literal notranslate"><span class="pre">A3DTopoConnexData</span></code> structure.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoConnexData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
<span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DTopoConnexGet</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>The Connex data can reference multiple Shell entities. The <code class="docutils literal notranslate"><span class="pre">m_uiShellSize</span></code> member indicates the number of such references, and the m_ppShells[] member provides the references. Parse each Shell entity. (See <a class="reference internal" href="#parse-a-shell-entity"><span class="std std-ref">Parse a shell entity</span></a>.)</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="p">(</span><span class="n">ASUns32</span> <span class="n">ui</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">ui</span> <span class="o">&lt;</span> <span class="n">sData</span><span class="o">.</span><span class="n">m_uiShellSize</span><span class="p">;</span> <span class="n">ui</span><span class="o">++</span><span class="p">)</span>
  <span class="n">parseShell</span><span class="p">(</span><span class="n">sData</span><span class="o">.</span><span class="n">m_ppShells</span><span class="p">[</span><span class="n">ui</span><span class="p">]);</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Delete the <code class="docutils literal notranslate"><span class="pre">A3DTopoConnexData</span></code> structure, created in Step <cite>Get the data in the Brep model by invoking the A3DTopoConnexGet function. The first argument (``p`</cite> in the following example) is a pointer to the Connex entity, and the second argument (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example) is the location of the <code class="docutils literal notranslate"><span class="pre">A3DTopoConnexData</span></code> structure. &lt;Plugins_A3D_API.html#50618396_62700&gt;`__, by invoking the <code class="docutils literal notranslate"><span class="pre">A3DTopoConnexGet</span></code> function with the first argument set to <code class="docutils literal notranslate"><span class="pre">NULL</span></code> and the second argument set to the location of the structure (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example).</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoConnexGet</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="parse-a-shell-entity">
<span id="id31"></span><h4>Parse a shell entity<a class="headerlink" href="#parse-a-shell-entity" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Parse the entity base. (See <a class="reference external" href="Plugins_A3D_API.html#50618396_60919">Parsing root-base entity data</a>.) Save the entity name and other relevant data to your export structure.</p></li>
<li><p>Get the data in the topology shell entity by invoking the A3DTopoShellGet function. The first argument (<code class="docutils literal notranslate"><span class="pre">p</span></code> in the following example) is a pointer to the topology shell entity, and the second argument (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example) is the location of the <code class="docutils literal notranslate"><span class="pre">A3DTopoShellData</span></code> structure.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoShellData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
<span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DTopoShellGet</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>The shell data can reference multiple face entities. The <code class="docutils literal notranslate"><span class="pre">m_uiFaceSize</span></code> member indicates the number of such references, and the m_ppFaces[] member provides the references. Parse each face entity, as described in <a class="reference external" href="Plugins_A3D_API.html#50618396_89218">Parse the face’s surface data</a>. [</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="p">(</span><span class="n">ASUns32</span> <span class="n">ui</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">ui</span> <span class="o">&lt;</span> <span class="n">sData</span><span class="o">.</span><span class="n">m_uiFaceSize</span><span class="p">;</span> <span class="n">ui</span><span class="o">++</span><span class="p">)</span>
  <span class="n">parseFace</span><span class="p">(</span><span class="n">ui</span><span class="p">,</span> <span class="n">sData</span><span class="o">.</span><span class="n">m_ppFaces</span><span class="p">[</span><span class="n">ui</span><span class="p">]);</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Save the closed indicator (the <code class="docutils literal notranslate"><span class="pre">m_bClosed</span></code> member) and the orientation of the surface normal with respect to the shell normal (the <code class="docutils literal notranslate"><span class="pre">m_pucOrientationWithShell</span></code> member) as attributes in the shell element in your export structure.</p></li>
<li><p>Delete the <code class="docutils literal notranslate"><span class="pre">A3DTopoShellData</span></code> structure, created in Step <cite>Get the data in the topology shell entity by invoking the A3DTopoShellGet function. The first argument (``p`</cite> in the following example) is a pointer to the topology shell entity, and the second argument (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example) is the location of the <code class="docutils literal notranslate"><span class="pre">A3DTopoShellData</span></code> structure. &lt;Plugins_A3D_API.html#50618396_30248&gt;`__, by invoking the <code class="docutils literal notranslate"><span class="pre">A3DTopoShellGet</span></code> function with the first argument set to <code class="docutils literal notranslate"><span class="pre">NULL</span></code> and the second argument set to the location of the structure (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example).</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoShellGet</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="parse-the-face-s-surface-data">
<span id="id32"></span><h4>Parse the face’s surface data<a class="headerlink" href="#parse-the-face-s-surface-data" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Parse the entity base. (See <a class="reference external" href="Plugins_A3D_API.html#50618396_60919">Parsing root-base entity data</a>.) Save the entity name and other relevant data to your export structure.</p></li>
<li><p>Get the data in the topology face entity by invoking the A3DTopoFaceGet function. The first argument (<code class="docutils literal notranslate"><span class="pre">p</span></code> in the following example) is a pointer to the topology face entity, and the second argument (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example) is the location of the <code class="docutils literal notranslate"><span class="pre">A3DTopoFaceData</span></code> structure.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoFaceData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
<span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DTopoFaceGet</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Parse the surface data referenced by the <code class="docutils literal notranslate"><span class="pre">m_pSurface</span></code> member in the <code class="docutils literal notranslate"><span class="pre">A3DTopoFaceData</span></code> structure. (See <a class="reference internal" href="#parse-generic-surface-data"><span class="std std-ref">Parse generic surface data</span></a>.)</p></li>
<li><p>If you are converting the PRC data to a 3D model that does not support UV mapping, you must create a curve on surfaceto editors: this is a standard graphic term and convert it to Nurbs data. (See <a class="reference external" href="Plugins_A3D_API.html#50618396_69663">Convert surface data to Nurbs (for other than UV-mapped surfaces)</a>.)</p></li>
<li><p>Delete the <code class="docutils literal notranslate"><span class="pre">A3DTopoFaceData</span></code> structure created in Step <cite>Get the data in the topology face entity by invoking the A3DTopoFaceGet function. The first argument (``p`</cite> in the following example) is a pointer to the topology face entity, and the second argument (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example) is the location of the <code class="docutils literal notranslate"><span class="pre">A3DTopoFaceData</span></code> structure. &lt;Plugins_A3D_API.html#50618396_74067&gt;`__ by invoking the <code class="docutils literal notranslate"><span class="pre">A3DTopoFaceGet</span></code> function with the first argument set to <code class="docutils literal notranslate"><span class="pre">NULL</span></code> and the second argument set to the location of the structure (<code class="docutils literal notranslate"><span class="pre">&amp;sData</span></code> in the following example).</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoFaceGet</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="convert-surface-data-to-nurbs-for-other-than-uv-mapped-surfaces">
<span id="id33"></span><h4>Convert surface data to Nurbs (for other than UV-mapped surfaces)<a class="headerlink" href="#convert-surface-data-to-nurbs-for-other-than-uv-mapped-surfaces" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Declare and initialize an <code class="docutils literal notranslate"><span class="pre">A3DCrvOnSurfData</span></code> structure.</p></li>
<li><p>Populate the <code class="docutils literal notranslate"><span class="pre">A3DCrvOnSurfData</span></code> structure with the surface base and surface domain information from the <code class="docutils literal notranslate"><span class="pre">A3DTopoFaceData</span></code> structure.</p></li>
<li><p>Create an <code class="docutils literal notranslate"><span class="pre">A3DCrvOnSurf</span></code> PRC entity by invoking the <code class="docutils literal notranslate"><span class="pre">A3DCrvOnSurfCreate</span></code> function. The first argument in this function call is the <code class="docutils literal notranslate"><span class="pre">A3DCrvOnSurfData</span></code> structure, and the second is a pointer to the resulting PRC entity.</p></li>
<li><p>Convert a curve on the surface in the <code class="docutils literal notranslate"><span class="pre">A3DCrvOnSurf</span></code> PRC entity by invoking the <code class="docutils literal notranslate"><span class="pre">A3DCrvBaseGetAsNurbs</span></code> function.</p></li>
</ol>
</div>
<div class="section" id="parse-generic-surface-data">
<span id="id34"></span><h4>Parse generic surface data<a class="headerlink" href="#parse-generic-surface-data" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Determine the type of surface data by invoking the <code class="docutils literal notranslate"><span class="pre">A3DEntityGetType</span></code> function. The first argument references the surface, and the second is a pointer to a variable in which the function stores the type enumerator.</p></li>
<li><p>Parse the surface data using the Acrobat 3D API functions most appropriate for the surface type. Use the A3DEntityGetType function to determine surface type. If the surface type is of type <code class="docutils literal notranslate"><span class="pre">kA3DTypeSurfNurbs</span></code> or if the surface type is unknown, parse the surface data as Nurbs surface data (see <a class="reference internal" href="#parse-nurbs-surface-data"><span class="std std-ref">Parse Nurbs surface data</span></a>).</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>A3DEEntityType eType;
iRet = A3DEntityGetType(p, &amp;eType);
switch (eType) {
case kA3DTypeSurfNurbs:
  parseSurfaceNurbs(p);
  break;
case kA3DTypeSurfSphere:
  parseSurfSphere(p);
  break;
case kA3DTypeSurfBlend01:
  parseSurfaceBlend01(p);
  break;
…
}
</pre></div>
</div>
</div>
<div class="section" id="parse-nurbs-surface-data">
<span id="id35"></span><h4>Parse Nurbs surface data<a class="headerlink" href="#parse-nurbs-surface-data" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Declare and initialize an A3DSurfNurbsData structure.</p></li>
<li><p>Populate the surface Nurbs data structure by invoking the A3DSurfBaseGetAsNurbs function, providing the following arguments:</p>
<ul class="simple">
<li><p>The first argument (<code class="docutils literal notranslate"><span class="pre">sData.m_pSurface</span></code> in the following example) is a pointer to the surface base entity.</p></li>
<li><p>The second argument (<code class="docutils literal notranslate"><span class="pre">1e-3</span> <span class="pre">/</span> <span class="pre">stdContextScale</span></code> ) is a ratio that the function uses to scale the Nurbs data. The value <code class="docutils literal notranslate"><span class="pre">1e-3</span></code> specifies the desired tolerance (0.001 mm in the following example). The <code class="docutils literal notranslate"><span class="pre">stdContextScale</span></code> global variable is the Body Scale, which was obtained from the <code class="docutils literal notranslate"><span class="pre">A3DTopoContextData</span></code> structure. (See <a class="reference internal" href="#parse-topology-body-data"><span class="std std-ref">Parse topology body data</span></a>.) The adjustment is calculated by dividing the targeted tolerance by the Body Scale.</p></li>
<li><p>The third argument (<code class="docutils literal notranslate"><span class="pre">bUseSameParameterization</span></code> ) specifies that the conversion from the surface data to Nurbs data should use the parameterization data (if any) that is already specified in the face’s surface definition.</p></li>
<li><p>The fourth argument (<code class="docutils literal notranslate"><span class="pre">&amp;sNurbsData</span></code> ) is a pointer to an empty structure in which the function stores the Nurbs data.</p></li>
</ul>
</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ASBool</span> <span class="n">bUseSameParameterization</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">;</span>
<span class="n">A3DSurfNurbsData</span> <span class="n">sNurbsData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sNurbsData</span><span class="p">);</span>
<span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DSurfBaseGetAsNurbs</span><span class="p">(</span><span class="n">sData</span><span class="o">.</span><span class="n">m_pSurface</span><span class="p">,</span> <span class="mf">1e-3</span> <span class="o">/</span> <span class="n">stdContextScale</span><span class="p">,</span>
  <span class="n">bUseSameParametrization</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sNurbsData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Determine the result of the <code class="docutils literal notranslate"><span class="pre">A3DSurfBaseGetAsNurbs</span></code> function. In addition to returning the standard success and failure values, this function can also return the warning <code class="docutils literal notranslate"><span class="pre">A3D_SRF_NURBS_CANNOT_KEEP_PARAMETERIZATION</span></code>. This warning indicates that the conversion yielded a valid Nurbs surface but that associated space parametric trimming curves may be unreliable.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>if (iRet == A3D_SUCCESS ||
  iRet == A3D_SRF_NURBS_CANNOT_KEEP_PARAMETERIZATION) {
  …
}
</pre></div>
</div>
<ol class="arabic simple">
<li><p>If Step <cite>Parse the surface data referenced by the ``m_pSurface`</cite> member in the <code class="docutils literal notranslate"><span class="pre">A3DTopoFaceData</span></code> structure. (See Parse generic surface data.) &lt;Plugins_A3D_API.html#50618396_80778&gt;`__ did not return with an error, delete the <code class="docutils literal notranslate"><span class="pre">A3DSurfNurbsData</span></code> structure by invoking the <code class="docutils literal notranslate"><span class="pre">A3DSurfNurbsGet</span></code> function with the first argument set to <code class="docutils literal notranslate"><span class="pre">NULL</span></code> and the second argument set to the location of the structure (<code class="docutils literal notranslate"><span class="pre">&amp;sNurbsData</span></code> in the following example).</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DSurfNurbsGet</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sNurbsData</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="parsing-prc-entities-that-specify-graphics">
<span id="id36"></span><h3>Parsing PRC entities that specify graphics<a class="headerlink" href="#parsing-prc-entities-that-specify-graphics" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="./API_References/PRCReference/3D_API_Reference/index.html">Acrobat 3D API Reference</a> groups the PRC entities that specify graphics into the graphic module. The graphics module includes the following categories of PRC entities:</p>
<ul class="simple">
<li><p><strong>Graphics entities:</strong> Specify attributes that can apply to any graphic entity, such as color, line pattern, and coordinate system transformation.</p></li>
<li><p><strong>Camera entities:</strong> Specify the position and direction from which a scene is viewed.</p></li>
<li><p><strong>Light entities:</strong> Specify the quality of light applied to a 3D scene.</p></li>
<li><p><strong>SceneDisplay:</strong> Specify viewing characteristics for a 3D representation, such as camera, lights, plane clipping, and background style.</p></li>
</ul>
<p>[DG says: “parsing graphic PRC entities”. Explanation of Graphic Entities is very strange, and I cannot understand its meaning. These entities are very precise, and define precise things!!!!]</p>
<p>Some characteristics of PRC entities that specify graphics can be accessed only through the Acrobat 3D API <em>miscellaneous cascaded attributes</em>. These characteristics include the entity’s layer, coordinate system, and style attributes. Style attributes include line pattern index, RGB color index, and transparency setting. (See <a class="reference internal" href="#parsing-attributes-that-appear-in-an-entity-base"><span class="std std-ref">Parsing attributes that appear in an entity base</span></a>.)</p>
</div>
<div class="section" id="parsing-attributes-that-appear-in-an-entity-base">
<span id="id37"></span><h3>Parsing attributes that appear in an entity base<a class="headerlink" href="#parsing-attributes-that-appear-in-an-entity-base" title="Permalink to this headline">¶</a></h3>
<p>This section explains how to obtain data from the root-base entity or from the miscellaneous cascaded attributes.</p>
<p>The Acrobat 3D Library uses a parallel structure for representing attributes that apply to PRC entities that have a particular PRC entity base. Data that is specific to the entity is defined in <code class="docutils literal notranslate"><span class="pre">A3D</span></code> EntityName <code class="docutils literal notranslate"><span class="pre">Data</span></code> structures (for example the <code class="docutils literal notranslate"><span class="pre">A3DAsmPartDefinitionData</span></code> structure). These structures are used to create or parse the entity. Other data is defined in entities specific to the global or base types. (See the Related Pages on the <a class="reference external" href="./API_References/PRCReference/3D_API_Reference/index.html">Acrobat 3D API Reference</a>.)</p>
<div class="section" id="parsing-root-base-entity-data">
<span id="id38"></span><h4>Parsing root-base entity data<a class="headerlink" href="#parsing-root-base-entity-data" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Declare and initialize a <code class="docutils literal notranslate"><span class="pre">A3DRootBaseData</span></code> structure.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DRootBaseData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Populate the <code class="docutils literal notranslate"><span class="pre">A3DRootBaseData</span></code> structure by invoking the <code class="docutils literal notranslate"><span class="pre">A3DRootBaseGet</span></code> function.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DRootBaseGet</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Save the value of the <code class="docutils literal notranslate"><span class="pre">m_pcName</span></code> to your export structure.</p></li>
<li><p>For each <code class="docutils literal notranslate"><span class="pre">A3DMiscAttribute</span></code> entity referenced by the array that is referenced by <code class="docutils literal notranslate"><span class="pre">m_ppAttributes</span></code>, process the contents. (See <a class="reference internal" href="#parse-the-miscellaneous-attribute-entity"><span class="std std-ref">Parse the miscellaneous attribute entity</span></a>.)</p></li>
<li><p>Delete the <code class="docutils literal notranslate"><span class="pre">A3DRootBaseData</span></code> structure.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DRootBaseGet</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="parse-the-miscellaneous-attribute-entity">
<span id="id39"></span><h4>Parse the miscellaneous attribute entity<a class="headerlink" href="#parse-the-miscellaneous-attribute-entity" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Declare and initialize an <code class="docutils literal notranslate"><span class="pre">A3DMiscAttributeData</span></code> structure.</p></li>
<li><p>Populate the <code class="docutils literal notranslate"><span class="pre">A3DMiscAttributeData</span></code> structure by invoking the <code class="docutils literal notranslate"><span class="pre">A3DMiscAttributeGet</span></code> function. The first argument references the <code class="docutils literal notranslate"><span class="pre">A3DMiscAttribute</span></code> entity (from root base data <code class="docutils literal notranslate"><span class="pre">m_ppAttributes</span></code> member), and the second argument references the <code class="docutils literal notranslate"><span class="pre">A3DMiscAttributeData</span></code> being populated.</p></li>
<li><p>Determine whether the root data contains modeler data by checking the <code class="docutils literal notranslate"><span class="pre">m_pSingleAttributesData</span></code> member. If its value is non-null, save the modeler data to your export structure.</p></li>
<li><p>Save the value of the <code class="docutils literal notranslate"><span class="pre">m_pcName</span></code> attribute to your export structure.</p></li>
<li><p>Delete the <code class="docutils literal notranslate"><span class="pre">A3DMiscAttributeData</span></code> structure created in Step <cite>Declare and initialize an ``A3DMiscAttributeData`</cite> structure. &lt;Plugins_A3D_API.html#50618396_78650&gt;`__.</p></li>
</ol>
</div>
<div class="section" id="parsing-graphic-attributes-using-miscellaneous-cascaded-attributes">
<span id="id40"></span><h4>Parsing graphic attributes using miscellaneous cascaded attributes<a class="headerlink" href="#parsing-graphic-attributes-using-miscellaneous-cascaded-attributes" title="Permalink to this headline">¶</a></h4>
<p>Miscellaneous cascaded attributes manage the inheritable graphics data that can be applied to a PRC entity. Such inheritable data includes the show and remove settings, style attributes such as color and pattern, layer attributes, and coordinate system transformations.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">A3DGraphicsCreate</span></code> function lets you set the graphics data for an entity. It also lets you set inheritance behavior for the attributes. These bits can specify that an attribute be inherited from a child entity or from a parent entity.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">A3DGraphicsGet</span></code> function gets the graphics data for an entity, but it does not take into account inherited settings.</p>
<p>The following diagram illustrates the steps required to create and push miscellaneous cascaded attributes, depending on whether the entity represents a tessellation face.</p>
</div>
<div class="section" id="to-create-and-push-a-miscellaneous-cascaded-attributes-structure">
<span id="id41"></span><h4>To create and push a miscellaneous cascaded attributes structure<a class="headerlink" href="#to-create-and-push-a-miscellaneous-cascaded-attributes-structure" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#declare-the-structure-for-creating-and-pushing-a-cascaded-attributes-structure"><span class="std std-ref">Declare the structure for creating and pushing a cascaded attributes structure</span></a>.</p></li>
<li><p>Create and push a cascaded attributes structure. For entities in the tessellation module, include a pointer to the tessellation base entity (see <a class="reference internal" href="#create-and-push-a-cascaded-attributes-structure-for-entities-in-the-tessellated-module"><span class="std std-ref">Create and push a cascaded attributes structure for entities in the tessellated module</span></a>. For all other entities in the graphics module, see <a class="reference internal" href="#create-and-push-a-cascaded-attributes-structure-for-graphic-entities"><span class="std std-ref">Create and push a cascaded attributes structure for graphic entities</span></a>.</p></li>
<li><p>Delete the structure created for the miscellaneous cascaded attributes.</p></li>
</ol>
<div class="section" id="declare-the-structure-for-creating-and-pushing-a-cascaded-attributes-structure">
<span id="id42"></span><h5>Declare the structure for creating and pushing a cascaded attributes structure<a class="headerlink" href="#declare-the-structure-for-creating-and-pushing-a-cascaded-attributes-structure" title="Permalink to this headline">¶</a></h5>
<ol class="arabic simple">
<li><p>Declare an empty cascaded data structure in which the cascaded attributes are to be stored. The macro <code class="docutils literal notranslate"><span class="pre">A3D_INITIALIZE_DATA</span></code> clears the memory allocated to the structure and checks the size of the structure to avoid alignment problems.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DMiscCascadedAttributesData</span> <span class="n">sAttrData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sAttrData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Declare a null pointer to a miscellaneous cascaded attributes object.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DMiscCascadedAttributes</span><span class="o">*</span> <span class="n">pAttr</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="create-and-push-a-cascaded-attributes-structure-for-graphic-entities">
<span id="id43"></span><h5>Create and push a cascaded attributes structure for graphic entities<a class="headerlink" href="#create-and-push-a-cascaded-attributes-structure-for-graphic-entities" title="Permalink to this headline">¶</a></h5>
<ol class="arabic simple">
<li><p>Create an empty miscellaneous cascaded attributes object by invoking the <code class="docutils literal notranslate"><span class="pre">A3DMiscCascadedAttributesCreate</span></code> function, providing as an argument the address of the previously created null pointer.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DMiscCascadedAttributesCreate</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pAttr</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Invoke the <code class="docutils literal notranslate"><span class="pre">A3DMiscCascadedAttributesPush</span></code> function, which creates the <code class="docutils literal notranslate"><span class="pre">A3DMiscCascadedAttributes</span></code> object for the current PRC entity and pushes the parent <code class="docutils literal notranslate"><span class="pre">A3DMiscCascadedAttributes</span></code> object onto the stack. Provide the following arguments to <code class="docutils literal notranslate"><span class="pre">A3DMiscCascadedAttributesPush</span></code>.</p>
<ul class="simple">
<li><p>The first argument (<code class="docutils literal notranslate"><span class="pre">pAttr</span></code> in the following example) is a pointer to an empty miscellaneous cascaded attribute object. The <code class="docutils literal notranslate"><span class="pre">A3DMiscCascadedAttributesPush</span></code> function populates this object.</p></li>
<li><p>The second argument (<code class="docutils literal notranslate"><span class="pre">pBase</span></code> in the following example) is a pointer to the PRC entity of interest, recast as a <code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">A3DRootBaseWithGraphics*</span></code>.</p></li>
<li><p>The third argument (<code class="docutils literal notranslate"><span class="pre">pFatherAttr</span></code> in the following example) is a pointer to the parent entity’s <code class="docutils literal notranslate"><span class="pre">A3DMiscCascadedAttributes</span></code> object. Do not confuse this structure with the parent entity’s <code class="docutils literal notranslate"><span class="pre">A3DMiscCascadedAttributesData</span></code> structure.</p></li>
</ul>
</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DMiscCascadedAttributesPush</span> <span class="p">(</span><span class="n">pAttr</span><span class="p">,</span> <span class="n">pBase</span><span class="p">,</span> <span class="n">pFatherAttr</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Get the data from the newly created cascaded attributes structure by invoking the <code class="docutils literal notranslate"><span class="pre">A3DMiscCascadedAttributesGet</span></code> function. Provide the following arguments:</p>
<ul class="simple">
<li><p>The first argument (<code class="docutils literal notranslate"><span class="pre">pAttr</span></code> in the following example) references the cascaded attribute structure populated in Step <cite>Invoke the ``A3DMiscCascadedAttributesPush`</cite> function, which creates the <code class="docutils literal notranslate"><span class="pre">A3DMiscCascadedAttributes</span></code> object for the current PRC entity and pushes the parent <code class="docutils literal notranslate"><span class="pre">A3DMiscCascadedAttributes</span></code> object onto the stack. Provide the following arguments to <code class="docutils literal notranslate"><span class="pre">A3DMiscCascadedAttributesPush</span></code>. &lt;Plugins_A3D_API.html#50618396_62288&gt;`__.</p></li>
<li><p>The second argument (sAttrData in the following example) references the empty <code class="docutils literal notranslate"><span class="pre">A3DMiscCascadedAttributesData</span></code> structure created previously. (See <a class="reference internal" href="#declare-the-structure-for-creating-and-pushing-a-cascaded-attributes-structure"><span class="std std-ref">Declare the structure for creating and pushing a cascaded attributes structure</span></a>.) The <code class="docutils literal notranslate"><span class="pre">A3DMiscCascadedAttributesGet</span></code> function stores the entity’s attributes in this structure.</p></li>
</ul>
</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DMiscCascadedAttributesGet</span><span class="p">(</span><span class="n">pAttr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sAttrData</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="create-and-push-a-cascaded-attributes-structure-for-entities-in-the-tessellated-module">
<span id="id44"></span><h5>Create and push a cascaded attributes structure for entities in the tessellated module<a class="headerlink" href="#create-and-push-a-cascaded-attributes-structure-for-entities-in-the-tessellated-module" title="Permalink to this headline">¶</a></h5>
<ol class="arabic simple">
<li><p>Invoke the <code class="docutils literal notranslate"><span class="pre">A3DMiscCascadedAttributesPushTessFace</span></code> function, providing the following arguments:</p>
<ul class="simple">
<li><p>The first argument (<code class="docutils literal notranslate"><span class="pre">pAttr</span></code> in the following example) is a pointer to an empty miscellaneous cascaded attribute object. The <code class="docutils literal notranslate"><span class="pre">A3DMiscCascadedAttributesPushTessFace</span></code> function populates this object.</p></li>
<li><p>The second argument (pRepItem in the following example) is a pointer to the representation item that contains the tessellation face.</p></li>
<li><p>The third argument (<code class="docutils literal notranslate"><span class="pre">pTessBase</span></code> in the following example) is a pointer to the tessellation entity that contains the face, recast as a <code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">A3DTessBase*</span></code> pointer. This argument can be cast from the <code class="docutils literal notranslate"><span class="pre">A3DTess3D</span></code> entity.</p></li>
<li><p>The fourth argument (psTessFaceData in the following example) references an array of pointers to the <code class="docutils literal notranslate"><span class="pre">A3DTessFaceData</span></code> structures that contain the face data. Use the <code class="docutils literal notranslate"><span class="pre">A3DTess3DGet</span></code> function to obtain that structure.</p></li>
<li><p>The fifth argument (uiFaceIndex in the following example) is the face index used with the fourth argument to access the face data from the <code class="docutils literal notranslate"><span class="pre">m_psFaceTessData</span></code> member of the psTess3DData structure.</p></li>
<li><p>The sixth argument (<code class="docutils literal notranslate"><span class="pre">pFatherAttr</span></code> in the following example) is a pointer to the parent entity’s <code class="docutils literal notranslate"><span class="pre">A3DMiscCascadedAttributes</span></code> object. Do not confuse this structure with the parent entity’s <code class="docutils literal notranslate"><span class="pre">A3DMiscCascadedAttributesData</span></code> structure.</p></li>
</ul>
</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DMiscCascadedAttributesCreate</span><span class="p">(</span><span class="n">ppAttr</span><span class="p">);</span>
<span class="o">//</span> <span class="n">This</span> <span class="n">API</span> <span class="ow">is</span> <span class="n">dedicated</span> <span class="n">to</span> <span class="n">tessellation</span>
<span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DMiscCascadedAttributesPushTessFace</span><span class="p">(</span><span class="n">pAttr</span><span class="p">,</span> <span class="n">pRepItem</span><span class="p">,</span> <span class="n">pTessBase</span><span class="p">,</span>
  <span class="n">psTessFaceData</span><span class="p">,</span> <span class="n">uiFaceIndex</span><span class="p">,</span> <span class="n">pFatherAttr</span><span class="p">);</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">((</span><span class="o">*</span><span class="n">psAttrData</span><span class="p">));</span>
<span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DMiscCascadedAttributesGet</span><span class="p">(</span><span class="o">*</span><span class="n">ppAttr</span><span class="p">,</span> <span class="n">psAttrData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Save relevant data to your export structure.</p></li>
<li><p>Delete the structure created for the miscellaneous cascaded attributes</p></li>
<li><p>Delete the <code class="docutils literal notranslate"><span class="pre">A3DMiscCascadedAttributes</span></code> structure by invoking the <code class="docutils literal notranslate"><span class="pre">A3DMiscCascadedAttributesDelete</span></code> function.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DMiscCascadedAttributesDelete</span><span class="p">(</span><span class="n">pAttr</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Delete the <code class="docutils literal notranslate"><span class="pre">A3DMiscCascadedAttributesData</span></code> structure by invoking the <code class="docutils literal notranslate"><span class="pre">A3DMiscCascadedAttributesGet</span></code> function, setting the first argument to <code class="docutils literal notranslate"><span class="pre">NULL</span></code> and the second to the address of the structure. Here is an example:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DMiscCascadedAttributesGet</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sAttrData</span><span class="p">);</span>
<span class="n">A3DMiscCascadedAttributes</span><span class="o">*</span> <span class="n">pAttr</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="terminating-the-interface-with-the-acrobat-3d-api">
<span id="id45"></span><h3>Terminating the interface with the Acrobat 3D API<a class="headerlink" href="#terminating-the-interface-with-the-acrobat-3d-api" title="Permalink to this headline">¶</a></h3>
<p>When all parsing is complete, you must delete the in-memory model of the PRC, de-allocate any other memory allocations, and terminate the Acrobat 3D API.</p>
<div class="section" id="terminate-your-interface-with-the-acrobat-3d-api">
<span id="id46"></span><h4>Terminate your interface with the Acrobat 3D API<a class="headerlink" href="#terminate-your-interface-with-the-acrobat-3d-api" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Delete the model file in memory. This model was created when the <code class="docutils literal notranslate"><span class="pre">A3DAsmModelFileLoadFromFile</span></code> function was called.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DAsmModelFileDelete</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Ensure that all memory is de-allocated.</p></li>
<li><p>Terminate the Acrobat 3D API by invoking the <code class="docutils literal notranslate"><span class="pre">A3DDllTerminate</span></code> function, as follows:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DDllTerminate</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="creating-a-prc-file-that-uses-boundary-representation">
<span id="id47"></span><h2>Creating a PRC file that uses boundary representation<a class="headerlink" href="#creating-a-prc-file-that-uses-boundary-representation" title="Permalink to this headline">¶</a></h2>
<p>The Acrobat 3D SDK lets you create a representation item for a boundary representation that is optionally accompanied by tessellation data. Boundary representations with or without tessellation data can represent curves, or open or closed solids. (See <a class="reference internal" href="#creating-a-tessellation-entity-for-representing-faceted-objects"><span class="std std-ref">Creating a tessellation entity for representing faceted objects</span></a>.)</p>
<p>This section explains how to create a PRC file that represents a circular band (a co-edge) that is UV-mapped to a clear cylinder surface (pictured below). More specifically, the solid in this 3D image contains a single face, which in turn contains a cylinder and a loop. The loop contains a single co-edge that contains two circular curves. The co-edge is UV-mapped to the cylinder. The following images show the resulting image from different perspectives. To open a PDF document that contains the PRC content pictured below, click <a class="reference external" href="./CreatedPRC.pdf">here</a>.</p>
<img alt="_images/prccontent.png" src="_images/prccontent.png" />
<p id="section-1">The following diagram shows the tasks required to create each PRC entity to represent the image pictured above. This diagram is intended to portray a bottom-up process, where upper-level functions are not complete until their lower-level functions are completed. That is, the most basic PRC entities (such as vertices, edges and coedges) are created first, followed by the more complex PRC entities that consist of those basic PRC entities and other data. The last PRC entity to be created is the model file.</p>
<img alt="_images/prcstructural.png" src="_images/prcstructural.png" />
<img alt="_images/structuralbrep.png" src="_images/structuralbrep.png" />
<div class="section" id="error-handling">
<span id="handling-errors-1"></span><span id="id48"></span><h3>Error handling<a class="headerlink" href="#error-handling" title="Permalink to this headline">¶</a></h3>
<p>For information about handling errors, see <a class="reference internal" href="#handling-errors"><span class="std std-ref">Handling errors</span></a>.</p>
</div>
<div class="section" id="creating-a-model-file-entity-and-exporting-it-to-a-physical-file">
<span id="id49"></span><h3>Creating a model file entity and exporting it to a physical file<a class="headerlink" href="#creating-a-model-file-entity-and-exporting-it-to-a-physical-file" title="Permalink to this headline">¶</a></h3>
<p>This section describes how to initiate the process of creating a model file and how to export that data to a physical file.</p>
<div class="section" id="create-a-file-that-contains-the-prc-data">
<span id="id50"></span><h4>Create a file that contains the PRC data<a class="headerlink" href="#create-a-file-that-contains-the-prc-data" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Create a pointer that references a populated model file entity. (See <a class="reference internal" href="#create-a-model-file-entity"><span class="std std-ref">Create a model file entity</span></a>.) In the following example, <code class="docutils literal notranslate"><span class="pre">createModelFile</span></code> is a private function that returns a pointer to a populated model file.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DAsmModelFile</span><span class="o">*</span> <span class="n">pModelFile</span> <span class="o">=</span> <span class="n">createModelFile</span><span class="p">();</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Create the model file entity. (See <a class="reference internal" href="#create-a-model-file-entity"><span class="std std-ref">Create a model file entity</span></a>.)</p></li>
<li><p>Save the contents of the model file to a physical file by invoking the <code class="docutils literal notranslate"><span class="pre">A3DAsmModelFileWriteToFile</span></code> function.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">p</span> <span class="o">!=</span> <span class="n">NULL</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">_access</span><span class="p">(</span><span class="n">pcPRCName</span><span class="p">,</span> <span class="mi">00</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">_unlink</span><span class="p">(</span><span class="n">pcPRCName</span><span class="p">);</span>
  <span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DAsmModelFileWriteToFile</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="n">pcPRCName</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Delete the model file populated in Step <cite>Create a pointer that references a populated model file entity. (See Create a model file entity.) In the following example, ``createModelFile`</cite> is a private function that returns a pointer to a populated model file. &lt;Plugins_A3D_API.html#50618396_97368&gt;`__.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DAsmModelFileDelete</span><span class="p">(</span><span class="n">pModelFile</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Acrobat 3D API functions in this chapter are described as though implicit linking were possible. Wherever you see a direct call to one of these functions, you should instead use the pointer to the function. See <a class="reference internal" href="#implementing-external-linking"><span class="std std-ref">Implementing external linking</span></a>.</p>
</div>
</div>
</div>
<div class="section" id="creating-structure-prc-entities">
<span id="id51"></span><h3>Creating structure PRC entities<a class="headerlink" href="#creating-structure-prc-entities" title="Permalink to this headline">¶</a></h3>
<p>This section explains how to create the PRC entities that represent the structure of the PRC file, such as the model file, product occurrences, and part definitions. The names of structure module entities have the form <code class="docutils literal notranslate"><span class="pre">A3DAsm</span></code> <em>Entity_name</em>.</p>
<div class="section" id="create-a-model-file-entity">
<span id="id52"></span><h4>Create a model file entity<a class="headerlink" href="#create-a-model-file-entity" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>If the model file references multiple product occurrences, create an array to accommodate a pointer that references each product occurrence.</p></li>
<li><p>For each product occurrence in the model file, create a pointer that references a populated product occurrence entity. (See <a class="reference internal" href="#create-a-product-occurrence"><span class="std std-ref">Create a product occurrence</span></a>.) In the following example, <code class="docutils literal notranslate"><span class="pre">createOccurrence</span></code> is a private function that returns a pointer to a populated product occurrence.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DAsmProductOccurrence</span><span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">createOccurrence</span><span class="p">();</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Declare and initialize a model file data structure and set the values of its members, as follows:</p>
<ul class="simple">
<li><p>m_uiPOccurrencesSize represents the number of child product occurrences.</p></li>
<li><p>m_dUnit is a multiple of millimeters that specifies the units used by the 3D data in the structure element.</p></li>
<li><p>m_ppPOccurrences references the array of product occurrence pointers.</p></li>
</ul>
</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DAsmModelFileData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_uiPOccurrencesSize</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_dUnit</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_ppPOccurrences</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">p</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Encapsulate the model file data by invoking the <code class="docutils literal notranslate"><span class="pre">A3DAsmModelFileCreate</span></code> function. The first argument is a pointer to the model file data, and the second argument is a pointer to the model file entity.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DAsmModelFileCreate</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sData</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pModelFile</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Optionally, associate the model file entity with root-level attributes (see <a class="reference external" href="Plugins_A3D_API.html#50618396_49152">Defining root-level attributes for a PRC entity</a>).</p></li>
</ol>
</div>
<div class="section" id="create-a-product-occurrence">
<span id="id53"></span><h4>Create a product occurrence<a class="headerlink" href="#create-a-product-occurrence" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Declare a null pointer to a product occurrence.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DAsmProductOccurrence</span><span class="o">*</span> <span class="n">pProductOccurrrence</span> <span class="o">=</span> <span class="n">NULL</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Create a pointer to a populated part definition. (See <a class="reference internal" href="#create-a-part-definition"><span class="std std-ref">Create a part definition</span></a>.) In the following example, <code class="docutils literal notranslate"><span class="pre">createPart</span></code> is a private function that returns a pointer to a populated part definition entity.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DAsmPartDefinition</span><span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">createPart</span><span class="p">();</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Set the <code class="docutils literal notranslate"><span class="pre">m_pPart</span></code> member to reference the part created in Step <cite>Create a pointer to a populated part definition. (See Create a part definition.) In the following example, ``createPart`</cite> is a private function that returns a pointer to a populated part definition entity. &lt;Plugins_A3D_API.html#50618396_82443&gt;`__.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DAsmProductOccurrenceData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_pPart</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Package the product occurrence data as a PRC entity by invoking the <code class="docutils literal notranslate"><span class="pre">A3DAsmProductOccurrenceCreate</span></code> function. The first argument is a pointer to the product occurrence data, and the second argument is an indirect pointer to the product occurrence.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span>
  <span class="n">A3DAsmProductOccurrenceCreate</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sData</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pProductOccurrence</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Define the cascaded attributes for the product occurrence. (See <a class="reference external" href="Plugins_A3D_API.html#50618396_49152">Defining root-level attributes for a PRC entity</a>.)</p></li>
</ol>
</div>
<div class="section" id="create-a-part-definition">
<span id="id54"></span><h4>Create a part definition<a class="headerlink" href="#create-a-part-definition" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Declare a null pointer to a part definition.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DAsmPartDefinition</span><span class="o">*</span> <span class="n">pPartDefinition</span> <span class="o">=</span> <span class="n">NULL</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Declare and initialize a part definition data structure, as shown in the following example.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DAsmPartDefinitionData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>For each representation item referenced by this part definition, create a pointer to that representation item and populate it. (See <a class="reference internal" href="#create-a-brep-model-representation-item"><span class="std std-ref">Create a Brep model representation item</span></a>.) In the following example, <code class="docutils literal notranslate"><span class="pre">createRIBrep</span></code> is a private function that returns a pointer to a populated Brep representation item.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DRiRepresentationItem</span><span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">createRIBrep</span><span class="p">();</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Set the <code class="docutils literal notranslate"><span class="pre">m_uiRepItemsSize</span></code> member of the part definition to the number of representation items.</p></li>
<li><p>Set the <code class="docutils literal notranslate"><span class="pre">m_ppRepItems</span></code> member of the part definition to the array of pointers for the representation items. The following example describes a part definition that references a single representation item:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sData</span><span class="o">.</span><span class="n">m_uiRepItemsSize</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_ppRepItems</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">p</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>Package the part definition data as a PRC entity by invoking the <code class="docutils literal notranslate"><span class="pre">A3DAsmPartDefinitionCreate</span></code> function. The first argument is a pointer to the product occurrence data, and the second is the pointer to the part definition created in Step <a class="reference external" href="Plugins_A3D_API.html#50618396_95370">Declare a null pointer to a part definition.</a>.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DAsmPartDefinitionCreate</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sData</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pPartDefinition</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="creating-representation-item-prc-entities">
<span id="id55"></span><h3>Creating representation item PRC entities<a class="headerlink" href="#creating-representation-item-prc-entities" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="./API_References/PRCReference/3D_API_Reference/index.html">Acrobat 3D API Reference</a> groups the PRC entities that specify individual objects present in the CAD file into the representation item module. Representation items define a particular aspect of the geometric data. The Brep model representation item is one of the PRC entities available for packaging distinct 3D objects. Some of the other representation items include set, point set, poly Brep model, and polywire.</p>
<div class="section" id="create-a-brep-model-representation-item">
<span id="id56"></span><h4>Create a Brep model representation item<a class="headerlink" href="#create-a-brep-model-representation-item" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Declare a pointer to a Brep model entity.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DRiBrepModel</span><span class="o">*</span> <span class="n">pBrepModel</span> <span class="o">=</span> <span class="n">NULL</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Create a pointer to a populated topology Brep data entity. (See <a class="reference internal" href="#create-a-topology-brep-data-entity"><span class="std std-ref">Create a topology Brep data entity</span></a>.) The <code class="docutils literal notranslate"><span class="pre">createTopoBrep</span></code> function in the following example is a private function that returns a reference to a populated topology Brep data entity.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoBrep</span><span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">createTopoBrep</span><span class="p">();</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Declare and initialize a Brep model data structure, and set its member values. In the following example, the <code class="docutils literal notranslate"><span class="pre">m_pBrepData</span></code> member references the Brep data entity created in the previous step, and the <code class="docutils literal notranslate"><span class="pre">m_bSolid</span></code> member is set to <code class="docutils literal notranslate"><span class="pre">FALSE</span></code>, indicating that the Brep model is a shell.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DRiBrepModelData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_pBrepData</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_bSolid</span> <span class="o">=</span> <span class="n">FALSE</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Package the Brep model data as a PRC entity by invoking the <code class="docutils literal notranslate"><span class="pre">A3DRiBrepModelCreate</span></code> function. The first argument is a pointer to the Brep data structure, and the second is a pointer to the Brep model created in Step <a class="reference external" href="Plugins_A3D_API.html#50618396_71454">Declare a pointer to a Brep model entity.</a>.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ASInt32</span> <span class="n">iRet</span><span class="o">=</span><span class="n">A3DRiBrepModelCreate</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sData</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pBrepModel</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="creating-topology-prc-entities">
<span id="id57"></span><h3>Creating topology PRC entities<a class="headerlink" href="#creating-topology-prc-entities" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="./API_References/PRCReference/3D_API_Reference/index.html">Acrobat 3D API Reference</a> groups the PRC entities that specify topology into the topology module. The topology module uses a hierarchy of faces to define the shapes of 3D objects.</p>
<div class="section" id="create-a-topology-brep-data-entity">
<span id="id58"></span><h4>Create a topology Brep data entity<a class="headerlink" href="#create-a-topology-brep-data-entity" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Create a null pointer to a topology Brep data entity.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoBrepData</span><span class="o">*</span> <span class="n">pTopoBrepData</span> <span class="o">=</span> <span class="n">NULL</span><span class="p">;</span>
</pre></div>
</div>
<p><em>Tip</em> : Do not confuse the A3DTopoBrepData entity with the <code class="docutils literal notranslate"><span class="pre">A3DTopoBrepDataData</span></code> structure. The former references a PRC entity (an opaque type), while the latter reveals the data in that entity.</p>
<ol class="arabic simple" start="2">
<li><p>For each topology connex data in the Brep data entity, create a pointer that references a populated topology connex entity. (See <a class="reference internal" href="#create-a-topology-connex-entity"><span class="std std-ref">Create a topology connex entity</span></a>.) In the following example, <code class="docutils literal notranslate"><span class="pre">createTopoConnex</span></code> is a private function that returns a reference to a populated topology connex entity.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoConnex</span><span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">createTopoConnex</span><span class="p">();</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>If the Brep representation item references multiple topology connex entities, allocate memory for an array of references to the topology connexes in the Brep data entity.</p></li>
<li><p>Declare and initialize a <code class="docutils literal notranslate"><span class="pre">A3DTopoBrepDataData</span></code> structure. Set the <code class="docutils literal notranslate"><span class="pre">m_ppConnexes</span></code> member to reference the array of topology connex entities, and set the <code class="docutils literal notranslate"><span class="pre">m_uiConnexSize</span></code> member to the number of entries in the array.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoBrepDataData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>

<span class="n">sData</span><span class="o">.</span><span class="n">m_ppConnexes</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">p</span><span class="p">;</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_uiConnexSize</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Package the A3DTopoBrepDataData structure as a PRC entity by invoking the <code class="docutils literal notranslate"><span class="pre">A3DAsmPartDefinitionCreate</span></code> function. The first argument is a pointer to the Brep-data data structure (<code class="docutils literal notranslate"><span class="pre">A3DTopoBrepDataData</span></code> ), and the second is the pointer to the Brep data entity created in Step <a class="reference external" href="Plugins_A3D_API.html#50618396_66118">Create a null pointer to a topology Brep data entity.</a>.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DTopoBrepDataCreate</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sData</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pTopoBrepData</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="create-a-topology-connex-entity">
<span id="id59"></span><h4>Create a topology connex entity<a class="headerlink" href="#create-a-topology-connex-entity" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Declare a pointer to a topology connex entity.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoConnex</span><span class="o">*</span> <span class="n">pTopoConnex</span> <span class="o">=</span> <span class="n">NULL</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>For each topology shell in the topology connex entity, create a pointer that references a populated topology shell entity. (See <a class="reference internal" href="#create-a-topology-shell-entity"><span class="std std-ref">Create a topology shell entity</span></a>.) In the following example, <code class="docutils literal notranslate"><span class="pre">createTopoShell</span></code> is a private function that returns a reference to a populated topology shell entity.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoShell</span><span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">createTopoShell</span><span class="p">();</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>If the topology connex entity references multiple topology shell entities, allocate memory for an array to accommodate each topology shell entity pointer.</p></li>
<li><p>Declare and initialize an <code class="docutils literal notranslate"><span class="pre">A3DTopoConnexData</span></code> structure. Set the m_ppShells member to reference the array that contains the pointers, and set the m_uiShellSize member to the number of pointers.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoConnexData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>

<span class="n">sData</span><span class="o">.</span><span class="n">m_ppShells</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">p</span><span class="p">;</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_uiShellSize</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Package the topology connex data as a PRC entity by invoking the <code class="docutils literal notranslate"><span class="pre">A3DTopoConnexCreate</span></code> function. The first argument is a pointer to the Brep-data data structure (<code class="docutils literal notranslate"><span class="pre">A3DTopoBrepDataData</span></code> ), and the second is the pointer to the topology connex entity created in Step <a class="reference external" href="Plugins_A3D_API.html#50618396_81092">Declare a pointer to a topology connex entity.</a>.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DTopoConnexCreate</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sData</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pTopoConnex</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="create-a-topology-shell-entity">
<span id="id60"></span><h4>Create a topology shell entity<a class="headerlink" href="#create-a-topology-shell-entity" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Declare a null pointer to a topology shell entity.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoShell</span><span class="o">*</span> <span class="n">pTopoShell</span> <span class="o">=</span> <span class="n">NULL</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>If the topology shell references multiple topology face entities, create an array to accommodate each pointer.</p></li>
<li><p>For each topology face in the topology shell, create a pointer that references a populated topology face entity. (See <a class="reference internal" href="#create-a-topology-face-entity"><span class="std std-ref">Create a topology face entity</span></a>.) In the following example, <code class="docutils literal notranslate"><span class="pre">createTopoFace</span></code> is a private function that returns a reference to a populated topology shell entity.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoFace</span><span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">createTopoFace</span><span class="p">();</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Declare and initialize an <code class="docutils literal notranslate"><span class="pre">A3DTopoShellData</span></code> structure. Set the <code class="docutils literal notranslate"><span class="pre">m_ppFaces</span></code> member to reference the array of topology face entities, and set the <code class="docutils literal notranslate"><span class="pre">m_uiFaceSize</span></code> member to the number of topology shell face entities.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoShellData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>

<span class="n">sData</span><span class="o">.</span><span class="n">m_ppFaces</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">p</span><span class="p">;</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_uiFaceSize</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Set the <code class="docutils literal notranslate"><span class="pre">A3DTopoShellData</span></code> structure’s <code class="docutils literal notranslate"><span class="pre">m_pucOrientationWithShell</span></code> member to reference an ASUns8 integer that specifies the orientation of the surface normal with respect to the shell normal. If the shell is closed and otherwise arbitrary, the shell normal points outside the material. The following example specifies that the surface normal has the same orientation as the face and shell.</p></li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Despite the simplicity of the values it expresses, the <code class="docutils literal notranslate"><span class="pre">m_pucOrientationWithShell</span></code> is a pointer to an ASUns8 integer; it is not itself an ASUns8 integer.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ASUns8</span> <span class="n">orient</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_pucOrientationWithShell</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">orient</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>Package the topology shell data as a PRC entity by invoking the <code class="docutils literal notranslate"><span class="pre">A3DTopoShellCreate</span></code> function. The first argument is a pointer to the topology shell data, and the second is the pointer to the topology shell entity created in Step <a class="reference external" href="Plugins_A3D_API.html#50618396_18056">Declare a null pointer to a topology shell entity.</a>.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DTopoShellCreate</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sData</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pTopoShell</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="create-a-topology-face-entity">
<span id="id61"></span><h4>Create a topology face entity<a class="headerlink" href="#create-a-topology-face-entity" title="Permalink to this headline">¶</a></h4>
<p>The example described here UV-maps onto a cylinder surface a topology loop representing a circular band.</p>
<ol class="arabic simple">
<li><p>Declare a null pointer to a topology face entity.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoFace</span><span class="o">*</span> <span class="n">pTopoFace</span> <span class="o">=</span> <span class="n">NULL</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>If the topology face references multiple loop entities, declare an array to accommodate each pointer.</p></li>
<li><p>For each loop in the topology face, create a pointer that references a populated loop entity. (See <a class="reference internal" href="#create-a-topology-loop-entity"><span class="std std-ref">Create a topology loop entity</span></a>.) In the following example, <code class="docutils literal notranslate"><span class="pre">createTopoLoop</span></code> is a private function that returns a reference to a populated loop entity.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DDouble</span> <span class="n">outerradius</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>
<span class="n">A3DDouble</span> <span class="n">innerradius</span> <span class="o">=</span> <span class="mf">0.4</span><span class="p">;</span>
<span class="n">A3DTopoLoop</span><span class="o">*</span> <span class="n">loops</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="n">loops</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">createTopoLoop</span><span class="p">(</span><span class="n">outerradius</span><span class="p">);</span>
<span class="n">loops</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">createTopoLoop</span><span class="p">(</span><span class="n">innerradius</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Declare and initialize an <code class="docutils literal notranslate"><span class="pre">A3DTopoFaceData</span></code> structure. Set the m_ppLoops member to reference the array of loop entity pointers, and set the m_uiLoopSize member to the number of loop entities in the array. Set the m_uiOuterLoopIndex member to the array index of the topology loop that describes the outer loop. If unknown, set that member to <code class="docutils literal notranslate"><span class="pre">A3D_LOOP_UNKNOW_OUTER_INDEX</span></code>.</p></li>
</ol>
<p>In the following example, <code class="docutils literal notranslate"><span class="pre">m_uiOuterLoopIndex</span></code> indicates that the outer loop is the first entry in the <code class="docutils literal notranslate"><span class="pre">loops</span></code> array.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoFaceData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_ppLoops</span> <span class="o">=</span> <span class="n">loops</span><span class="p">;</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_uiLoopSize</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_uiOuterLoopIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Declare a pointer that references a populated surface base entity. (See <a class="reference internal" href="#create-a-surface-cylinder-entity"><span class="std std-ref">Create a surface cylinder entity</span></a>.) Set the m_pSurface member of the <code class="docutils literal notranslate"><span class="pre">A3DTopoFaceData</span></code> structure to reference the populated surface. In the following example, <code class="docutils literal notranslate"><span class="pre">createSurface</span></code> is a private function that returns a reference to a populated cylinder surface entity. The returned value is cast as a pointer to a surface base.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DSurfBase</span> <span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">createSurface</span><span class="p">();</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_pSurface</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>Package the topology face data as a PRC entity by invoking the A3DTopoFaceCreate function. The first argument is a pointer to the topology face data, and the second is the pointer to the topology face entity created in Step <a class="reference external" href="Plugins_A3D_API.html#50618396_14957">Declare a null pointer to a topology face entity.</a>.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DTopoFaceCreate</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sData</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pTopoFace</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="create-a-topology-loop-entity">
<span id="id62"></span><h4>Create a topology loop entity<a class="headerlink" href="#create-a-topology-loop-entity" title="Permalink to this headline">¶</a></h4>
<p>A loop is a connected series of co-edges and describes the boundary of a face. Generally, loops are closed, having no start or end point.</p>
<ol class="arabic simple">
<li><p>Declare a null pointer to a topology loop entity.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoLoop</span><span class="o">*</span> <span class="n">pTopoLoop</span> <span class="o">=</span> <span class="n">NULL</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>If the topology loop references multiple co-edge entities, declare an array to accommodate each pointer.</p></li>
<li><p>For each co-edge in the loop, do the following:</p>
<ul class="simple">
<li><p>Create a pointer that references a populated circle entity with a given radius. (See <a class="reference internal" href="#create-a-circular-curve-entity"><span class="std std-ref">Create a circular curve entity</span></a>.)</p></li>
<li><p>Create a pointer that references a populated co-edge entity with a given curve. (See <a class="reference external" href="Plugins_A3D_API.html#50618396_67390">Create a topology co-edge entity</a>.)</p></li>
</ul>
</li>
</ol>
<p>In the following example, <code class="docutils literal notranslate"><span class="pre">createCircle</span></code> is a private function that takes a radius and returns a reference to a populated circular curve entity, and <code class="docutils literal notranslate"><span class="pre">createTopoCoEdge</span></code> is a private function that takes a pointer to a circle entity and returns a reference to a populated co-edge entity. The circle-entity describes a curve.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DCrvBase</span><span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="n">createCircle</span><span class="p">(</span><span class="n">radius</span><span class="p">);</span>
<span class="n">A3DTopoCoEdge</span><span class="o">*</span> <span class="n">q</span> <span class="o">=</span> <span class="n">createTopoCoEdge</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Declare and initialize an A3DTopoLoopData structure. Set the m_ppCoEdges member to reference the array of co-edge entity pointers, and set the m_uiCoEdgeSize member to the number of entities in the array.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoLoopData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_ppCoEdges</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">q</span><span class="p">;</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_uiCoEdgeSize</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Set the A3DTopoLoopData structure’s m_ucOrientationWithSurface member to specify the orientation of the loop relative to the surface normal vector. The following example specifies that the orientation is perpendicular to the surface normal vector (or parallel with the surface).</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sData</span><span class="o">.</span><span class="n">m_ucOrientationWithSurface</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>Package the topology face data as a PRC entity by invoking the A3DTopoLoopCreate function. The first argument is a pointer to the topology loop data, and the second is the pointer to the topology loop entity created in Step <a class="reference external" href="Plugins_A3D_API.html#50618396_78554">Declare a null pointer to a topology loop entity.</a>.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ASInt32</span> <span class="n">iRet</span><span class="o">=</span><span class="n">A3DTopoLoopCreate</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sData</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pTopoLoop</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="create-a-topology-co-edge-entity">
<span id="id63"></span><h4>Create a topology co-edge entity<a class="headerlink" href="#create-a-topology-co-edge-entity" title="Permalink to this headline">¶</a></h4>
<p>A coedge is a directed edge. The two co-edges related to an edge point in the same or opposite directions along the edge. Each co-edge is associated with a loop of one of the two neighboring/adjacent faces.</p>
<ol class="arabic simple">
<li><p>Create a pointer to a populated <code class="docutils literal notranslate"><span class="pre">A3DTopoEdge</span></code> entity. (See <a class="reference internal" href="#create-a-topology-edge-entity"><span class="std std-ref">Create a topology edge entity</span></a>.)</p></li>
<li><p>Declare and initialize a topology co-edge data entity.</p></li>
<li><p>Set the m_pUVCurve member of the data entity to reference the circle entity created earlier (see <a class="reference internal" href="#create-a-topology-loop-entity"><span class="std std-ref">Create a topology loop entity</span></a>).</p></li>
</ol>
<p>Set the <code class="docutils literal notranslate"><span class="pre">m_pEdge</span></code> member to the edge entity created in Step <cite>Create a pointer to a populated ``A3DTopoEdge`</cite> entity. (See Create a topology edge entity.) &lt;Plugins_A3D_API.html#50618396_38878&gt;`__.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To set the value of the <code class="docutils literal notranslate"><span class="pre">m_pUVCurve</span></code> member using meaningful data, you need your own modeler.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoCoEdgeData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_pUVCurve</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_pEdge</span> <span class="o">=</span> <span class="n">q</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Set the m_ucOrientationWithLoop member to indicate the relative orientation of the loop.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sData</span><span class="o">.</span><span class="n">m_ucOrientationWithLoop</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>    <span class="o">/*</span> <span class="n">Same</span> <span class="n">orientation</span> <span class="k">as</span> <span class="n">the</span> <span class="n">adjacent</span> <span class="n">co</span><span class="o">-</span><span class="n">edge</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_ucOrientationUVWithLoop</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Package the co-edge data as a PRC entity by invoking the A3DTopoEdgeCreate function. The first argument is a pointer to the topology loop data, and the second is the pointer to the topology edge entity created in Step <cite>Create a pointer to a populated ``A3DTopoEdge`</cite> entity. (See Create a topology edge entity.) &lt;Plugins_A3D_API.html#50618396_38878&gt;`__.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DTopoCoEdgeCreate</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sData</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pp</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="create-a-topology-edge-entity">
<span id="id64"></span><h4>Create a topology edge entity<a class="headerlink" href="#create-a-topology-edge-entity" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Declare a null pointer to a topology edge entity.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoEdge</span><span class="o">*</span> <span class="n">pTopoEdge</span> <span class="o">=</span> <span class="n">NULL</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Declare and initialize a topology edge data structure.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTopoEdgeData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Populate the members with data.</p></li>
<li><p>Package the topology face data as a PRC entity by invoking the A3DTopoEdgeCreate function. The first argument is a pointer to the topology loop data, and the second is the pointer to the topology edge entity created in Step <a class="reference external" href="Plugins_A3D_API.html#50618396_40375">Declare a null pointer to a topology edge entity.</a>.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DTopoEdgeCreate</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sData</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pTopoEdge</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="creating-geometry-prc-entities">
<span id="id65"></span><h3>Creating geometry PRC entities<a class="headerlink" href="#creating-geometry-prc-entities" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="./API_References/PRCReference/3D_API_Reference/index.html">Acrobat 3D API Reference</a> describes the PRC entities that specify geometry in the Geometry module. This module contains these submodules:</p>
<p><strong>Curves:</strong> Entities that represent different kinds of curves, such as NURBS, elliptic, and helical.</p>
<p><strong>Surfaces:</strong> Entities that represent different kinds of surfaces, such as NURBS, spheric, and toric.</p>
<p><strong>Common Structures for Geometric Entities:</strong> Entities that supplement data in the Curves and Surfaces modules.</p>
<p>This section describes the creation of a cylinder surface on which a circular co-edge is UV-mapped.</p>
<p>A circular curve includes a coordinate system and parameterization settings. By default, the reference domain is [0, 2PI]. A circular curve uses an <code class="docutils literal notranslate"><span class="pre">A3IntervalData</span></code> entity as the linear domain and an <code class="docutils literal notranslate"><span class="pre">A3DMiscCartesianTransformationData</span></code> structure as the coordinate system. New parameterization is computed from two coefficients applied to the reference parameterization [0, 2PI].</p>
<div class="section" id="create-a-surface-cylinder-entity">
<span id="id66"></span><h4>Create a surface cylinder entity<a class="headerlink" href="#create-a-surface-cylinder-entity" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Declare a null pointer to an A3DSurfCylinder entity.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DSurfCylinder</span><span class="o">*</span> <span class="n">pSurfCylinder</span> <span class="o">=</span> <span class="n">NULL</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Declare and initialize a surface cylinder data structure, and initialize the structures it contains.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DSurfCylinderData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="o">.</span><span class="n">m_sParam</span><span class="p">);</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="o">.</span><span class="n">m_sTrsf</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Set the UV-parameterization data of the surface cylinder data structure, which specifies how the circular curve is mapped to the cylinder. The following example specifies the trimming and orientation of the mapping:</p>
<ul class="simple">
<li><p>Minimum and maximum extents in the UV domain (<code class="docutils literal notranslate"><span class="pre">sData.m_sParam.m_sUVDomain</span></code> ) establish the trimming contour in the final parameterization space. Each extent is a 2D vector. The following example clips the texture represented by the co-edge to the area described by [0.0, 0.0] and [360.0 40.0].</p></li>
<li><p>Coefficients establish parameterization along the U and V axes. In this example, U values are expressed as inverted degrees (1.0/degrees). V values are expressed as inverted lengths (1.0/length).</p></li>
</ul>
</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sData</span><span class="o">.</span><span class="n">m_sParam</span><span class="o">.</span><span class="n">m_sUVDomain</span><span class="o">.</span><span class="n">m_sMin</span><span class="o">.</span><span class="n">m_dX</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_sParam</span><span class="o">.</span><span class="n">m_sUVDomain</span><span class="o">.</span><span class="n">m_sMin</span><span class="o">.</span><span class="n">m_dY</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_sParam</span><span class="o">.</span><span class="n">m_sUVDomain</span><span class="o">.</span><span class="n">m_sMax</span><span class="o">.</span><span class="n">m_dX</span> <span class="o">=</span> <span class="mf">360.0</span><span class="p">;</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_sParam</span><span class="o">.</span><span class="n">m_sUVDomain</span><span class="o">.</span><span class="n">m_sMax</span><span class="o">.</span><span class="n">m_dY</span> <span class="o">=</span> <span class="mf">40.0</span><span class="p">;</span>
<span class="o">//</span>    <span class="n">Parameters</span> <span class="n">go</span> <span class="kn">from</span> <span class="o">-</span><span class="mi">1</span> <span class="n">to</span> <span class="o">+</span><span class="mi">1</span> <span class="ow">in</span> <span class="n">both</span> <span class="n">directions</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_sParam</span><span class="o">.</span><span class="n">m_dUCoeffA</span> <span class="o">=</span>
  <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="n">sData</span><span class="o">.</span><span class="n">m_sParam</span><span class="o">.</span><span class="n">m_sUVDomain</span><span class="o">.</span><span class="n">m_sMax</span><span class="o">.</span><span class="n">m_dX</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_sParam</span><span class="o">.</span><span class="n">m_dUCoeffB</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">;</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_sParam</span><span class="o">.</span><span class="n">m_dVCoeffA</span> <span class="o">=</span>
  <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="n">sData</span><span class="o">.</span><span class="n">m_sParam</span><span class="o">.</span><span class="n">m_sUVDomain</span><span class="o">.</span><span class="n">m_sMax</span><span class="o">.</span><span class="n">m_dY</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>
  <span class="n">sData</span><span class="o">.</span><span class="n">m_sParam</span><span class="o">.</span><span class="n">m_dVCoeffB</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">;</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_sParam</span><span class="o">.</span><span class="n">m_bSwapUV</span> <span class="o">=</span> <span class="n">FALSE</span><span class="p">;</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_sTrsf</span><span class="o">.</span><span class="n">m_ucBehaviour</span> <span class="o">=</span> <span class="n">kA3DTransformationIdentity</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Set other member values of the surface cylinder data structure. In the following example, the radius of the cylinder is set to 10.0. The unit of measure (as multiples of millimeters) was previously set for the model file entity. (See <a class="reference internal" href="#create-a-model-file-entity"><span class="std std-ref">Create a model file entity</span></a>.)</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sData</span><span class="o">.</span><span class="n">m_dRadius</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Package the cylinder data as a PRC entity by invoking the A3DSurfCylinderCreate function. The first argument is a pointer to the surface cylinder data, and the second is the pointer to the surface cylinder entity created in Step <a class="reference external" href="Plugins_A3D_API.html#50618396_52301">Declare a null pointer to an A3DSurfCylinder entity.</a>.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DSurfCylinderCreate</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sData</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pSurfCylinder</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="create-a-circular-curve-entity">
<span id="id67"></span><h4>Create a circular curve entity<a class="headerlink" href="#create-a-circular-curve-entity" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Declare a null pointer to a circular curve entity.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DCrvCircle</span><span class="o">*</span> <span class="n">pCrvCircle</span> <span class="o">=</span> <span class="n">NULL</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Declare and initialize a circular curve data structure, and initialize the structures it contains.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DCrvCircleData</span> <span class="n">sData</span><span class="p">;</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="p">);</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="o">.</span><span class="n">m_sParam</span><span class="p">);</span>
<span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sData</span><span class="o">.</span><span class="n">m_sTrsf</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Set the values of the circular curve data structure. The following example sets the radius of the circle to a value originally specified during loop creation. (See <a class="reference internal" href="#create-a-topology-face-entity"><span class="std std-ref">Create a topology face entity</span></a>.)</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sData</span><span class="o">.</span><span class="n">m_dRadius</span> <span class="o">=</span> <span class="n">radius</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Set the values of the parameterization structure within the circular curve data structure. In this example, the interval defines the circular arc as the entire circle and the co-efficients set the parameterization across the entire length of the circular arc.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sData</span><span class="o">.</span><span class="n">m_sParam</span><span class="o">.</span><span class="n">m_dCoeffA</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_sParam</span><span class="o">.</span><span class="n">m_dCoeffB</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_sParam</span><span class="o">.</span><span class="n">m_sInterval</span><span class="o">.</span><span class="n">m_dMin</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
<span class="n">sData</span><span class="o">.</span><span class="n">m_sParam</span><span class="o">.</span><span class="n">m_sInterval</span><span class="o">.</span><span class="n">m_dMax</span> <span class="o">=</span> <span class="mi">360</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Set the values of the Cartesian transformation structure within the circular curve data structure. The following example sets the behavior of the Cartesian transformation data to the identity transformation.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sData</span><span class="o">.</span><span class="n">m_sTrsf</span><span class="o">.</span><span class="n">m_ucBehaviour</span> <span class="o">=</span> <span class="n">kA3DTransformationIdentity</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>Package the curve data as a PRC entity by invoking the A3DCrvCircleCreate function. The first argument is a pointer to the curve circle data, and the second is the pointer to the circular curve entity created in Step <a class="reference external" href="Plugins_A3D_API.html#50618396_46262">Declare a null pointer to a circular curve entity.</a>.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DCrvCircleCreate</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sData</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pCrvCircle</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="defining-root-level-attributes-for-a-prc-entity">
<span id="id68"></span><h3>Defining root-level attributes for a PRC entity<a class="headerlink" href="#defining-root-level-attributes-for-a-prc-entity" title="Permalink to this headline">¶</a></h3>
<p>The Acrobat 3D API lets you create a set of attributes named <em>root-level attributes</em> that can be applied to any PRC entity. These attributes are packaged as an <code class="docutils literal notranslate"><span class="pre">A3DRootBase</span></code> entity that is referenced from the PRC entity they describe.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">A3DRootBaseData</span></code>. This structure has a name and can have pointers to multiple <code class="docutils literal notranslate"><span class="pre">A3DMiscAttribute</span></code> entities.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">A3DMiscAttributeData</span></code>. This structure has a name and can reference a single <code class="docutils literal notranslate"><span class="pre">A3DMiscSingle</span></code> structure.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">A3DMiscSingleAttributeData</span></code>. This structure is used for modeler data, such as string or time. It has a title, a type designation, and data. The name in the parent <code class="docutils literal notranslate"><span class="pre">A3DMiscAttributeData</span></code> must match the title in the <code class="docutils literal notranslate"><span class="pre">A3DMiscSingleAttributeData</span></code>. This structure is terminal.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See the <a class="reference external" href="./API_References/PRCReference/3D_API_Reference/index.html">Acrobat 3D API Reference</a> for limitations on including modeler data in the root-level attributes for a PRC entity.</p>
</div>
<p>Here is a diagram that shows the structure of the <code class="docutils literal notranslate"><span class="pre">A3DRootBase</span></code> entity that can be associated with any PRC entity. The <code class="docutils literal notranslate"><span class="pre">A3DMiscSingleAttributeData</span></code> structures are used only for modeler attributes. The sample code that comes after the following task descriptions exemplifies this structure.</p>
<img alt="_images/rootbase.png" src="_images/rootbase.png" />
<div class="section" id="define-miscellaneous-attributes-that-omit-modeler-data">
<span id="id69"></span><h4>Define miscellaneous attributes that omit modeler data<a class="headerlink" href="#define-miscellaneous-attributes-that-omit-modeler-data" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Determine the string to use at the top level of the attributes and (optionally) the strings to use at subordinate levels.</p></li>
<li><p>Declare an array to accommodate pointers to the <code class="docutils literal notranslate"><span class="pre">A3DMiscAttribute</span></code> entities that you will create in a subsequent step.</p></li>
<li><p>For each subordinate-level string, declare and initialize an <code class="docutils literal notranslate"><span class="pre">A3DMiscAttributeData</span></code> structure. Set the <code class="docutils literal notranslate"><span class="pre">m_pcTitle</span></code> member to the subordinate-level string. Leave the <code class="docutils literal notranslate"><span class="pre">m_uiSize</span></code> and <code class="docutils literal notranslate"><span class="pre">m_pSingleAttributesData</span></code> members set to 0 because this structure omits modeler data.</p></li>
<li><p>Package each <code class="docutils literal notranslate"><span class="pre">A3DMiscAttributeData</span></code> structure as an <code class="docutils literal notranslate"><span class="pre">A3DMiscAttribute</span></code> entity by invoking the <code class="docutils literal notranslate"><span class="pre">A3DMiscAttributeCreate</span></code> function. Save the entity pointer in the array created in Step <cite>Declare an array to accommodate pointers to the ``A3DMiscAttribute`</cite> entities that you will create in a subsequent step. &lt;Plugins_A3D_API.html#50618396_49803&gt;`__.</p></li>
<li><p>Declare and initialize an <code class="docutils literal notranslate"><span class="pre">A3DRootBaseData</span></code> structure. Set its <code class="docutils literal notranslate"><span class="pre">m_pcName</span></code> member to the top-level string. Set the <code class="docutils literal notranslate"><span class="pre">m_ppAttributes</span></code> member to reference the array that contains pointers to the <code class="docutils literal notranslate"><span class="pre">A3DMiscAttribute</span></code> entities.</p></li>
<li><p>Invoke the A3DRootBaseSet function to package the <code class="docutils literal notranslate"><span class="pre">A3DRootBaseData</span></code> structure as an <code class="docutils literal notranslate"><span class="pre">A3DRootBase</span></code> entity associated with a PRC entity. The first argument in this call is a pointer to the entity, and the second is a pointer to the <code class="docutils literal notranslate"><span class="pre">A3DRootBaseData</span></code> structure.</p></li>
</ol>
</div>
<div class="section" id="define-miscellaneous-attributes-that-include-modeler-data">
<span id="id70"></span><h4>Define miscellaneous attributes that include modeler data<a class="headerlink" href="#define-miscellaneous-attributes-that-include-modeler-data" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Determine the strings to use for modeler data and the type represented by each string. Here are the possible types and the enumerations that identify them:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">kA3DModellerAttributeTypeInt</span></code> integer (32 bits)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kA3DModellerAttributeTypeReal</span></code> floating point</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kA3DModellerAttributeTypeTime</span></code> integer (32 bits), which uses the same conventions as the <code class="docutils literal notranslate"><span class="pre">time_t</span></code> C datatype.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kA3DModellerAttributeTypeString</span></code> UTF-8 character string</p></li>
</ul>
</li>
</ol>
<ol class="arabic simple" start="2">
<li><p>Determine the titles to use for each piece of modeler data.</p></li>
<li><p>Declare an array to accommodate pointers to the <code class="docutils literal notranslate"><span class="pre">A3DMiscAttributeData</span></code> entities that you will create in a subsequent step.</p></li>
<li><p>For each modeler attribute associated with the root base entity, do the following:</p>
<ul class="simple">
<li><p>Declare and initialize an A3DMiscSingleAttributeData structure. Set the <code class="docutils literal notranslate"><span class="pre">m_eType</span></code> member to the type of the data, set the <code class="docutils literal notranslate"><span class="pre">m_pcData</span></code> member to a string that represents the data, and set the <code class="docutils literal notranslate"><span class="pre">m_pcTitle</span></code> member to a title that identifies the data.</p></li>
<li><p>Declare and initialize an <code class="docutils literal notranslate"><span class="pre">A3DMiscAttributeData</span></code> structure. Set the <code class="docutils literal notranslate"><span class="pre">m_pcTitle</span></code> member to the same title used in the A3DMiscSingleAttributeData structure. Set the <code class="docutils literal notranslate"><span class="pre">m_uiSize</span></code> member to 1, and the <code class="docutils literal notranslate"><span class="pre">m_pSingleAtttributesData</span></code> member to reference the A3DMiscSingleAttributeData structure.</p></li>
</ul>
</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Each A3DMiscSingleAttributeData structure that references another A3DMiscSingleAttributeData structure must reference only one such structure and must have the same title as that structure.</p>
</div>
<ol class="arabic simple" start="5">
<li><p>Package each <code class="docutils literal notranslate"><span class="pre">A3DMiscAttributeData</span></code> structure as an <code class="docutils literal notranslate"><span class="pre">A3DMiscAttribute</span></code> entity by invoking the <code class="docutils literal notranslate"><span class="pre">A3DMiscAttributeCreate</span></code> function. Save the entity pointer in the array created in Step <cite>Declare an array to accommodate pointers to the ``A3DMiscAttributeData`</cite> entities that you will create in a subsequent step. &lt;Plugins_A3D_API.html#50618396_41483&gt;`__.</p></li>
<li><p>Declare and initialize an <code class="docutils literal notranslate"><span class="pre">A3DRootBaseData</span></code> structure. (See Step <cite>Declare and initialize an ``A3DRootBaseData`</cite> structure. Set its <code class="docutils literal notranslate"><span class="pre">m_pcName</span></code> member to the top-level string. Set the <code class="docutils literal notranslate"><span class="pre">m_ppAttributes</span></code> member to reference the array that contains pointers to the <code class="docutils literal notranslate"><span class="pre">A3DMiscAttribute</span></code> entities. &lt;Plugins_A3D_API.html#50618396_71665&gt;`__ in <a class="reference internal" href="#define-miscellaneous-attributes-that-omit-modeler-data"><span class="std std-ref">Define miscellaneous attributes that omit modeler data</span></a>.)</p></li>
<li><p>Package the <code class="docutils literal notranslate"><span class="pre">A3DRootBaseData</span></code> structure as an <code class="docutils literal notranslate"><span class="pre">A3DRootBase</span></code> entity. (See Step <cite>Invoke the A3DRootBaseSet function to package the ``A3DRootBaseData`</cite> structure as an <code class="docutils literal notranslate"><span class="pre">A3DRootBase</span></code> entity associated with a PRC entity. The first argument in this call is a pointer to the entity, and the second is a pointer to the <code class="docutils literal notranslate"><span class="pre">A3DRootBaseData</span></code> structure. &lt;Plugins_A3D_API.html#50618396_44847&gt;`__ in <a class="reference internal" href="#define-miscellaneous-attributes-that-omit-modeler-data"><span class="std std-ref">Define miscellaneous attributes that omit modeler data</span></a>.)</p></li>
</ol>
<p>The following sample code creates base root attributes that describe three sets of modeler data. For information about the relationships between the structures and entities that represent this data, see the diagram provided in <a class="reference external" href="Plugins_A3D_API.html#50618396_49152">Defining root-level attributes for a PRC entity</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DVoid</span> <span class="n">setAttributes</span><span class="p">(</span><span class="n">A3DEntity</span><span class="o">*</span> <span class="n">p</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">A3DMiscSingleAttributeData</span> <span class="n">Single</span><span class="p">;</span>
  <span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">Single</span><span class="p">);</span>

  <span class="n">Single</span><span class="o">.</span><span class="n">m_eType</span> <span class="o">=</span> <span class="n">kA3DModellerAttributeTypeString</span><span class="p">;</span>
  <span class="n">Single</span><span class="o">.</span><span class="n">m_pcTitle</span> <span class="o">=</span> <span class="s2">&quot;Title&quot;</span><span class="p">;</span>
  <span class="n">Single</span><span class="o">.</span><span class="n">m_pcData</span> <span class="o">=</span> <span class="s2">&quot;Simple Brep building demonstration&quot;</span><span class="p">;</span>

  <span class="n">A3DMiscAttributeData</span> <span class="n">sAttribs</span><span class="p">;</span>
  <span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sAttribs</span><span class="p">);</span>

  <span class="n">sAttribs</span><span class="o">.</span><span class="n">m_pcTitle</span> <span class="o">=</span> <span class="n">Single</span><span class="o">.</span><span class="n">m_pcTitle</span><span class="p">;</span>
  <span class="n">sAttribs</span><span class="o">.</span><span class="n">m_pSingleAttributesData</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">Single</span><span class="p">;</span>
  <span class="n">sAttribs</span><span class="o">.</span><span class="n">m_uiSize</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="n">ASInt32</span> <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DMiscAttributeCreate</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sAttribs</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pAttr</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>

  <span class="n">Single</span><span class="o">.</span><span class="n">m_pcTitle</span> <span class="o">=</span> <span class="s2">&quot;Author&quot;</span><span class="p">;</span>
  <span class="n">Single</span><span class="o">.</span><span class="n">m_pcData</span> <span class="o">=</span> <span class="s2">&quot;Adobe Lyon&quot;</span><span class="p">;</span>
  <span class="n">sAttribs</span><span class="o">.</span><span class="n">m_pcTitle</span> <span class="o">=</span> <span class="n">Single</span><span class="o">.</span><span class="n">m_pcTitle</span><span class="p">;</span>
  <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DMiscAttributeCreate</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sAttribs</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pAttr</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>

  <span class="n">Single</span><span class="o">.</span><span class="n">m_pcTitle</span> <span class="o">=</span> <span class="s2">&quot;Company&quot;</span><span class="p">;</span>
  <span class="n">Single</span><span class="o">.</span><span class="n">m_pcData</span> <span class="o">=</span> <span class="s2">&quot;Adobe Systems Incorporated&quot;</span><span class="p">;</span>
  <span class="n">sAttribs</span><span class="o">.</span><span class="n">m_pcTitle</span> <span class="o">=</span> <span class="n">Single</span><span class="o">.</span><span class="n">m_pcTitle</span><span class="p">;</span>
  <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DMiscAttributeCreate</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sAttribs</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pAttr</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>

  <span class="n">A3DRootBaseData</span> <span class="n">sRootData</span><span class="p">;</span>
  <span class="n">A3D_INITIALIZE_DATA</span><span class="p">(</span><span class="n">sRootData</span><span class="p">);</span>

  <span class="n">sRootData</span><span class="o">.</span><span class="n">m_pcName</span> <span class="o">=</span> <span class="s2">&quot;Trimmed surface&quot;</span><span class="p">;</span>
  <span class="n">sRootData</span><span class="o">.</span><span class="n">m_ppAttributes</span> <span class="o">=</span> <span class="n">pAttr</span><span class="p">;</span>
  <span class="n">sRootData</span><span class="o">.</span><span class="n">m_uiSize</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
  <span class="n">iRet</span> <span class="o">=</span> <span class="n">A3DRootBaseSet</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sRootData</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="creating-a-3d-annotation-that-references-the-prc-file">
<span id="id71"></span><h3>Creating a 3D annotation that references the PRC file<a class="headerlink" href="#creating-a-3d-annotation-that-references-the-prc-file" title="Permalink to this headline">¶</a></h3>
<p>Within an existing PDF document, create a 3D annotation. (See <a class="reference internal" href="Plugins_Annotations.html#creating-annotations"><span class="std std-ref">Creating Annotations</span></a>.) Use the file created in <a class="reference internal" href="#creating-a-model-file-entity-and-exporting-it-to-a-physical-file"><span class="std std-ref">Creating a model file entity and exporting it to a physical file</span></a> to create the 3D stream dictionary. Set the 3D stream dictionary <code class="docutils literal notranslate"><span class="pre">Type</span></code> attribute to <code class="docutils literal notranslate"><span class="pre">3D</span></code> and the <code class="docutils literal notranslate"><span class="pre">Subtype</span></code> attribute to <code class="docutils literal notranslate"><span class="pre">PRC</span></code>, as shown in the following example.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CosObj</span> <span class="n">attrObj</span> <span class="o">=</span> <span class="n">CosStreamDict</span><span class="p">(</span><span class="n">stm3D</span><span class="p">);</span>
<span class="n">CosDictPutKeyString</span><span class="p">(</span><span class="n">attrObj</span><span class="p">,</span> <span class="s2">&quot;Type&quot;</span><span class="p">,</span>
  <span class="n">CosNewNameFromString</span><span class="p">(</span><span class="n">cosDoc</span><span class="p">,</span> <span class="n">false</span><span class="p">,</span> <span class="s2">&quot;3D&quot;</span><span class="p">));</span>
<span class="n">CosDictPutKeyString</span><span class="p">(</span><span class="n">attrObj</span><span class="p">,</span> <span class="s2">&quot;Subtype&quot;</span><span class="p">,</span>
  <span class="n">CosNewName</span><span class="p">(</span><span class="n">cosDoc</span><span class="p">,</span> <span class="n">false</span><span class="p">,</span> <span class="n">ASAtomFromString</span><span class="p">(</span><span class="s2">&quot;PRC&quot;</span><span class="p">)));</span>
<span class="n">CosDictPutKeyString</span><span class="p">(</span><span class="n">cosAnnot</span><span class="p">,</span> <span class="s2">&quot;3DD&quot;</span><span class="p">,</span> <span class="n">stm3D</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="creating-a-tessellation-entity-for-representing-faceted-objects">
<span id="id72"></span><h2>Creating a tessellation entity for representing faceted objects<a class="headerlink" href="#creating-a-tessellation-entity-for-representing-faceted-objects" title="Permalink to this headline">¶</a></h2>
<p>This section explains how to add tessellation base data to an existing representation item. The Acrobat 3D SDK defines a dedicated type you can use to create faceted entities.</p>
<div class="section" id="create-the-tessellation-base-data">
<span id="id73"></span><h3>Create the tessellation base data<a class="headerlink" href="#create-the-tessellation-base-data" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>Create a A3DTessBaseData structure and set its member values to represent the facets. The following explanation assumes facets are defined as triangles, although you could define facets having more than three points.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_uiCoordSize</span></code>. Set this member to the number of coordinates required to represent all facets in the object. This value is calculated as 9 * <code class="docutils literal notranslate"><span class="pre">facetSize</span></code>. The 9 multiplier is the number of points in each facet (3) times the number of coordinates in each point (3). The <code class="docutils literal notranslate"><span class="pre">facetSize</span></code> variable represents the number of facets in the object.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_pdCoords</span></code>. Set this member to an array of <em>N</em> <code class="docutils literal notranslate"><span class="pre">A3DDouble</span></code> entries, where <em>N</em> is the value calculated for the <code class="docutils literal notranslate"><span class="pre">m_uiCoordSize</span></code> member.</p></li>
</ul>
</li>
</ol>
<ol class="arabic simple" start="2">
<li><p>Add coordinates for each vertex of each facet to the array referenced by the <code class="docutils literal notranslate"><span class="pre">m_pdCoords</span></code> member. The X, Y, and Z coordinates for each vertex are represented in sequential entries in the array, as shown in this example:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sTessBaseData</span><span class="o">.</span><span class="n">m_pdCoords</span><span class="p">[</span><span class="n">j</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
<span class="n">sTessBaseData</span><span class="o">.</span><span class="n">m_pdCoords</span><span class="p">[</span><span class="n">j</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span><span class="p">;</span>
<span class="n">sTessBaseData</span><span class="o">.</span><span class="n">m_pdCoords</span><span class="p">[</span><span class="n">j</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">z</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="create-the-tessellation-facet-data">
<span id="id74"></span><h3>Create the tessellation facet data<a class="headerlink" href="#create-the-tessellation-facet-data" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>Create an A3DTess3DData structure and set its members to represent the facet normals:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_uiNormalSize</span></code>. Set this member to the size of the array required to represent the normals for all facets in the objects. This is calculated as 3 * <code class="docutils literal notranslate"><span class="pre">facetSize</span></code>. The 3 multiplier is the number of cordinates to represent each vector.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_pdNormals</span></code>. Set this member to an array of <em>N</em> <code class="docutils literal notranslate"><span class="pre">A3DDouble</span></code> entries, where <em>N</em> is the value calculated for the <code class="docutils literal notranslate"><span class="pre">m_uiNormalSize</span></code> member.</p></li>
<li><p>m_uiTriangulatedIndexSize. Set this member to the number of entries required to represent the indexes associated with each facet in the objects. Each facet can have one to four indexes that reference texture coordinates, one index that references a facet normal, and three indexes that reference vertices. Normals are read from the <code class="docutils literal notranslate"><span class="pre">m_pdNormals</span></code> array, and textures are read from the <code class="docutils literal notranslate"><span class="pre">m_pdTextureCoords</span></code> array.</p></li>
<li><p>m_puiTriangulatedIndexes. Set this member to an array of <em>N</em> ASUns32 entries, where <em>N</em> is the number of entries in the m_uiTriangulatedIndexSize member. This array contains the indexes of the points (m_pdCoords), normals (m_pdNormals), and texture arrays for each face’s triangulated representation. The entries in this array correspond to the contents in the <code class="docutils literal notranslate"><span class="pre">A3DTessFaceData</span></code> entity.</p></li>
</ul>
</li>
</ol>
<ol class="arabic simple" start="2">
<li><p>Add the indexes for each facet, considering the number of entries to represent each facet. Each facet contains the following sequential representations in this array:</p>
<ul class="simple">
<li><p>(Optional) Index of the first texture in the array referenced by the m_pdTextureCoords member. This entry can be followed by three more entries for additional texture indexes.</p></li>
<li><p>Index of the facet normal in the array referenced by the m_pdNormals member.</p></li>
<li><p>Index of the first facet vertex in the array referenced by the m_pdCoords member.</p></li>
<li><p>Index of the second facet vertex in the array referenced by the m_pdCoords member.</p></li>
<li><p>Index of the third facet vertex in the array referenced by the m_pdCoords member.</p></li>
</ul>
</li>
</ol>
<p>In the following example for STL data, <code class="docutils literal notranslate"><span class="pre">facetSize</span></code> is set to 0 for the first facet represented by the array and to 1 for the second facet in the array.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sTess3DData</span><span class="o">.</span><span class="n">m_puiTriangulatedIndexes</span><span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">facetSize</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
<span class="n">sTess3DData</span><span class="o">.</span><span class="n">m_puiTriangulatedIndexes</span><span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">facetSize</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span>
<span class="n">sTess3DData</span><span class="o">.</span><span class="n">m_puiTriangulatedIndexes</span><span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">facetSize</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">3</span><span class="p">;</span>
<span class="n">sTess3DData</span><span class="o">.</span><span class="n">m_puiTriangulatedIndexes</span><span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">facetSize</span><span class="o">+</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">6</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Add the coordinates of each facet normal to the array referenced by the <code class="docutils literal notranslate"><span class="pre">m_pdNormals</span></code> member. The X, Y, and Z coordinates for each vector are represented in sequential entries in the array, as shown in this example:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sTess3DData</span><span class="o">.</span><span class="n">m_pdNormals</span><span class="p">[</span><span class="n">i</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
<span class="n">sTess3DData</span><span class="o">.</span><span class="n">m_pdNormals</span><span class="p">[</span><span class="n">i</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span><span class="p">;</span>
<span class="n">sTess3DData</span><span class="o">.</span><span class="n">m_pdNormals</span><span class="p">[</span><span class="n">i</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">z</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>For each face, create an <code class="docutils literal notranslate"><span class="pre">A3DTessFaceData</span></code> entity and set its member values as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m_usUsedEntitiesFlags</span></code>. Set this member to an enumeration that specifies the entities used in the current face tessellation. For example, the <code class="docutils literal notranslate"><span class="pre">kA3DTessFaceDataTriangleOneNormal</span></code> enumeration specifies that the face data is a triangle with a single normal facet.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_uiSizesTriangulatedSize</span></code>. Set this member to the number of entries in the array referenced by the <code class="docutils literal notranslate"><span class="pre">m_puiSizesTriangulated</span></code> member.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_puiSizesTriangulated</span></code>. Set this value to the repetition sequence applied to the <code class="docutils literal notranslate"><span class="pre">m_usUsedEntitiesFlags</span></code> member. A single entry with a value of 1 indicates that the first flag in <code class="docutils literal notranslate"><span class="pre">m_usUsedEntitiesFlags</span></code> applies to all face data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_uiStartTriangulated</span></code>. Set this value to the starting index for the wire in the array of point indexes of the <code class="docutils literal notranslate"><span class="pre">A3DTess3DData</span></code> entity.</p></li>
</ul>
</li>
<li><p>Set the <code class="docutils literal notranslate"><span class="pre">A3DTess3DData</span></code> structure’s <code class="docutils literal notranslate"><span class="pre">m_psFaceTessData</span></code> member to reference an array that in turn references each face that applied to the facets. Set the <code class="docutils literal notranslate"><span class="pre">m_uiFaceTessSize</span></code> member to the number of faces in this array.</p></li>
<li><p>Declare a pointer to a null <code class="docutils literal notranslate"><span class="pre">A3DTess3D</span></code> entity.</p></li>
<li><p>Package the tessellation data by invoking the <code class="docutils literal notranslate"><span class="pre">A3DTess3DCreate</span></code> function, providing the location of the <code class="docutils literal notranslate"><span class="pre">A3DTess3DData</span></code> structure as the first argument and the location of the <code class="docutils literal notranslate"><span class="pre">A3DTess3D</span></code> pointer as the second argument.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTess3D</span><span class="o">*</span> <span class="n">pTess3D</span> <span class="o">=</span> <span class="n">NULL</span><span class="p">;</span>
<span class="n">A3DTess3DCreate</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sTess3DData</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pTess3D</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="8">
<li><p>Package the tessellation base data with in the <code class="docutils literal notranslate"><span class="pre">A3DTess3D</span></code> entity by invoking the <code class="docutils literal notranslate"><span class="pre">A3DTessBaseSet</span></code> function.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A3DTessBaseSet</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pTess3D</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sTessBaseData</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="9">
<li><p>Add the <code class="docutils literal notranslate"><span class="pre">A3DTess3D</span></code> data to a representation item. (See <a class="reference internal" href="#creating-representation-item-prc-entities"><span class="std std-ref">Creating representation item PRC entities</span></a>.)</p></li>
</ol>
<p>The following code sample creates an A3D tessellation entity from a file that conforms to the STL format. It packages this entity with a poly Brep model representation item. STL is a file format native to the stereolithography CAD software created by 3D Systems.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// Create structure for facet data
A3DTessBaseData sTessBaseData;
A3D_INITIALIZE_DATA(sTessBaseData);
sTessBaseData.m_uiCoordSize = 9 * facetSize;
sTessBaseData.m_pdCoords =
  (A3DDouble*)allocCllBck(sTessBaseData.m_uiCoordSize * sizeof(A3DDouble));

//Create structure for normal vector data
A3DTess3DData sTess3DData;
A3D_INITIALIZE_DATA(sTess3DData);
sTess3DData.m_uiNormalSize = 3 * facetSize;
sTess3DData.m_pdNormals =
  (A3DDouble*)allocCllBck(sTess3DData.m_uiNormalSize * sizeof(A3DDouble));


//Total amount of indexes is calculated as follows:
//(one normal + one triangle (3 points)) * Number of facets
sTess3DData.m_uiTriangulatedIndexSize = 4 * facetSize;
sTess3DData.m_puiTriangulatedIndexes =
  (ASUns32*)allocCllBck(sTess3DData.m_uiTriangulatedIndexSize *
      sizeof(ASUns32));


//Set up variables used in reading STL data.
A3DUTF8Char name[100];
A3DUTF8Char dummy[100];
A3DDouble x, y, z;
ASInt32 iRet = 0;
ASUns32 i = 0;
ASUns32 j = 0;
const A3DUTF8Char* pcName = NULL;

rewind(stlFile);
curr = 0;
facetSize = 0;
memset(sBuffer, 0, A3D_MAX_BUFFER);
while(fgets(sBuffer, A3D_MAX_BUFFER, stlFile) &gt; 0) {
  sscanf(sBuffer, &quot;%s&quot;, key);
  if(!_stricmp(key, &quot;solid&quot;)) {
      iRet = sscanf(sBuffer, &quot;%s %s&quot;, key, name);
      if (iRet != 2)
          sprintf(name,&quot;unnamed&quot;);
  } else if (!_stricmp(key, &quot;facet&quot;)) {
      iRet = sscanf(sBuffer,&quot;%s %s %lf %lf %lf&quot;,key,dummy,&amp;x,&amp;y,&amp;z);
      sTess3DData.m_puiTriangulatedIndexes[4 * facetSize] = i;
      sTess3DData.m_puiTriangulatedIndexes[4 * facetSize + 1] = j;
      sTess3DData.m_puiTriangulatedIndexes[4 * facetSize + 2] = j + 3;
      sTess3DData.m_puiTriangulatedIndexes[4 * facetSize + 3] = j + 6;
      sTess3DData.m_pdNormals[i++] = x;
      sTess3DData.m_pdNormals[i++] = y;
      sTess3DData.m_pdNormals[i++] = z;
      facetSize++;
  } else if (!_stricmp(key, &quot;vertex&quot;)) {
      iRet = sscanf(sBuffer, &quot;%s %lf %lf %lf&quot;, key, &amp;x, &amp;y, &amp;z);
      sTessBaseData.m_pdCoords[j++] = x;
      sTessBaseData.m_pdCoords[j++] = y;
      sTessBaseData.m_pdCoords[j++] = z;
  }
  curr += strlen(sBuffer);
  prgIncCllBck(curr);
  memset(sBuffer, 0, A3D_MAX_BUFFER);
}
fclose(stlFile);
prgEndCllBck();


//one can consider that STL consists in one single face made of total amount of triangles
A3DTessFaceData sTessFaceData;
A3D_INITIALIZE_DATA(sTessFaceData);
sTessFaceData.m_usUsedEntitiesFlags = kA3DTessFaceDataTriangleOneNormal;
sTessFaceData.m_uiSizesTriangulatedSize = 1; /* size of the next array */
sTessFaceData.m_puiSizesTriangulated = &amp;facetSize;
sTessFaceData.m_uiStartTriangulated = 0;


//so, only one face
sTess3DData.m_uiFaceTessSize = 1;
sTess3DData.m_psFaceTessData = &amp;sTessFaceData;
A3DTess3D* pTess3D = NULL;
A3DTess3DCreate(&amp;sTess3DData, &amp;pTess3D);
A3DTessBaseSet(pTess3D, &amp;sTessBaseData);


// Create a PolyBrepModel representation item
A3DRiPolyBrepModel *pRiPolyBrepModel = NULL;
A3DRiPolyBrepModelData sPolyBrepModelData;
A3D_INITIALIZE_DATA(sPolyBrepModelData);
sPolyBrepModelData.m_bIsClosed = TRUE;
A3DRiPolyBrepModelCreate(&amp;sPolyBrepModelData, &amp;pRiPolyBrepModel);


// Assign the tessellation to the PolyBrepModel
A3DRiRepresentationItemData sRiData;
A3D_INITIALIZE_DATA(sRiData);
sRiData.m_pTessBase = pTess3D;
A3DRiRepresentationItemSet(pRiPolyBrepModel, &amp;sRiData);
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Adobe Inc..
      <span class="lastupdated">
        Last update: Jul 11, 2022. 
        <img src="../../_static/adobelogo.png" class="logo"/> 
      </span>

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>